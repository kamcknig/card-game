<main class="match-config">
  <!-- ░░░  Player List  ░░░ -->
  <section class="players">
    <h2 class="section-title">Players</h2>

    <ul class="player-list">
      @for (id of $playerIds | async; track id) {
        <app-player-name-input [playerId]="id"></app-player-name-input>
      }
    </ul>
  </section>

  <!-- ░░░  Expansion List  ░░░ -->
  <section class="expansions">
    <h2 class="section-title">Expansions</h2>

    <ul class="expansion-list">
      @let expansionList = ($expansionList | async) ?? [];
      @let selectedExpansions = ($selectedExpansions | async) ?? [];
      @for (expansion of expansionList; track expansion.name) {
        <!-- item (selected) -->
        <li
        (click)="isGameOwner ? onToggleExpansion(expansion.name) : null"
        class="expansion-item"
          [ngClass]="{'selected': selectedExpansions.includes(expansion.name)}"
          >
          <img
            ngSrc="/assets/expansion-icons/{{expansion.name}}.png"
            height="24"
            width="1"
            alt="{{expansion.title}} icon"
            class="expansion-icon"
          />
          <div class="expansion-title">{{ expansion.title }}</div>
        </li>
      }
    </ul>
  </section>

  <section class="kingdom-section">
    <h2 class="section-title">Kingdom</h2>

    <div class="kingdom-list">
      @for (kingdom of preSelectedKingdoms; track kingdom?.name) {
        <div
          class="kingdom"
          (click)="selectKingdom($index, kingdom)"
        >
          @if (kingdom !== null) {
            <img
              alt="{{kingdom.name}} image"
              ngSrc="/assets/card-images/{{kingdom.expansion}}/half-size/{{kingdom.cardKey}}.jpg"
              height="122"
              width="122"
            />
          }
          @else {
            <span class="no-kingdom">?</span>
          }
        </div>
      }
    </div>
  </section>
</main>
