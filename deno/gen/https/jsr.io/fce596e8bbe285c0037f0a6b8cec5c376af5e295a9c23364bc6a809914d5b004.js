import { identity } from '../../function/identity.ts';
import { isIterateeCall } from '../_internal/isIterateeCall.ts';
import { property } from '../object/property.ts';
import { matches } from '../predicate/matches.ts';
import { matchesProperty } from '../predicate/matchesProperty.ts';
/**
 * Checks if every item in an object has a specific property, where the property name is provided as a PropertyKey.
 *
 * @template T
 * @param {T extends Record<string, unknown> ? T : never} object - The object to check through.
 * @param {ArrayLike<T> | Record<any, any> | null | undefined} source - The source array or object to check through.
 * @param {((item: T, index: number, arr: any) => unknown) | Partial<T> | [keyof T, unknown] | PropertyKey} doesMatch - The criteria to match. It can be a function, a partial object, a key-value pair, or a property name.
 * @param {PropertyKey} propertyToCheck - The property name to check.
 * @param {unknown} guard - Enables use as an iteratee for methods like `_.map`.
 * @returns {boolean} - `true` if every property value has the specified property, or `false` if at least one does not match.
 *
 * @example
 * // Using a property name
 * const obj = { a: { id: 1, name: 'Alice' }, b: { id: 2, name: 'Bob' } };
 * const result = every(obj, 'name');
 * console.log(result); // true
 */ export function every(source, doesMatch, guard) {
  if (!source) {
    return true;
  }
  const values = Array.isArray(source) ? source : Object.values(source);
  if (guard && isIterateeCall(source, doesMatch, guard)) {
    doesMatch = undefined;
  }
  if (!doesMatch) {
    doesMatch = identity;
  }
  switch(typeof doesMatch){
    case 'function':
      {
        if (!Array.isArray(source)) {
          const keys = Object.keys(source);
          for(let i = 0; i < keys.length; i++){
            const key = keys[i];
            const value = source[key];
            if (!doesMatch(value, key, source)) {
              return false;
            }
          }
          return true;
        }
        return values.every(doesMatch);
      }
    case 'object':
      {
        if (Array.isArray(doesMatch) && doesMatch.length === 2) {
          const key = doesMatch[0];
          const value = doesMatch[1];
          return values.every(matchesProperty(key, value));
        } else {
          return values.every(matches(doesMatch));
        }
      }
    case 'symbol':
    case 'number':
    case 'string':
      {
        return values.every(property(doesMatch));
      }
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0Blcy10b29sa2l0L2VzLXRvb2xraXQvMS4zMy4wL3NyYy9jb21wYXQvYXJyYXkvZXZlcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tICcuLi8uLi9mdW5jdGlvbi9pZGVudGl0eS50cyc7XG5pbXBvcnQgeyBpc0l0ZXJhdGVlQ2FsbCB9IGZyb20gJy4uL19pbnRlcm5hbC9pc0l0ZXJhdGVlQ2FsbC50cyc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJy4uL29iamVjdC9wcm9wZXJ0eS50cyc7XG5pbXBvcnQgeyBtYXRjaGVzIH0gZnJvbSAnLi4vcHJlZGljYXRlL21hdGNoZXMudHMnO1xuaW1wb3J0IHsgbWF0Y2hlc1Byb3BlcnR5IH0gZnJvbSAnLi4vcHJlZGljYXRlL21hdGNoZXNQcm9wZXJ0eS50cyc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGFsbCBlbGVtZW50cyBpbiBhbiBhcnJheSBhcmUgdHJ1dGh5LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWR9IGFyciAtIFRoZSBhcnJheSB0byBjaGVjayB0aHJvdWdoLlxuICogQHJldHVybnMge2Jvb2xlYW59IC0gYHRydWVgIGlmIGFsbCBlbGVtZW50cyBhcmUgdHJ1dGh5LCBvciBgZmFsc2VgIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGlzIGZhbHN5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBpdGVtcyA9IFsxLCAyLCAzLCA0XTtcbiAqIGNvbnN0IHJlc3VsdCA9IGV2ZXJ5KGl0ZW1zKTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdCk7IC8vIHRydWVcbiAqXG4gKiBjb25zdCBpdGVtc1dpdGhGYWxzeSA9IFsxLCAwLCAzLCA0XTtcbiAqIGNvbnN0IHJlc3VsdFdpdGhGYWxzeSA9IGV2ZXJ5KGl0ZW1zV2l0aEZhbHN5KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdFdpdGhGYWxzeSk7IC8vIGZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBldmVyeTxUPihhcnI6IEFycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuO1xuXG4vKipcbiAqIENoZWNrcyBpZiBldmVyeSBpdGVtIGluIGFuIGFycmF5IG1hdGNoZXMgdGhlIGdpdmVuIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgLSBUaGUgYXJyYXkgdG8gY2hlY2sgdGhyb3VnaC5cbiAqIEBwYXJhbSB7KGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycjogVFtdKSA9PiB1bmtub3dufSBkb2VzTWF0Y2ggLSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gaXRlbSwgaXRzIGluZGV4LCBhbmQgdGhlIGFycmF5LCBhbmQgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSBpZiB0aGUgaXRlbSBtYXRjaGVzIHRoZSBjcml0ZXJpYS5cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIGB0cnVlYCBpZiBldmVyeSBpdGVtIG1hdGNoZXMgdGhlIHByZWRpY2F0ZSwgb3IgYGZhbHNlYCBpZiBhdCBsZWFzdCBvbmUgaXRlbSBkb2VzIG5vdCBtYXRjaC5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVXNpbmcgYSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqIGNvbnN0IGl0ZW1zID0gWzEsIDIsIDMsIDQsIDVdO1xuICogY29uc3QgcmVzdWx0ID0gZXZlcnkoaXRlbXMsIChpdGVtKSA9PiBpdGVtID4gMCk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQpOyAvLyB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBldmVyeTxUPihcbiAgYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLFxuICBkb2VzTWF0Y2g6IChpdGVtOiBULCBpbmRleDogbnVtYmVyLCBhcnI6IHJlYWRvbmx5IFRbXSkgPT4gdW5rbm93blxuKTogYm9vbGVhbjtcblxuLyoqXG4gKiBDaGVja3MgaWYgZXZlcnkgaXRlbSBpbiBhbiBhcnJheSBtYXRjaGVzIHRoZSBnaXZlbiBwYXJ0aWFsIG9iamVjdC5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgLSBUaGUgYXJyYXkgdG8gY2hlY2sgdGhyb3VnaC5cbiAqIEBwYXJhbSB7UGFydGlhbDxUPn0gZG9lc01hdGNoIC0gQSBwYXJ0aWFsIG9iamVjdCB0aGF0IHNwZWNpZmllcyB0aGUgcHJvcGVydGllcyB0byBtYXRjaC5cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIGB0cnVlYCBpZiBldmVyeSBpdGVtIG1hdGNoZXMgdGhlIHBhcnRpYWwgb2JqZWN0LCBvciBgZmFsc2VgIGlmIGF0IGxlYXN0IG9uZSBpdGVtIGRvZXMgbm90IG1hdGNoLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBVc2luZyBhIHBhcnRpYWwgb2JqZWN0XG4gKiBjb25zdCBpdGVtcyA9IFt7IGlkOiAxLCBuYW1lOiAnQWxpY2UnIH0sIHsgaWQ6IDIsIG5hbWU6ICdCb2InIH1dO1xuICogY29uc3QgcmVzdWx0ID0gZXZlcnkoaXRlbXMsIHsgbmFtZTogJ0JvYicgfSk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQpOyAvLyBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXZlcnk8VD4oYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLCBkb2VzTWF0Y2g6IFBhcnRpYWw8VD4pOiBib29sZWFuO1xuXG4vKipcbiAqIENoZWNrcyBpZiBldmVyeSBpdGVtIGluIGFuIGFycmF5IG1hdGNoZXMgYSBwcm9wZXJ0eSB3aXRoIGEgc3BlY2lmaWMgdmFsdWUuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7QXJyYXlMaWtlPFQ+IHwgbnVsbCB8IHVuZGVmaW5lZH0gYXJyIC0gVGhlIGFycmF5IHRvIGNoZWNrIHRocm91Z2guXG4gKiBAcGFyYW0ge1trZXlvZiBULCB1bmtub3duXX0gZG9lc01hdGNoUHJvcGVydHkgLSBBbiBhcnJheSB3aGVyZSB0aGUgZmlyc3QgZWxlbWVudCBpcyB0aGUgcHJvcGVydHkga2V5IGFuZCB0aGUgc2Vjb25kIGVsZW1lbnQgaXMgdGhlIHZhbHVlIHRvIG1hdGNoLlxuICogQHJldHVybnMge2Jvb2xlYW59IC0gYHRydWVgIGlmIGV2ZXJ5IGl0ZW0gaGFzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgdmFsdWUsIG9yIGBmYWxzZWAgaWYgYXQgbGVhc3Qgb25lIGl0ZW0gZG9lcyBub3QgbWF0Y2guXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFVzaW5nIGEgcHJvcGVydHktdmFsdWUgcGFpclxuICogY29uc3QgaXRlbXMgPSBbeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9XTtcbiAqIGNvbnN0IHJlc3VsdCA9IGV2ZXJ5KGl0ZW1zLCBbJ25hbWUnLCAnQWxpY2UnXSk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQpOyAvLyBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXZlcnk8VD4oYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLCBkb2VzTWF0Y2hQcm9wZXJ0eTogW2tleW9mIFQsIHVua25vd25dKTogYm9vbGVhbjtcblxuLyoqXG4gKiBDaGVja3MgaWYgZXZlcnkgaXRlbSBpbiBhbiBhcnJheSBoYXMgYSBzcGVjaWZpYyBwcm9wZXJ0eSwgd2hlcmUgdGhlIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgYXMgYSBQcm9wZXJ0eUtleS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgLSBUaGUgYXJyYXkgdG8gY2hlY2sgdGhyb3VnaC5cbiAqIEBwYXJhbSB7UHJvcGVydHlLZXl9IHByb3BlcnR5VG9DaGVjayAtIFRoZSBwcm9wZXJ0eSBuYW1lIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IC0gYHRydWVgIGlmIGV2ZXJ5IGl0ZW0gaGFzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHksIG9yIGBmYWxzZWAgaWYgYXQgbGVhc3Qgb25lIGl0ZW0gZG9lcyBub3QgbWF0Y2guXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFVzaW5nIGEgcHJvcGVydHkgbmFtZVxuICogY29uc3QgaXRlbXMgPSBbeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9XTtcbiAqIGNvbnN0IHJlc3VsdCA9IGV2ZXJ5KGl0ZW1zLCAnbmFtZScpO1xuICogY29uc29sZS5sb2cocmVzdWx0KTsgLy8gdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXZlcnk8VD4oYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLCBwcm9wZXJ0eVRvQ2hlY2s6IFByb3BlcnR5S2V5KTogYm9vbGVhbjtcblxuLyoqXG4gKiBDaGVja3MgaWYgZXZlcnkgaXRlbSBpbiBhbiBvYmplY3QgbWF0Y2hlcyB0aGUgZ2l2ZW4gcHJlZGljYXRlIGZ1bmN0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1QgfCBudWxsIHwgdW5kZWZpbmVkfSBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIGNoZWNrIHRocm91Z2guXG4gKiBAcGFyYW0geyh2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBrZXlvZiBULCBvYmplY3Q6IFQpID0+IHVua25vd259IGRvZXNNYXRjaCAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB2YWx1ZSwgaXRzIGtleSwgYW5kIHRoZSBvYmplY3QsIGFuZCByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIGlmIHRoZSBpdGVtIG1hdGNoZXMgdGhlIGNyaXRlcmlhLlxuICogQHJldHVybnMge2Jvb2xlYW59IC0gYHRydWVgIGlmIGV2ZXJ5IHByb3BlcnR5IHZhbHVlIG1hdGNoZXMgdGhlIHByZWRpY2F0ZSwgb3IgYGZhbHNlYCBpZiBhdCBsZWFzdCBvbmUgZG9lcyBub3QgbWF0Y2guXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFVzaW5nIGEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gKiBjb25zdCBvYmogPSB7IGE6IDEsIGI6IDIsIGM6IDMgfTtcbiAqIGNvbnN0IHJlc3VsdCA9IGV2ZXJ5KG9iaiwgKHZhbHVlKSA9PiB2YWx1ZSA+IDApO1xuICogY29uc29sZS5sb2cocmVzdWx0KTsgLy8gdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXZlcnk8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb2JqZWN0OiBUIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgZG9lc01hdGNoOiAodmFsdWU6IFRba2V5b2YgVF0sIGtleToga2V5b2YgVCwgb2JqZWN0OiBUKSA9PiB1bmtub3duXG4pOiBib29sZWFuO1xuXG4vKipcbiAqIENoZWNrcyBpZiBldmVyeSBpdGVtIGluIGFuIG9iamVjdCBtYXRjaGVzIHRoZSBnaXZlbiBwYXJ0aWFsIHZhbHVlLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1QgfCBudWxsIHwgdW5kZWZpbmVkfSBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIGNoZWNrIHRocm91Z2guXG4gKiBAcGFyYW0ge1BhcnRpYWw8VFtrZXlvZiBUXT59IGRvZXNNYXRjaCAtIEEgcGFydGlhbCB2YWx1ZSB0byBtYXRjaCBhZ2FpbnN0IHRoZSB2YWx1ZXMgb2YgdGhlIG9iamVjdC5cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIGB0cnVlYCBpZiBldmVyeSBwcm9wZXJ0eSB2YWx1ZSBtYXRjaGVzIHRoZSBwYXJ0aWFsIHZhbHVlLCBvciBgZmFsc2VgIGlmIGF0IGxlYXN0IG9uZSBkb2VzIG5vdCBtYXRjaC5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVXNpbmcgYSBwYXJ0aWFsIHZhbHVlXG4gKiBjb25zdCBvYmogPSB7IGE6IHsgaWQ6IDEsIG5hbWU6ICdBbGljZScgfSwgYjogeyBpZDogMiwgbmFtZTogJ0JvYicgfSB9O1xuICogY29uc3QgcmVzdWx0ID0gZXZlcnkob2JqLCB7IG5hbWU6ICdCb2InIH0pO1xuICogY29uc29sZS5sb2cocmVzdWx0KTsgLy8gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV2ZXJ5PFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIG9iamVjdDogVCB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGRvZXNNYXRjaDogUGFydGlhbDxUW2tleW9mIFRdPlxuKTogYm9vbGVhbjtcblxuLyoqXG4gKiBDaGVja3MgaWYgZXZlcnkgaXRlbSBpbiBhbiBvYmplY3QgbWF0Y2hlcyBhIHByb3BlcnR5IHdpdGggYSBzcGVjaWZpYyB2YWx1ZS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUIHwgbnVsbCB8IHVuZGVmaW5lZH0gb2JqZWN0IC0gVGhlIG9iamVjdCB0byBjaGVjayB0aHJvdWdoLlxuICogQHBhcmFtIHtba2V5b2YgVFtrZXlvZiBUXSwgdW5rbm93bl19IGRvZXNNYXRjaFByb3BlcnR5IC0gQW4gYXJyYXkgd2hlcmUgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdGhlIHByb3BlcnR5IGtleSBhbmQgdGhlIHNlY29uZCBlbGVtZW50IGlzIHRoZSB2YWx1ZSB0byBtYXRjaC5cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIGB0cnVlYCBpZiBldmVyeSBpdGVtIGhhcyB0aGUgc3BlY2lmaWVkIHByb3BlcnR5IHZhbHVlLCBvciBgZmFsc2VgIGlmIGF0IGxlYXN0IG9uZSBpdGVtIGRvZXMgbm90IG1hdGNoLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBVc2luZyBhIHByb3BlcnR5LXZhbHVlIHBhaXJcbiAqIGNvbnN0IG9iaiA9IHsgYWxpY2U6IHsgaWQ6IDEsIG5hbWU6ICdBbGljZScgfSwgYm9iOiB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9IH07XG4gKiBjb25zdCByZXN1bHQgPSBldmVyeShvYmosIFsnbmFtZScsICdBbGljZSddKTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdCk7IC8vIGZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBldmVyeTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvYmplY3Q6IFQgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBkb2VzTWF0Y2hQcm9wZXJ0eTogW2tleW9mIFRba2V5b2YgVF0sIHVua25vd25dXG4pOiBib29sZWFuO1xuXG4vKipcbiAqIENoZWNrcyBpZiBldmVyeSBpdGVtIGluIGFuIG9iamVjdCBoYXMgYSBzcGVjaWZpYyBwcm9wZXJ0eSwgd2hlcmUgdGhlIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgYXMgYSBQcm9wZXJ0eUtleS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUIHwgbnVsbCB8IHVuZGVmaW5lZH0gb2JqZWN0IC0gVGhlIG9iamVjdCB0byBjaGVjayB0aHJvdWdoLlxuICogQHBhcmFtIHtQcm9wZXJ0eUtleX0gcHJvcGVydHlUb0NoZWNrIC0gVGhlIHByb3BlcnR5IG5hbWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBgdHJ1ZWAgaWYgZXZlcnkgcHJvcGVydHkgdmFsdWUgaGFzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHksIG9yIGBmYWxzZWAgaWYgYXQgbGVhc3Qgb25lIGRvZXMgbm90IG1hdGNoLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBVc2luZyBhIHByb3BlcnR5IG5hbWVcbiAqIGNvbnN0IG9iaiA9IHsgYTogeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCBiOiB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9IH07XG4gKiBjb25zdCByZXN1bHQgPSBldmVyeShvYmosICduYW1lJyk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQpOyAvLyB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBldmVyeTxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvYmplY3Q6IFQgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBwcm9wZXJ0eVRvQ2hlY2s6IFByb3BlcnR5S2V5XG4pOiBib29sZWFuO1xuXG4vKipcbiAqIENoZWNrcyBpZiBldmVyeSBpdGVtIGluIGFuIG9iamVjdCBoYXMgYSBzcGVjaWZpYyBwcm9wZXJ0eSwgd2hlcmUgdGhlIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgYXMgYSBQcm9wZXJ0eUtleS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPyBUIDogbmV2ZXJ9IG9iamVjdCAtIFRoZSBvYmplY3QgdG8gY2hlY2sgdGhyb3VnaC5cbiAqIEBwYXJhbSB7QXJyYXlMaWtlPFQ+IHwgUmVjb3JkPGFueSwgYW55PiB8IG51bGwgfCB1bmRlZmluZWR9IHNvdXJjZSAtIFRoZSBzb3VyY2UgYXJyYXkgb3Igb2JqZWN0IHRvIGNoZWNrIHRocm91Z2guXG4gKiBAcGFyYW0geygoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgYXJyOiBhbnkpID0+IHVua25vd24pIHwgUGFydGlhbDxUPiB8IFtrZXlvZiBULCB1bmtub3duXSB8IFByb3BlcnR5S2V5fSBkb2VzTWF0Y2ggLSBUaGUgY3JpdGVyaWEgdG8gbWF0Y2guIEl0IGNhbiBiZSBhIGZ1bmN0aW9uLCBhIHBhcnRpYWwgb2JqZWN0LCBhIGtleS12YWx1ZSBwYWlyLCBvciBhIHByb3BlcnR5IG5hbWUuXG4gKiBAcGFyYW0ge1Byb3BlcnR5S2V5fSBwcm9wZXJ0eVRvQ2hlY2sgLSBUaGUgcHJvcGVydHkgbmFtZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7dW5rbm93bn0gZ3VhcmQgLSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLm1hcGAuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBgdHJ1ZWAgaWYgZXZlcnkgcHJvcGVydHkgdmFsdWUgaGFzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHksIG9yIGBmYWxzZWAgaWYgYXQgbGVhc3Qgb25lIGRvZXMgbm90IG1hdGNoLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBVc2luZyBhIHByb3BlcnR5IG5hbWVcbiAqIGNvbnN0IG9iaiA9IHsgYTogeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCBiOiB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9IH07XG4gKiBjb25zdCByZXN1bHQgPSBldmVyeShvYmosICduYW1lJyk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQpOyAvLyB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBldmVyeTxUPihcbiAgc291cmNlOiBBcnJheUxpa2U8VD4gfCBSZWNvcmQ8YW55LCBhbnk+IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgZG9lc01hdGNoPzogKChpdGVtOiBULCBpbmRleDogbnVtYmVyLCBhcnI6IGFueSkgPT4gdW5rbm93bikgfCBQYXJ0aWFsPFQ+IHwgW2tleW9mIFQsIHVua25vd25dIHwgUHJvcGVydHlLZXksXG4gIGd1YXJkPzogdW5rbm93blxuKTogYm9vbGVhbiB7XG4gIGlmICghc291cmNlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3QgdmFsdWVzID0gQXJyYXkuaXNBcnJheShzb3VyY2UpID8gc291cmNlIDogT2JqZWN0LnZhbHVlcyhzb3VyY2UpO1xuICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc291cmNlLCBkb2VzTWF0Y2gsIGd1YXJkKSkge1xuICAgIGRvZXNNYXRjaCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICghZG9lc01hdGNoKSB7XG4gICAgZG9lc01hdGNoID0gaWRlbnRpdHk7XG4gIH1cblxuICBzd2l0Y2ggKHR5cGVvZiBkb2VzTWF0Y2gpIHtcbiAgICBjYXNlICdmdW5jdGlvbic6IHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBzb3VyY2Vba2V5XTtcblxuICAgICAgICAgIGlmICghZG9lc01hdGNoKHZhbHVlIGFzIFQsIGtleSBhcyBudW1iZXIsIHNvdXJjZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlcy5ldmVyeShkb2VzTWF0Y2gpO1xuICAgIH1cbiAgICBjYXNlICdvYmplY3QnOiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShkb2VzTWF0Y2gpICYmIGRvZXNNYXRjaC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZG9lc01hdGNoWzBdO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGRvZXNNYXRjaFsxXTtcblxuICAgICAgICByZXR1cm4gdmFsdWVzLmV2ZXJ5KG1hdGNoZXNQcm9wZXJ0eShrZXksIHZhbHVlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWVzLmV2ZXJ5KG1hdGNoZXMoZG9lc01hdGNoKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzdHJpbmcnOiB7XG4gICAgICByZXR1cm4gdmFsdWVzLmV2ZXJ5KHByb3BlcnR5KGRvZXNNYXRjaCkpO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQVMsUUFBUSxRQUFRLDZCQUE2QjtBQUN0RCxTQUFTLGNBQWMsUUFBUSxpQ0FBaUM7QUFDaEUsU0FBUyxRQUFRLFFBQVEsd0JBQXdCO0FBQ2pELFNBQVMsT0FBTyxRQUFRLDBCQUEwQjtBQUNsRCxTQUFTLGVBQWUsUUFBUSxrQ0FBa0M7QUFtS2xFOzs7Ozs7Ozs7Ozs7Ozs7O0NBZ0JDLEdBQ0QsT0FBTyxTQUFTLE1BQ2QsTUFBMEQsRUFDMUQsU0FBMkcsRUFDM0csS0FBZTtFQUVmLElBQUksQ0FBQyxRQUFRO0lBQ1gsT0FBTztFQUNUO0VBQ0EsTUFBTSxTQUFTLE1BQU0sT0FBTyxDQUFDLFVBQVUsU0FBUyxPQUFPLE1BQU0sQ0FBQztFQUM5RCxJQUFJLFNBQVMsZUFBZSxRQUFRLFdBQVcsUUFBUTtJQUNyRCxZQUFZO0VBQ2Q7RUFFQSxJQUFJLENBQUMsV0FBVztJQUNkLFlBQVk7RUFDZDtFQUVBLE9BQVEsT0FBTztJQUNiLEtBQUs7TUFBWTtRQUNmLElBQUksQ0FBQyxNQUFNLE9BQU8sQ0FBQyxTQUFTO1VBQzFCLE1BQU0sT0FBTyxPQUFPLElBQUksQ0FBQztVQUV6QixJQUFLLElBQUksSUFBSSxHQUFHLElBQUksS0FBSyxNQUFNLEVBQUUsSUFBSztZQUNwQyxNQUFNLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDbkIsTUFBTSxRQUFRLE1BQU0sQ0FBQyxJQUFJO1lBRXpCLElBQUksQ0FBQyxVQUFVLE9BQVksS0FBZSxTQUFTO2NBQ2pELE9BQU87WUFDVDtVQUNGO1VBRUEsT0FBTztRQUNUO1FBRUEsT0FBTyxPQUFPLEtBQUssQ0FBQztNQUN0QjtJQUNBLEtBQUs7TUFBVTtRQUNiLElBQUksTUFBTSxPQUFPLENBQUMsY0FBYyxVQUFVLE1BQU0sS0FBSyxHQUFHO1VBQ3RELE1BQU0sTUFBTSxTQUFTLENBQUMsRUFBRTtVQUN4QixNQUFNLFFBQVEsU0FBUyxDQUFDLEVBQUU7VUFFMUIsT0FBTyxPQUFPLEtBQUssQ0FBQyxnQkFBZ0IsS0FBSztRQUMzQyxPQUFPO1VBQ0wsT0FBTyxPQUFPLEtBQUssQ0FBQyxRQUFRO1FBQzlCO01BQ0Y7SUFDQSxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7TUFBVTtRQUNiLE9BQU8sT0FBTyxLQUFLLENBQUMsU0FBUztNQUMvQjtFQUNGO0FBQ0YifQ==
// denoCacheMetadata=16763793857797835884,16044248140173235652