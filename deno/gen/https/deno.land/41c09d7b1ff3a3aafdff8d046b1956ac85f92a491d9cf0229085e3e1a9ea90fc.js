import { PacketType } from "../../socket.io-parser/mod.ts";
import { getLogger } from "../../../deps.ts";
/**
 * A {@link Client} can be associated with many multiplexed {@link Socket} that belong to different {@link Namespace}.
 */ export class Client {
  conn;
  server;
  handshake;
  decoder;
  sockets = new Map();
  connectTimerId;
  constructor(server, decoder, conn, req, connInfo){
    this.server = server;
    this.decoder = decoder;
    this.conn = conn;
    const url = new URL(req.url);
    this.handshake = {
      url: url.pathname,
      headers: req.headers,
      query: url.searchParams,
      address: connInfo.remoteAddr.hostname,
      secure: false,
      xdomain: req.headers.has("origin")
    };
    conn.on("message", (data)=>this.decoder.add(data));
    conn.on("close", (reason)=>this.onclose(reason));
    this.decoder.on("packet", (packet)=>this.onPacket(packet));
    this.decoder.on("error", ()=>this.onclose("parse error"));
    this.connectTimerId = setTimeout(()=>{
      if (this.sockets.size === 0) {
        getLogger("socket.io").debug("[client] no namespace joined yet, close the client");
        this.close();
      }
    }, this.server.opts.connectTimeout);
  }
  onPacket(packet) {
    const socket = this.sockets.get(packet.nsp);
    if (!socket && packet.type === PacketType.CONNECT) {
      this.connect(packet.nsp, packet.data);
    } else if (socket && packet.type !== PacketType.CONNECT && packet.type !== PacketType.CONNECT_ERROR) {
      socket._onpacket(packet);
    } else {
      getLogger("socket.io").debug(`[client] invalid state (packet type: ${packet.type})`);
      this.close();
    }
  }
  async connect(name, auth = {}) {
    if (this.server._nsps.has(name)) {
      getLogger("socket.io").debug(`[client] connecting to namespace ${name}`);
      return this.doConnect(name, auth);
    }
    try {
      await this.server._checkNamespace(name, auth);
    } catch (_) {
      getLogger("socket.io").debug(`[client] creation of namespace ${name} was denied`);
      this._packet({
        type: PacketType.CONNECT_ERROR,
        nsp: name,
        data: {
          message: "Invalid namespace"
        }
      });
      return;
    }
    getLogger("socket.io").debug(`[client] connecting to dynamic namespace ${name}`);
    this.doConnect(name, auth);
  }
  /**
   * Connects a client to a namespace.
   *
   * @param name - the namespace
   * @param {Object} auth - the auth parameters
   *
   * @private
   */ doConnect(name, auth) {
    const nsp = this.server.of(name);
    const now = new Date();
    const handshake = Object.assign({
      issued: now.getTime(),
      time: now.toISOString(),
      auth
    }, this.handshake);
    nsp._add(this, handshake, (socket)=>{
      this.sockets.set(name, socket);
      if (this.connectTimerId) {
        clearTimeout(this.connectTimerId);
        this.connectTimerId = undefined;
      }
    });
  }
  /**
   * Disconnects from all namespaces and closes transport.
   *
   * @private
   */ _disconnect() {
    for (const socket of this.sockets.values()){
      socket.disconnect();
    }
    this.sockets.clear();
    this.close();
  }
  /**
   * Removes a socket. Called by each `Socket`.
   *
   * @private
   */ _remove(socket) {
    this.sockets.delete(socket.id);
  }
  close() {
    if (this.conn.readyState === "open") {
      getLogger("socket.io").debug("[client] forcing transport close");
      this.conn.close();
      this.onclose("forced close");
    }
  }
  onclose(reason) {
    getLogger("socket.io").debug(`[client] client closed with reason ${reason}`);
    // ignore a potential subsequent `close` event
    this.conn.off();
    this.decoder.off();
    if (this.connectTimerId) {
      clearTimeout(this.connectTimerId);
      this.connectTimerId = undefined;
    }
    for (const socket of this.sockets.values()){
      socket._onclose(reason);
    }
    this.sockets.clear();
    this.decoder.destroy();
  }
  /**
   * Writes a packet to the transport.
   *
   * @param {Object} packet object
   * @param {Object} opts
   * @private
   */ /* private */ _packet(packet, opts = {}) {
    if (this.conn.readyState !== "open") {
      getLogger("socket.io").debug(`[client] ignoring packet write ${packet}`);
      return;
    }
    const encodedPackets = this.server._encoder.encode(packet);
    this._writeToEngine(encodedPackets, opts);
  }
  /* private */ _writeToEngine(encodedPackets, opts) {
    if (opts.volatile && !this.conn.transport.writable) {
      getLogger("socket.io").debug("[client] volatile packet is discarded since the transport is not currently writable");
      return;
    }
    for (const encodedPacket of encodedPackets){
      this.conn.send(encodedPacket);
    }
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvc29ja2V0X2lvQDAuMi4xL3BhY2thZ2VzL3NvY2tldC5pby9saWIvY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50c01hcCB9IGZyb20gXCIuLi8uLi9ldmVudC1lbWl0dGVyL21vZC50c1wiO1xuaW1wb3J0IHsgRGVjb2RlciwgUGFja2V0LCBQYWNrZXRUeXBlIH0gZnJvbSBcIi4uLy4uL3NvY2tldC5pby1wYXJzZXIvbW9kLnRzXCI7XG5pbXBvcnQgeyB0eXBlIFNvY2tldCBhcyBSYXdTb2NrZXQgfSBmcm9tIFwiLi4vLi4vZW5naW5lLmlvL21vZC50c1wiO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4uLy4uLy4uL2RlcHMudHNcIjtcbmltcG9ydCB7IEhhbmRzaGFrZSwgU29ja2V0IH0gZnJvbSBcIi4vc29ja2V0LnRzXCI7XG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tIFwiLi9zZXJ2ZXIudHNcIjtcbmltcG9ydCB7IFJhd0RhdGEgfSBmcm9tIFwiLi4vLi4vZW5naW5lLmlvLXBhcnNlci9tb2QudHNcIjtcbmltcG9ydCB7IENsb3NlUmVhc29uIH0gZnJvbSBcIi4uLy4uL2VuZ2luZS5pby9saWIvc29ja2V0LnRzXCI7XG5cbmludGVyZmFjZSBXcml0ZU9wdGlvbnMge1xuICB2b2xhdGlsZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQSB7QGxpbmsgQ2xpZW50fSBjYW4gYmUgYXNzb2NpYXRlZCB3aXRoIG1hbnkgbXVsdGlwbGV4ZWQge0BsaW5rIFNvY2tldH0gdGhhdCBiZWxvbmcgdG8gZGlmZmVyZW50IHtAbGluayBOYW1lc3BhY2V9LlxuICovXG5leHBvcnQgY2xhc3MgQ2xpZW50PFxuICBMaXN0ZW5FdmVudHMgZXh0ZW5kcyBFdmVudHNNYXAsXG4gIEVtaXRFdmVudHMgZXh0ZW5kcyBFdmVudHNNYXAsXG4gIFNlcnZlclNpZGVFdmVudHMgZXh0ZW5kcyBFdmVudHNNYXAsXG4gIFNvY2tldERhdGEgPSB1bmtub3duLFxuPiB7XG4gIHB1YmxpYyByZWFkb25seSBjb25uOiBSYXdTb2NrZXQ7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBzZXJ2ZXI6IFNlcnZlcjxcbiAgICBMaXN0ZW5FdmVudHMsXG4gICAgRW1pdEV2ZW50cyxcbiAgICBTZXJ2ZXJTaWRlRXZlbnRzLFxuICAgIFNvY2tldERhdGFcbiAgPjtcbiAgcHJpdmF0ZSByZWFkb25seSBoYW5kc2hha2U6IE9taXQ8SGFuZHNoYWtlLCBcImlzc3VlZFwiIHwgXCJ0aW1lXCIgfCBcImF1dGhcIj47XG4gIHByaXZhdGUgcmVhZG9ubHkgZGVjb2RlcjogRGVjb2RlcjtcblxuICBwcml2YXRlIHNvY2tldHMgPSBuZXcgTWFwPFxuICAgIHN0cmluZyxcbiAgICBTb2NrZXQ8TGlzdGVuRXZlbnRzLCBFbWl0RXZlbnRzLCBTZXJ2ZXJTaWRlRXZlbnRzLCBTb2NrZXREYXRhPlxuICA+KCk7XG5cbiAgcHJpdmF0ZSBjb25uZWN0VGltZXJJZD86IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBzZXJ2ZXI6IFNlcnZlcjxMaXN0ZW5FdmVudHMsIEVtaXRFdmVudHMsIFNlcnZlclNpZGVFdmVudHMsIFNvY2tldERhdGE+LFxuICAgIGRlY29kZXI6IERlY29kZXIsXG4gICAgY29ubjogUmF3U29ja2V0LFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICBjb25uSW5mbzogRGVuby5TZXJ2ZUhhbmRsZXJJbmZvLFxuICApIHtcbiAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcbiAgICB0aGlzLmRlY29kZXIgPSBkZWNvZGVyO1xuICAgIHRoaXMuY29ubiA9IGNvbm47XG5cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgIHRoaXMuaGFuZHNoYWtlID0ge1xuICAgICAgdXJsOiB1cmwucGF0aG5hbWUsXG4gICAgICBoZWFkZXJzOiByZXEuaGVhZGVycyxcbiAgICAgIHF1ZXJ5OiB1cmwuc2VhcmNoUGFyYW1zLFxuICAgICAgYWRkcmVzczogKGNvbm5JbmZvLnJlbW90ZUFkZHIgYXMgRGVuby5OZXRBZGRyKS5ob3N0bmFtZSxcbiAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICB4ZG9tYWluOiByZXEuaGVhZGVycy5oYXMoXCJvcmlnaW5cIiksXG4gICAgfTtcblxuICAgIGNvbm4ub24oXCJtZXNzYWdlXCIsIChkYXRhKSA9PiB0aGlzLmRlY29kZXIuYWRkKGRhdGEpKTtcbiAgICBjb25uLm9uKFwiY2xvc2VcIiwgKHJlYXNvbikgPT4gdGhpcy5vbmNsb3NlKHJlYXNvbikpO1xuXG4gICAgdGhpcy5kZWNvZGVyLm9uKFwicGFja2V0XCIsIChwYWNrZXQpID0+IHRoaXMub25QYWNrZXQocGFja2V0KSk7XG4gICAgdGhpcy5kZWNvZGVyLm9uKFwiZXJyb3JcIiwgKCkgPT4gdGhpcy5vbmNsb3NlKFwicGFyc2UgZXJyb3JcIikpO1xuXG4gICAgdGhpcy5jb25uZWN0VGltZXJJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc29ja2V0cy5zaXplID09PSAwKSB7XG4gICAgICAgIGdldExvZ2dlcihcInNvY2tldC5pb1wiKS5kZWJ1ZyhcbiAgICAgICAgICBcIltjbGllbnRdIG5vIG5hbWVzcGFjZSBqb2luZWQgeWV0LCBjbG9zZSB0aGUgY2xpZW50XCIsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzLnNlcnZlci5vcHRzLmNvbm5lY3RUaW1lb3V0KTtcbiAgfVxuXG4gIHByaXZhdGUgb25QYWNrZXQocGFja2V0OiBQYWNrZXQpIHtcbiAgICBjb25zdCBzb2NrZXQgPSB0aGlzLnNvY2tldHMuZ2V0KHBhY2tldC5uc3ApO1xuXG4gICAgaWYgKCFzb2NrZXQgJiYgcGFja2V0LnR5cGUgPT09IFBhY2tldFR5cGUuQ09OTkVDVCkge1xuICAgICAgdGhpcy5jb25uZWN0KHBhY2tldC5uc3AsIHBhY2tldC5kYXRhKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgc29ja2V0ICYmXG4gICAgICBwYWNrZXQudHlwZSAhPT0gUGFja2V0VHlwZS5DT05ORUNUICYmXG4gICAgICBwYWNrZXQudHlwZSAhPT0gUGFja2V0VHlwZS5DT05ORUNUX0VSUk9SXG4gICAgKSB7XG4gICAgICBzb2NrZXQuX29ucGFja2V0KHBhY2tldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdldExvZ2dlcihcInNvY2tldC5pb1wiKS5kZWJ1ZyhcbiAgICAgICAgYFtjbGllbnRdIGludmFsaWQgc3RhdGUgKHBhY2tldCB0eXBlOiAke3BhY2tldC50eXBlfSlgLFxuICAgICAgKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNvbm5lY3QobmFtZTogc3RyaW5nLCBhdXRoOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9KSB7XG4gICAgaWYgKHRoaXMuc2VydmVyLl9uc3BzLmhhcyhuYW1lKSkge1xuICAgICAgZ2V0TG9nZ2VyKFwic29ja2V0LmlvXCIpLmRlYnVnKGBbY2xpZW50XSBjb25uZWN0aW5nIHRvIG5hbWVzcGFjZSAke25hbWV9YCk7XG4gICAgICByZXR1cm4gdGhpcy5kb0Nvbm5lY3QobmFtZSwgYXV0aCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuc2VydmVyLl9jaGVja05hbWVzcGFjZShuYW1lLCBhdXRoKTtcbiAgICB9IGNhdGNoIChfKSB7XG4gICAgICBnZXRMb2dnZXIoXCJzb2NrZXQuaW9cIikuZGVidWcoXG4gICAgICAgIGBbY2xpZW50XSBjcmVhdGlvbiBvZiBuYW1lc3BhY2UgJHtuYW1lfSB3YXMgZGVuaWVkYCxcbiAgICAgICk7XG4gICAgICB0aGlzLl9wYWNrZXQoe1xuICAgICAgICB0eXBlOiBQYWNrZXRUeXBlLkNPTk5FQ1RfRVJST1IsXG4gICAgICAgIG5zcDogbmFtZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBuYW1lc3BhY2VcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGdldExvZ2dlcihcInNvY2tldC5pb1wiKS5kZWJ1ZyhcbiAgICAgIGBbY2xpZW50XSBjb25uZWN0aW5nIHRvIGR5bmFtaWMgbmFtZXNwYWNlICR7bmFtZX1gLFxuICAgICk7XG4gICAgdGhpcy5kb0Nvbm5lY3QobmFtZSwgYXV0aCk7XG4gIH1cblxuICAvKipcbiAgICogQ29ubmVjdHMgYSBjbGllbnQgdG8gYSBuYW1lc3BhY2UuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gdGhlIG5hbWVzcGFjZVxuICAgKiBAcGFyYW0ge09iamVjdH0gYXV0aCAtIHRoZSBhdXRoIHBhcmFtZXRlcnNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgZG9Db25uZWN0KG5hbWU6IHN0cmluZywgYXV0aDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiB2b2lkIHtcbiAgICBjb25zdCBuc3AgPSB0aGlzLnNlcnZlci5vZihuYW1lKTtcblxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgaGFuZHNoYWtlOiBIYW5kc2hha2UgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIGlzc3VlZDogbm93LmdldFRpbWUoKSxcbiAgICAgIHRpbWU6IG5vdy50b0lTT1N0cmluZygpLFxuICAgICAgYXV0aCxcbiAgICB9LCB0aGlzLmhhbmRzaGFrZSk7XG5cbiAgICBuc3AuX2FkZCh0aGlzLCBoYW5kc2hha2UsIChzb2NrZXQpID0+IHtcbiAgICAgIHRoaXMuc29ja2V0cy5zZXQobmFtZSwgc29ja2V0KTtcblxuICAgICAgaWYgKHRoaXMuY29ubmVjdFRpbWVySWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY29ubmVjdFRpbWVySWQpO1xuICAgICAgICB0aGlzLmNvbm5lY3RUaW1lcklkID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIGZyb20gYWxsIG5hbWVzcGFjZXMgYW5kIGNsb3NlcyB0cmFuc3BvcnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHNvY2tldCBvZiB0aGlzLnNvY2tldHMudmFsdWVzKCkpIHtcbiAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgfVxuICAgIHRoaXMuc29ja2V0cy5jbGVhcigpO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgc29ja2V0LiBDYWxsZWQgYnkgZWFjaCBgU29ja2V0YC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmUoXG4gICAgc29ja2V0OiBTb2NrZXQ8TGlzdGVuRXZlbnRzLCBFbWl0RXZlbnRzLCBTZXJ2ZXJTaWRlRXZlbnRzLCBTb2NrZXREYXRhPixcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5zb2NrZXRzLmRlbGV0ZShzb2NrZXQuaWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbG9zZSgpIHtcbiAgICBpZiAodGhpcy5jb25uLnJlYWR5U3RhdGUgPT09IFwib3BlblwiKSB7XG4gICAgICBnZXRMb2dnZXIoXCJzb2NrZXQuaW9cIikuZGVidWcoXCJbY2xpZW50XSBmb3JjaW5nIHRyYW5zcG9ydCBjbG9zZVwiKTtcbiAgICAgIHRoaXMuY29ubi5jbG9zZSgpO1xuICAgICAgdGhpcy5vbmNsb3NlKFwiZm9yY2VkIGNsb3NlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25jbG9zZShyZWFzb246IENsb3NlUmVhc29uKSB7XG4gICAgZ2V0TG9nZ2VyKFwic29ja2V0LmlvXCIpLmRlYnVnKFxuICAgICAgYFtjbGllbnRdIGNsaWVudCBjbG9zZWQgd2l0aCByZWFzb24gJHtyZWFzb259YCxcbiAgICApO1xuXG4gICAgLy8gaWdub3JlIGEgcG90ZW50aWFsIHN1YnNlcXVlbnQgYGNsb3NlYCBldmVudFxuICAgIHRoaXMuY29ubi5vZmYoKTtcbiAgICB0aGlzLmRlY29kZXIub2ZmKCk7XG5cbiAgICBpZiAodGhpcy5jb25uZWN0VGltZXJJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY29ubmVjdFRpbWVySWQpO1xuICAgICAgdGhpcy5jb25uZWN0VGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHNvY2tldCBvZiB0aGlzLnNvY2tldHMudmFsdWVzKCkpIHtcbiAgICAgIHNvY2tldC5fb25jbG9zZShyZWFzb24pO1xuICAgIH1cblxuICAgIHRoaXMuc29ja2V0cy5jbGVhcigpO1xuICAgIHRoaXMuZGVjb2Rlci5kZXN0cm95KCk7XG4gIH1cblxuICAvKipcbiAgICogV3JpdGVzIGEgcGFja2V0IHRvIHRoZSB0cmFuc3BvcnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYWNrZXQgb2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvKiBwcml2YXRlICovIF9wYWNrZXQocGFja2V0OiBQYWNrZXQsIG9wdHM6IFdyaXRlT3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHRoaXMuY29ubi5yZWFkeVN0YXRlICE9PSBcIm9wZW5cIikge1xuICAgICAgZ2V0TG9nZ2VyKFwic29ja2V0LmlvXCIpLmRlYnVnKGBbY2xpZW50XSBpZ25vcmluZyBwYWNrZXQgd3JpdGUgJHtwYWNrZXR9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVuY29kZWRQYWNrZXRzID0gdGhpcy5zZXJ2ZXIuX2VuY29kZXIuZW5jb2RlKHBhY2tldCk7XG4gICAgdGhpcy5fd3JpdGVUb0VuZ2luZShlbmNvZGVkUGFja2V0cywgb3B0cyk7XG4gIH1cblxuICAvKiBwcml2YXRlICovIF93cml0ZVRvRW5naW5lKFxuICAgIGVuY29kZWRQYWNrZXRzOiBSYXdEYXRhW10sXG4gICAgb3B0czogV3JpdGVPcHRpb25zLFxuICApIHtcbiAgICBpZiAob3B0cy52b2xhdGlsZSAmJiAhdGhpcy5jb25uLnRyYW5zcG9ydC53cml0YWJsZSkge1xuICAgICAgZ2V0TG9nZ2VyKFwic29ja2V0LmlvXCIpLmRlYnVnKFxuICAgICAgICBcIltjbGllbnRdIHZvbGF0aWxlIHBhY2tldCBpcyBkaXNjYXJkZWQgc2luY2UgdGhlIHRyYW5zcG9ydCBpcyBub3QgY3VycmVudGx5IHdyaXRhYmxlXCIsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGVuY29kZWRQYWNrZXQgb2YgZW5jb2RlZFBhY2tldHMpIHtcbiAgICAgIHRoaXMuY29ubi5zZW5kKGVuY29kZWRQYWNrZXQpO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLFNBQTBCLFVBQVUsUUFBUSxnQ0FBZ0M7QUFFNUUsU0FBUyxTQUFTLFFBQVEsbUJBQW1CO0FBVTdDOztDQUVDLEdBQ0QsT0FBTyxNQUFNO0VBTUssS0FBZ0I7RUFFZixPQUtmO0VBQ2UsVUFBdUQ7RUFDdkQsUUFBaUI7RUFFMUIsVUFBVSxJQUFJLE1BR2xCO0VBRUksZUFBd0I7RUFFaEMsWUFDRSxNQUFzRSxFQUN0RSxPQUFnQixFQUNoQixJQUFlLEVBQ2YsR0FBWSxFQUNaLFFBQStCLENBQy9CO0lBQ0EsSUFBSSxDQUFDLE1BQU0sR0FBRztJQUNkLElBQUksQ0FBQyxPQUFPLEdBQUc7SUFDZixJQUFJLENBQUMsSUFBSSxHQUFHO0lBRVosTUFBTSxNQUFNLElBQUksSUFBSSxJQUFJLEdBQUc7SUFDM0IsSUFBSSxDQUFDLFNBQVMsR0FBRztNQUNmLEtBQUssSUFBSSxRQUFRO01BQ2pCLFNBQVMsSUFBSSxPQUFPO01BQ3BCLE9BQU8sSUFBSSxZQUFZO01BQ3ZCLFNBQVMsQUFBQyxTQUFTLFVBQVUsQ0FBa0IsUUFBUTtNQUN2RCxRQUFRO01BQ1IsU0FBUyxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUM7SUFDM0I7SUFFQSxLQUFLLEVBQUUsQ0FBQyxXQUFXLENBQUMsT0FB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
// denoCacheMetadata=7669574644559308311,10953267057377784000