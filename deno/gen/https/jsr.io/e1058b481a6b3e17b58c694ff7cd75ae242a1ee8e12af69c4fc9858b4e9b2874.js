import { identity } from '../../function/identity.ts';
import { property } from '../object/property.ts';
import { isArray } from '../predicate/isArray.ts';
import { matches } from '../predicate/matches.ts';
import { matchesProperty } from '../predicate/matchesProperty.ts';
/**
 * Iterates over the collection and filters elements based on the given predicate.
 * If a function is provided, it is invoked for each element in the collection.
 *
 * @template T
 * @param {ArrayLike<T> | Record<any, any> | null | undefined} source - The array or object to iterate over.
 * @param {((item: T, index: number, arr: any) => unknown) | Partial<T> | [keyof T, unknown] | PropertyKey} [predicate=identity] - The function invoked per iteration.
 * @returns {T[]} - Returns a new array of filtered elements that satisfy the predicate.
 *
 * @example
 * filter([{ a: 1 }, { a: 2 }, { b: 1 }], 'a');
 * // => [{ a: 1 }, { a: 2 }]
 *
 * filter([{ a: 1 }, { a: 2 }, { b: 1 }], { b: 1 });
 * // => [{ b: 1 }]
 *
 * filter({ item1: { a: 0, b: true }, item2: { a: 1, b: true }, item3: { a: 2, b: false }}, { b: false })
 * // => [{ a: 2, b: false }]
 *
 * filter([{ a: 1 }, { a: 2 }, { a: 3 }], ['a', 2]);
 * // => [{ a: 2 }]
 */ export function filter(source, predicate) {
  if (!source) {
    return [];
  }
  if (!predicate) {
    predicate = identity;
  }
  const collection = isArray(source) ? source : Object.values(source);
  switch(typeof predicate){
    case 'function':
      {
        if (!Array.isArray(source)) {
          const result = [];
          const keys = Object.keys(source);
          for(let i = 0; i < keys.length; i++){
            const key = keys[i];
            const value = source[key];
            if (predicate(value, key, source)) {
              result.push(value);
            }
          }
          return result;
        }
        return collection.filter(predicate);
      }
    case 'object':
      {
        return isArray(predicate) ? collection.filter(matchesProperty(predicate[0], predicate[1])) : collection.filter(matches(predicate));
      }
    case 'symbol':
    case 'number':
    case 'string':
      {
        return collection.filter(property(predicate));
      }
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0Blcy10b29sa2l0L2VzLXRvb2xraXQvMS4zMy4wL3NyYy9jb21wYXQvYXJyYXkvZmlsdGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi4vLi4vZnVuY3Rpb24vaWRlbnRpdHkudHMnO1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICcuLi9vYmplY3QvcHJvcGVydHkudHMnO1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4uL3ByZWRpY2F0ZS9pc0FycmF5LnRzJztcbmltcG9ydCB7IG1hdGNoZXMgfSBmcm9tICcuLi9wcmVkaWNhdGUvbWF0Y2hlcy50cyc7XG5pbXBvcnQgeyBtYXRjaGVzUHJvcGVydHkgfSBmcm9tICcuLi9wcmVkaWNhdGUvbWF0Y2hlc1Byb3BlcnR5LnRzJztcblxuLyoqXG4gKiBGaWx0ZXJzIGl0ZW1zIGZyb20gYSBhcnJheSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBlbGVtZW50cy5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgLSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgYXJyOiBUW10pID0+IHVua25vd259IGRvZXNNYXRjaCAtIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7VFtdfSAtIFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBzYXRpc2Z5IHRoZSBnaXZlbiBkb2VzTWF0Y2ggZnVuY3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGZpbHRlcihbMSwgMiwgM10sIG4gPT4gbiAlIDIgPT09IDApXG4gKiAvLyA9PiBbMl1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUPihcbiAgYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLFxuICBkb2VzTWF0Y2g/OiAoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgYXJyOiByZWFkb25seSBUW10pID0+IHVua25vd25cbik6IFRbXTtcblxuLyoqXG4gKiBGaWx0ZXJzIGVsZW1lbnRzIGluIGEgYXJyIHRoYXQgbWF0Y2ggdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIHBhcnRpYWwgb2JqZWN0LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWR9IGFyciAtIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge1BhcnRpYWw8VD59IGRvZXNNYXRjaCAtIEEgcGFydGlhbCBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIHByb3BlcnRpZXMgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7VFtdfSAtIFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gcHJvcGVydGllcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgYXJyID0gW3sgaWQ6IDEsIG5hbWU6ICdBbGljZScgfSwgeyBpZDogMiwgbmFtZTogJ0JvYicgfV07XG4gKiBmaWx0ZXIoYXJyLCB7IG5hbWU6ICdCb2InIH0pO1xuICogLy8gPT4gW3sgaWQ6IDIsIG5hbWU6ICdCb2InIH1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4oYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLCBkb2VzTWF0Y2g6IFBhcnRpYWw8VD4pOiBUW107XG5cbi8qKlxuICogRmlsdGVycyBlbGVtZW50cyBpbiBhIGFyciB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXktdmFsdWUgcGFpci5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgLSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtba2V5b2YgVCwgdW5rbm93bl19IGRvZXNNYXRjaFByb3BlcnR5IC0gVGhlIGtleS12YWx1ZSBwYWlyIHRvIG1hdGNoLlxuICogQHJldHVybnMge1RbXX0gLSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS12YWx1ZSBwYWlyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBhcnIgPSBbeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9XTtcbiAqIGZpbHRlcihhcnIsIFsnbmFtZScsICdBbGljZSddKTtcbiAqIC8vID0+IFt7IGlkOiAxLCBuYW1lOiAnQWxpY2UnIH1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4oYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLCBkb2VzTWF0Y2hQcm9wZXJ0eTogW2tleW9mIFQsIHVua25vd25dKTogVFtdO1xuXG4vKipcbiAqIEZpbHRlcnMgdGhlIGFyciwgcmV0dXJuaW5nIGVsZW1lbnRzIHRoYXQgY29udGFpbiB0aGUgZ2l2ZW4gcHJvcGVydHkgbmFtZS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgLSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtQcm9wZXJ0eUtleX0gcHJvcGVydHlUb0NoZWNrIC0gVGhlIHByb3BlcnR5IG5hbWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7VFtdfSAtIFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gcHJvcGVydHkgbmFtZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgYXJyID0gW3sgaWQ6IDEsIG5hbWU6ICdBbGljZScgfSwgeyBpZDogMiwgbmFtZTogJ0JvYicgfSwgeyBpZDogMywgYWdlOiAyOCB9XTtcbiAqIGZpbHRlcihhcnIsICduYW1lJyk7XG4gKiAvLyA9PiBbeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9XVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyPFQ+KGFycjogQXJyYXlMaWtlPFQ+IHwgbnVsbCB8IHVuZGVmaW5lZCwgcHJvcGVydHlUb0NoZWNrOiBQcm9wZXJ0eUtleSk6IFRbXTtcblxuLyoqXG4gKiBGaWx0ZXJzIGl0ZW1zIGZyb20gYSBvYmplY3QgYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gcHJlZGljYXRlIGZ1bmN0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1QgfCBudWxsIHwgdW5kZWZpbmVkfSBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7KHZhbHVlOiBUW2tleW9mIFRdLCBrZXk6IGtleW9mIFQsIG9iamVjdDogVCkgPT4gdW5rbm93bn0gZG9lc01hdGNoIC0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtUW119IC0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlIGdpdmVuIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3Qgb2JqID0geyBpdGVtMTogeyBhOiAwIH0sIGl0ZW0yOiB7IGE6IDEgfSwgaXRlbTM6IHsgYTogMCB9IH1cbiAqIGZpbHRlcihvYmosIHZhbHVlID0+IHZhbHVlLmEpXG4gKiAvLyA9PiBbeyBhOiAxIH1dXG4gKlxuICogY29uc3Qgb2JqID0geyBhOiAxLCBiOiAyLCBjOiAzIH07XG4gKiBmaWx0ZXIob2JqLCB2YWx1ZSA9PiB2YWx1ZSA+IDIpXG4gKiAvLyA9PiBbM11cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvYmplY3Q6IFQgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBkb2VzTWF0Y2g6ICh2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBrZXlvZiBULCBvYmplY3Q6IFQpID0+IHVua25vd25cbik6IFRbXTtcblxuLyoqXG4gKiBGaWx0ZXJzIGVsZW1lbnRzIGluIGEgb2JqZWN0IHRoYXQgbWF0Y2ggdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIHBhcnRpYWwgb2JqZWN0LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1QgfCBudWxsIHwgdW5kZWZpbmVkfSBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7UGFydGlhbDxUW2tleW9mIFRdPn0gZG9lc01hdGNoIC0gVGhlIHBhcnRpYWwgb2JqZWN0IHRvIG1hdGNoXG4gKiBAcmV0dXJucyB7VFtdfSAtIFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gcHJvcGVydGllcy5wYWlyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBvYmogPSB7IGE6IHsgaWQ6IDEsIG5hbWU6ICdBbGljZScgfSwgYjogeyBpZDogMiwgbmFtZTogJ0JvYicgfSB9O1xuICogZmlsdGVyKG9iaiwgeyBuYW1lOiAnQm9iJyB9KTtcbiAqIC8vID0+IFt7IGlkOiAyLCBuYW1lOiAnQm9iJyB9XVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIG9iamVjdDogVCB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGRvZXNNYXRjaDogUGFydGlhbDxUW2tleW9mIFRdPlxuKTogVFtdO1xuXG4vKipcbiAqIEZpbHRlcnMgZWxlbWVudHMgaW4gYSBhcnIgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4ga2V5LXZhbHVlIHBhaXIuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7VCB8IG51bGwgfCB1bmRlZmluZWR9IG9iamVjdCAtIFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtba2V5b2YgVFtrZXlvZiBUXSwgdW5rbm93bl19IGRvZXNNYXRjaFByb3BlcnR5IC0gVGhlIGtleS12YWx1ZSBwYWlyIHRvIG1hdGNoLlxuICogQHJldHVybnMge1RbXX0gLSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS12YWx1ZSBwYWlyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBvYmogPSB7IGFsaWNlOiB7IGlkOiAxLCBuYW1lOiAnQWxpY2UnIH0sIGJvYjogeyBpZDogMiwgbmFtZTogJ0JvYicgfSB9O1xuICogZmlsdGVyKG9iaiwgWyduYW1lJywgJ0FsaWNlJ10pO1xuICogLy8gPT4gW3sgaWQ6IDEsIG5hbWU6ICdBbGljZScgfV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvYmplY3Q6IFQgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBkb2VzTWF0Y2hQcm9wZXJ0eTogW2tleW9mIFRba2V5b2YgVF0sIHVua25vd25dXG4pOiBUW107XG5cbi8qKlxuICogRmlsdGVycyB0aGUgb2JqZWN0LCByZXR1cm5pbmcgZWxlbWVudHMgdGhhdCBjb250YWluIHRoZSBnaXZlbiBwcm9wZXJ0eSBuYW1lLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1QgfCBudWxsIHwgdW5kZWZpbmVkfSBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7UHJvcGVydHlLZXl9IHByb3BlcnR5VG9DaGVjayAtIFRoZSBwcm9wZXJ0eSBuYW1lIHRvIGNoZWNrLlxuICogQHJldHVybnMge1RbXX0gLSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIHByb3BlcnR5IG5hbWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IG9iaiA9IHsgYTogeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCBiOiB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9LCBjOiB7IGlkOiAzLCBhZ2U6IDI4IH0gfTtcbiAqIGZpbHRlcihvYmosICduYW1lJyk7XG4gKiAvLyA9PiBbeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9XVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIG9iamVjdDogVCB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHByb3BlcnR5VG9DaGVjazogUHJvcGVydHlLZXlcbik6IFRbXTtcblxuLyoqXG4gKiBJdGVyYXRlcyBvdmVyIHRoZSBjb2xsZWN0aW9uIGFuZCBmaWx0ZXJzIGVsZW1lbnRzIGJhc2VkIG9uIHRoZSBnaXZlbiBwcmVkaWNhdGUuXG4gKiBJZiBhIGZ1bmN0aW9uIGlzIHByb3ZpZGVkLCBpdCBpcyBpbnZva2VkIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7QXJyYXlMaWtlPFQ+IHwgUmVjb3JkPGFueSwgYW55PiB8IG51bGwgfCB1bmRlZmluZWR9IHNvdXJjZSAtIFRoZSBhcnJheSBvciBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoKGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycjogYW55KSA9PiB1bmtub3duKSB8IFBhcnRpYWw8VD4gfCBba2V5b2YgVCwgdW5rbm93bl0gfCBQcm9wZXJ0eUtleX0gW3ByZWRpY2F0ZT1pZGVudGl0eV0gLSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge1RbXX0gLSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGUgcHJlZGljYXRlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBmaWx0ZXIoW3sgYTogMSB9LCB7IGE6IDIgfSwgeyBiOiAxIH1dLCAnYScpO1xuICogLy8gPT4gW3sgYTogMSB9LCB7IGE6IDIgfV1cbiAqXG4gKiBmaWx0ZXIoW3sgYTogMSB9LCB7IGE6IDIgfSwgeyBiOiAxIH1dLCB7IGI6IDEgfSk7XG4gKiAvLyA9PiBbeyBiOiAxIH1dXG4gKlxuICogZmlsdGVyKHsgaXRlbTE6IHsgYTogMCwgYjogdHJ1ZSB9LCBpdGVtMjogeyBhOiAxLCBiOiB0cnVlIH0sIGl0ZW0zOiB7IGE6IDIsIGI6IGZhbHNlIH19LCB7IGI6IGZhbHNlIH0pXG4gKiAvLyA9PiBbeyBhOiAyLCBiOiBmYWxzZSB9XVxuICpcbiAqIGZpbHRlcihbeyBhOiAxIH0sIHsgYTogMiB9LCB7IGE6IDMgfV0sIFsnYScsIDJdKTtcbiAqIC8vID0+IFt7IGE6IDIgfV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUPihcbiAgc291cmNlOiBBcnJheUxpa2U8VD4gfCBSZWNvcmQ8YW55LCBhbnk+IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcHJlZGljYXRlPzogKChpdGVtOiBULCBpbmRleDogbnVtYmVyLCBhcnI6IGFueSkgPT4gdW5rbm93bikgfCBQYXJ0aWFsPFQ+IHwgW2tleW9mIFQsIHVua25vd25dIHwgUHJvcGVydHlLZXlcbik6IFRbXSB7XG4gIGlmICghc291cmNlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGlmICghcHJlZGljYXRlKSB7XG4gICAgcHJlZGljYXRlID0gaWRlbnRpdHk7XG4gIH1cblxuICBjb25zdCBjb2xsZWN0aW9uID0gaXNBcnJheShzb3VyY2UpID8gc291cmNlIDogT2JqZWN0LnZhbHVlcyhzb3VyY2UpO1xuXG4gIHN3aXRjaCAodHlwZW9mIHByZWRpY2F0ZSkge1xuICAgIGNhc2UgJ2Z1bmN0aW9uJzoge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0OiBUW10gPSBbXTtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSkgYXMgQXJyYXk8a2V5b2YgVD47XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNvdXJjZVtrZXldIGFzIFQ7XG5cbiAgICAgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBrZXkgYXMgbnVtYmVyLCBzb3VyY2UpKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbGxlY3Rpb24uZmlsdGVyKHByZWRpY2F0ZSk7XG4gICAgfVxuICAgIGNhc2UgJ29iamVjdCc6IHtcbiAgICAgIHJldHVybiBpc0FycmF5KHByZWRpY2F0ZSlcbiAgICAgICAgPyBjb2xsZWN0aW9uLmZpbHRlcihtYXRjaGVzUHJvcGVydHkocHJlZGljYXRlWzBdLCBwcmVkaWNhdGVbMV0pKVxuICAgICAgICA6IGNvbGxlY3Rpb24uZmlsdGVyKG1hdGNoZXMocHJlZGljYXRlKSk7XG4gICAgfVxuICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzdHJpbmcnOiB7XG4gICAgICByZXR1cm4gY29sbGVjdGlvbi5maWx0ZXIocHJvcGVydHkocHJlZGljYXRlKSk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxRQUFRLFFBQVEsNkJBQTZCO0FBQ3RELFNBQVMsUUFBUSxRQUFRLHdCQUF3QjtBQUNqRCxTQUFTLE9BQU8sUUFBUSwwQkFBMEI7QUFDbEQsU0FBUyxPQUFPLFFBQVEsMEJBQTBCO0FBQ2xELFNBQVMsZUFBZSxRQUFRLGtDQUFrQztBQTRJbEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXFCQyxHQUNELE9BQU8sU0FBUyxPQUNkLE1BQTBELEVBQzFELFNBQTJHO0VBRTNHLElBQUksQ0FBQyxRQUFRO0lBQ1gsT0FBTyxFQUFFO0VBQ1g7RUFDQSxJQUFJLENBQUMsV0FBVztJQUNkLFlBQVk7RUFDZDtFQUVBLE1BQU0sYUFBYSxRQUFRLFVBQVUsU0FBUyxPQUFPLE1BQU0sQ0FBQztFQUU1RCxPQUFRLE9BQU87SUFDYixLQUFLO01BQVk7UUFDZixJQUFJLENBQUMsTUFBTSxPQUFPLENBQUMsU0FBUztVQUMxQixNQUFNLFNBQWMsRUFBRTtVQUN0QixNQUFNLE9BQU8sT0FBTyxJQUFJLENBQUM7VUFFekIsSUFBSyxJQUFJLElBQUksR0FBRyxJQUFJLEtBQUssTUFBTSxFQUFFLElBQUs7WUFDcEMsTUFBTSxNQUFNLElBQUksQ0FBQyxFQUFFO1lBQ25CLE1BQU0sUUFBUSxNQUFNLENBQUMsSUFBSTtZQUV6QixJQUFJLFVBQVUsT0FBTyxLQUFlLFNBQVM7Y0FDM0MsT0FBTyxJQUFJLENBQUM7WUFDZDtVQUNGO1VBRUEsT0FBTztRQUNUO1FBRUEsT0FBTyxXQUFXLE1BQU0sQ0FBQztNQUMzQjtJQUNBLEtBQUs7TUFBVTtRQUNiLE9BQU8sUUFBUSxhQUNYLFdBQVcsTUFBTSxDQUFDLGdCQUFnQixTQUFTLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxFQUFFLEtBQzVELFdBQVcsTUFBTSxDQUFDLFFBQVE7TUFDaEM7SUFDQSxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7TUFBVTtRQUNiLE9BQU8sV0FBVyxNQUFNLENBQUMsU0FBUztNQUNwQztFQUNGO0FBQ0YifQ==
// denoCacheMetadata=7583505639632609182,12430589170428815037