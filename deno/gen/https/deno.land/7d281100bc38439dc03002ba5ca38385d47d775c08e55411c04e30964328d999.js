import { InvalidStateError } from "./errors.ts";
import { readArrayReplyBody } from "./protocol/mod.ts";
import { decoder } from "./protocol/_util.ts";
class RedisSubscriptionImpl {
  executor;
  get isConnected() {
    return this.executor.connection.isConnected;
  }
  get isClosed() {
    return this.executor.connection.isClosed;
  }
  channels;
  patterns;
  constructor(executor){
    this.executor = executor;
    this.channels = Object.create(null);
    this.patterns = Object.create(null);
  }
  async psubscribe(...patterns) {
    await this.executor.exec("PSUBSCRIBE", ...patterns);
    for (const pat of patterns){
      this.patterns[pat] = true;
    }
  }
  async punsubscribe(...patterns) {
    await this.executor.exec("PUNSUBSCRIBE", ...patterns);
    for (const pat of patterns){
      delete this.patterns[pat];
    }
  }
  async subscribe(...channels) {
    await this.executor.exec("SUBSCRIBE", ...channels);
    for (const chan of channels){
      this.channels[chan] = true;
    }
  }
  async unsubscribe(...channels) {
    await this.executor.exec("UNSUBSCRIBE", ...channels);
    for (const chan of channels){
      delete this.channels[chan];
    }
  }
  receive() {
    return this.#_receive();
  }
  receiveBinary() {
    return this.#_receive(true);
  }
  async *#_receive(binary = false) {
    let forceReconnect = false;
    const connection = this.executor.connection;
    while(this.isConnected){
      try {
        let rep;
        try {
          rep = await readArrayReplyBody(connection.reader);
        } catch (err) {
          if (err instanceof Deno.errors.BadResource) {
            // Connection already closed.
            connection.close();
            break;
          }
          throw err;
        }
        const ev = rep[0];
        if (ev === "message" && rep.length === 3) {
          yield {
            channel: rep[1],
            message: binary ? rep[2] : decoder.decode(rep[2])
          };
        } else if (ev === "pmessage" && rep.length === 4) {
          yield {
            pattern: rep[1],
            channel: rep[2],
            message: binary ? rep[3] : decoder.decode(rep[3])
          };
        }
      } catch (error) {
        if (error instanceof InvalidStateError || error instanceof Deno.errors.BadResource) {
          forceReconnect = true;
        } else throw error;
      } finally{
        if (!this.isClosed && !this.isConnected || forceReconnect) {
          await connection.reconnect();
          forceReconnect = false;
          if (Object.keys(this.channels).length > 0) {
            await this.subscribe(...Object.keys(this.channels));
          }
          if (Object.keys(this.patterns).length > 0) {
            await this.psubscribe(...Object.keys(this.patterns));
          }
        }
      }
    }
  }
  close() {
    this.executor.connection.close();
  }
}
export async function subscribe(executor, ...channels) {
  const sub = new RedisSubscriptionImpl(executor);
  await sub.subscribe(...channels);
  return sub;
}
export async function psubscribe(executor, ...patterns) {
  const sub = new RedisSubscriptionImpl(executor);
  await sub.psubscribe(...patterns);
  return sub;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvc29ja2V0X2lvQDAuMi4xL3ZlbmRvci9kZW5vLmxhbmQveC9yZWRpc0B2MC4yNy4xL3B1YnN1Yi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENvbW1hbmRFeGVjdXRvciB9IGZyb20gXCIuL2V4ZWN1dG9yLnRzXCI7XG5pbXBvcnQgeyBJbnZhbGlkU3RhdGVFcnJvciB9IGZyb20gXCIuL2Vycm9ycy50c1wiO1xuaW1wb3J0IHsgcmVhZEFycmF5UmVwbHlCb2R5IH0gZnJvbSBcIi4vcHJvdG9jb2wvbW9kLnRzXCI7XG5pbXBvcnQgeyBkZWNvZGVyIH0gZnJvbSBcIi4vcHJvdG9jb2wvX3V0aWwudHNcIjtcblxudHlwZSBEZWZhdWx0TWVzc2FnZVR5cGUgPSBzdHJpbmc7XG50eXBlIFZhbGlkTWVzc2FnZVR5cGUgPSBzdHJpbmcgfCBzdHJpbmdbXSB8IFVpbnQ4QXJyYXk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVkaXNTdWJzY3JpcHRpb248XG4gIFRNZXNzYWdlIGV4dGVuZHMgVmFsaWRNZXNzYWdlVHlwZSA9IERlZmF1bHRNZXNzYWdlVHlwZSxcbj4ge1xuICByZWFkb25seSBpc0Nsb3NlZDogYm9vbGVhbjtcbiAgcmVjZWl2ZSgpOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8UmVkaXNQdWJTdWJNZXNzYWdlPFRNZXNzYWdlPj47XG4gIHJlY2VpdmVCaW5hcnkoKTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFJlZGlzUHViU3ViTWVzc2FnZTxUTWVzc2FnZT4+O1xuICBwc3Vic2NyaWJlKC4uLnBhdHRlcm5zOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD47XG4gIHN1YnNjcmliZSguLi5jaGFubmVsczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+O1xuICBwdW5zdWJzY3JpYmUoLi4ucGF0dGVybnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPjtcbiAgdW5zdWJzY3JpYmUoLi4uY2hhbm5lbHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPjtcbiAgY2xvc2UoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWRpc1B1YlN1Yk1lc3NhZ2U8VE1lc3NhZ2UgPSBEZWZhdWx0TWVzc2FnZVR5cGU+IHtcbiAgcGF0dGVybj86IHN0cmluZztcbiAgY2hhbm5lbDogc3RyaW5nO1xuICBtZXNzYWdlOiBUTWVzc2FnZTtcbn1cblxuY2xhc3MgUmVkaXNTdWJzY3JpcHRpb25JbXBsPFxuICBUTWVzc2FnZSBleHRlbmRzIFZhbGlkTWVzc2FnZVR5cGUgPSBEZWZhdWx0TWVzc2FnZVR5cGUsXG4+IGltcGxlbWVudHMgUmVkaXNTdWJzY3JpcHRpb248VE1lc3NhZ2U+IHtcbiAgZ2V0IGlzQ29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmV4ZWN1dG9yLmNvbm5lY3Rpb24uaXNDb25uZWN0ZWQ7XG4gIH1cblxuICBnZXQgaXNDbG9zZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXhlY3V0b3IuY29ubmVjdGlvbi5pc0Nsb3NlZDtcbiAgfVxuXG4gIHByaXZhdGUgY2hhbm5lbHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBwcml2YXRlIHBhdHRlcm5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGV4ZWN1dG9yOiBDb21tYW5kRXhlY3V0b3IpIHt9XG5cbiAgYXN5bmMgcHN1YnNjcmliZSguLi5wYXR0ZXJuczogc3RyaW5nW10pIHtcbiAgICBhd2FpdCB0aGlzLmV4ZWN1dG9yLmV4ZWMoXCJQU1VCU0NSSUJFXCIsIC4uLnBhdHRlcm5zKTtcbiAgICBmb3IgKGNvbnN0IHBhdCBvZiBwYXR0ZXJucykge1xuICAgICAgdGhpcy5wYXR0ZXJuc1twYXRdID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwdW5zdWJzY3JpYmUoLi4ucGF0dGVybnM6IHN0cmluZ1tdKSB7XG4gICAgYXdhaXQgdGhpcy5leGVjdXRvci5leGVjKFwiUFVOU1VCU0NSSUJFXCIsIC4uLnBhdHRlcm5zKTtcbiAgICBmb3IgKGNvbnN0IHBhdCBvZiBwYXR0ZXJucykge1xuICAgICAgZGVsZXRlIHRoaXMucGF0dGVybnNbcGF0XTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzdWJzY3JpYmUoLi4uY2hhbm5lbHM6IHN0cmluZ1tdKSB7XG4gICAgYXdhaXQgdGhpcy5leGVjdXRvci5leGVjKFwiU1VCU0NSSUJFXCIsIC4uLmNoYW5uZWxzKTtcbiAgICBmb3IgKGNvbnN0IGNoYW4gb2YgY2hhbm5lbHMpIHtcbiAgICAgIHRoaXMuY2hhbm5lbHNbY2hhbl0gPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVuc3Vic2NyaWJlKC4uLmNoYW5uZWxzOiBzdHJpbmdbXSkge1xuICAgIGF3YWl0IHRoaXMuZXhlY3V0b3IuZXhlYyhcIlVOU1VCU0NSSUJFXCIsIC4uLmNoYW5uZWxzKTtcbiAgICBmb3IgKGNvbnN0IGNoYW4gb2YgY2hhbm5lbHMpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmNoYW5uZWxzW2NoYW5dO1xuICAgIH1cbiAgfVxuXG4gIHJlY2VpdmUoKTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFJlZGlzUHViU3ViTWVzc2FnZTxUTWVzc2FnZT4+IHtcbiAgICByZXR1cm4gdGhpcy4jX3JlY2VpdmUoKTtcbiAgfVxuXG4gIHJlY2VpdmVCaW5hcnkoKTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFJlZGlzUHViU3ViTWVzc2FnZTxUTWVzc2FnZT4+IHtcbiAgICByZXR1cm4gdGhpcy4jX3JlY2VpdmUodHJ1ZSk7XG4gIH1cblxuICBhc3luYyAqI19yZWNlaXZlKFxuICAgIGJpbmFyeSA9IGZhbHNlLFxuICApOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8UmVkaXNQdWJTdWJNZXNzYWdlPFRNZXNzYWdlPj4ge1xuICAgIGxldCBmb3JjZVJlY29ubmVjdCA9IGZhbHNlO1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB0aGlzLmV4ZWN1dG9yLmNvbm5lY3Rpb247XG4gICAgd2hpbGUgKHRoaXMuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxldCByZXA6IFtzdHJpbmcsIHN0cmluZywgVWludDhBcnJheV0gfCBbXG4gICAgICAgICAgc3RyaW5nLFxuICAgICAgICAgIHN0cmluZyxcbiAgICAgICAgICBzdHJpbmcsXG4gICAgICAgICAgVWludDhBcnJheSxcbiAgICAgICAgXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXAgPSAoYXdhaXQgcmVhZEFycmF5UmVwbHlCb2R5KGNvbm5lY3Rpb24ucmVhZGVyKSkgYXMgW1xuICAgICAgICAgICAgc3RyaW5nLFxuICAgICAgICAgICAgc3RyaW5nLFxuICAgICAgICAgICAgVWludDhBcnJheSxcbiAgICAgICAgICBdIHwgW3N0cmluZywgc3RyaW5nLCBzdHJpbmcsIFVpbnQ4QXJyYXldO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRGVuby5lcnJvcnMuQmFkUmVzb3VyY2UpIHtcbiAgICAgICAgICAgIC8vIENvbm5lY3Rpb24gYWxyZWFkeSBjbG9zZWQuXG4gICAgICAgICAgICBjb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ID0gcmVwWzBdO1xuXG4gICAgICAgIGlmIChldiA9PT0gXCJtZXNzYWdlXCIgJiYgcmVwLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgIGNoYW5uZWw6IHJlcFsxXSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IChiaW5hcnkgPyByZXBbMl0gOiBkZWNvZGVyLmRlY29kZShyZXBbMl0pKSBhcyBUTWVzc2FnZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKGV2ID09PSBcInBtZXNzYWdlXCIgJiYgcmVwLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgIHBhdHRlcm46IHJlcFsxXSxcbiAgICAgICAgICAgIGNoYW5uZWw6IHJlcFsyXSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IChiaW5hcnkgPyByZXBbM10gOiBkZWNvZGVyLmRlY29kZShyZXBbM10pKSBhcyBUTWVzc2FnZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBJbnZhbGlkU3RhdGVFcnJvciB8fFxuICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRGVuby5lcnJvcnMuQmFkUmVzb3VyY2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgZm9yY2VSZWNvbm5lY3QgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgdGhyb3cgZXJyb3I7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoKCF0aGlzLmlzQ2xvc2VkICYmICF0aGlzLmlzQ29ubmVjdGVkKSB8fCBmb3JjZVJlY29ubmVjdCkge1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucmVjb25uZWN0KCk7XG4gICAgICAgICAgZm9yY2VSZWNvbm5lY3QgPSBmYWxzZTtcblxuICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmNoYW5uZWxzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN1YnNjcmliZSguLi5PYmplY3Qua2V5cyh0aGlzLmNoYW5uZWxzKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnBhdHRlcm5zKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBzdWJzY3JpYmUoLi4uT2JqZWN0LmtleXModGhpcy5wYXR0ZXJucykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuZXhlY3V0b3IuY29ubmVjdGlvbi5jbG9zZSgpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdWJzY3JpYmU8XG4gIFRNZXNzYWdlIGV4dGVuZHMgVmFsaWRNZXNzYWdlVHlwZSA9IERlZmF1bHRNZXNzYWdlVHlwZSxcbj4oXG4gIGV4ZWN1dG9yOiBDb21tYW5kRXhlY3V0b3IsXG4gIC4uLmNoYW5uZWxzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxSZWRpc1N1YnNjcmlwdGlvbjxUTWVzc2FnZT4+IHtcbiAgY29uc3Qgc3ViID0gbmV3IFJlZGlzU3Vic2NyaXB0aW9uSW1wbDxUTWVzc2FnZT4oZXhlY3V0b3IpO1xuICBhd2FpdCBzdWIuc3Vic2NyaWJlKC4uLmNoYW5uZWxzKTtcbiAgcmV0dXJuIHN1Yjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBzdWJzY3JpYmU8XG4gIFRNZXNzYWdlIGV4dGVuZHMgVmFsaWRNZXNzYWdlVHlwZSA9IERlZmF1bHRNZXNzYWdlVHlwZSxcbj4oXG4gIGV4ZWN1dG9yOiBDb21tYW5kRXhlY3V0b3IsXG4gIC4uLnBhdHRlcm5zOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxSZWRpc1N1YnNjcmlwdGlvbjxUTWVzc2FnZT4+IHtcbiAgY29uc3Qgc3ViID0gbmV3IFJlZGlzU3Vic2NyaXB0aW9uSW1wbDxUTWVzc2FnZT4oZXhlY3V0b3IpO1xuICBhd2FpdCBzdWIucHN1YnNjcmliZSguLi5wYXR0ZXJucyk7XG4gIHJldHVybiBzdWI7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBUyxpQkFBaUIsUUFBUSxjQUFjO0FBQ2hELFNBQVMsa0JBQWtCLFFBQVEsb0JBQW9CO0FBQ3ZELFNBQVMsT0FBTyxRQUFRLHNCQUFzQjtBQXdCOUMsTUFBTTs7RUFHSixJQUFJLGNBQXVCO0lBQ3pCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsV0FBVztFQUM3QztFQUVBLElBQUksV0FBb0I7SUFDdEIsT0FBTyxJQUFJLENBQUMsUUFBUSxD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
// denoCacheMetadata=353764401278456130,4714592673048297103