<app-score #scoreView [playerScores]="playerScore$ | async"></app-score>

<div class="mat-tab-content">
  @let setAsideMat = setAsideMat$ | async;
  @if (setAsideMat) {
    <app-mat
      [mat]="setAsideMat"
      (click)="visibleMat = setAsideMat; stickyMat = true"
      (mouseenter)="visibleMat = setAsideMat; stickyMat = true"
      (mouseleave)="visibleMat = null; stickyMat = false">
    </app-mat>
  }
  @for (mat of selfMats$ | async; track mat.mat) {
    <app-mat
      [mat]="mat"
      (click)="visibleMat === mat ? stickyMat = !stickyMat : visibleMat = mat"
      (mouseenter)="!stickyMat ? visibleMat = mat : null"
      (mouseleave)="!stickyMat ? visibleMat = null : null">
    </app-mat>
  }
</div>

<app-game-log [entries]="logEntries$ | async"></app-game-log>

@if (visibleMat) {
  <div class="mat-modal-backdrop">
    <div class="mat-modal-content">
      <div class="mat-modal-title">{{ visibleMat.mat }}</div>
      <div class="card-content">
        @for (card of visibleMat.cardIds; track card) {
          <app-card [cardId]="card"></app-card>
        }
      </div>
      <div
        class="close-button"
        (mousedown)="visibleMat = null; stickyMat = false"
      >X
      </div>
    </div>
  </div>
}
