import { identity } from '../../function/identity.ts';
import { property } from '../object/property.ts';
import { matches } from '../predicate/matches.ts';
import { matchesProperty } from '../predicate/matchesProperty.ts';
/**
 * Checks if there is an element in an array that matches the given predicate.
 *
 * Iteration is stopped once there is an element that matches `predicate`.
 *
 * @template T
 * @param {ArrayLike<T> | Record<string, any> | null | undefined} source The source to iterate over.
 * @param {((item: T, index: number, arr: any) => unknown) | Partial<T> | [keyof T, unknown] | PropertyKey} [predicate=identity] The function invoked per iteration.
 * If a property name or an object is provided it will be used to create a predicate function.
 * @returns {boolean} Returns `true` if any element passes the predicate check, else `false`.
 *
 * @example
 * some([1, 2, 3, 4], n => n % 2 === 0);
 * // => true
 *
 * some([{ a: 1 }, { a: 2 }, { a: 3 }], { a: 2 });
 * // => true
 *
 * some([{ a: 1 }, { a: 2 }, { a: 3 }], ['a', 2]);
 * // => true
 *
 * some([{ a: 1 }, { a: 2 }, { a: 3 }], 'a');
 * // => true
 *
 * some({ a: 1, b: 2, c: 3 }, n => n % 2 === 0);
 * // => true
 *
 * some({ a: { id: 1, name: 'Alice' }, b: { id: 2, name: 'Bob' } }, { name: 'Bob' });
 * // => true
 *
 * some({ a: { id: 1, name: 'Alice' }, b: { id: 2, name: 'Bob' } }, ['name', 'Alice']);
 * // => true
 *
 * some({ a: { id: 1, name: 'Alice' }, b: { id: 2, name: 'Bob' } }, 'name');
 * // => true
 */ export function some(source, predicate, guard) {
  if (!source) {
    return false;
  }
  if (guard != null) {
    predicate = undefined;
  }
  if (!predicate) {
    predicate = identity;
  }
  const values = Array.isArray(source) ? source : Object.values(source);
  switch(typeof predicate){
    case 'function':
      {
        if (!Array.isArray(source)) {
          const keys = Object.keys(source);
          for(let i = 0; i < keys.length; i++){
            const key = keys[i];
            const value = source[key];
            if (predicate(value, key, source)) {
              return true;
            }
          }
          return false;
        }
        return values.some(predicate);
      }
    case 'object':
      {
        if (Array.isArray(predicate) && predicate.length === 2) {
          const key = predicate[0];
          const value = predicate[1];
          return values.some(matchesProperty(key, value));
        } else {
          return values.some(matches(predicate));
        }
      }
    case 'number':
    case 'symbol':
    case 'string':
      {
        return values.some(property(predicate));
      }
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0Blcy10b29sa2l0L2VzLXRvb2xraXQvMS4zMy4wL3NyYy9jb21wYXQvYXJyYXkvc29tZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4uLy4uL2Z1bmN0aW9uL2lkZW50aXR5LnRzJztcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnLi4vb2JqZWN0L3Byb3BlcnR5LnRzJztcbmltcG9ydCB7IG1hdGNoZXMgfSBmcm9tICcuLi9wcmVkaWNhdGUvbWF0Y2hlcy50cyc7XG5pbXBvcnQgeyBtYXRjaGVzUHJvcGVydHkgfSBmcm9tICcuLi9wcmVkaWNhdGUvbWF0Y2hlc1Byb3BlcnR5LnRzJztcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlcmUgaXMgYW4gZWxlbWVudCBpbiBhbiBhcnJheSB0aGF0IGlzIHRydXRoeS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBpcyB0cnV0aHksIGVsc2UgYGZhbHNlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogc29tZShbMSwgMiwgMywgNF0pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc29tZTxUPihhcnI6IEFycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuO1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGVyZSBpcyBhbiBlbGVtZW50IGluIGFuIGFycmF5IHRoYXQgbWF0Y2hlcyB0aGUgZ2l2ZW4gcHJlZGljYXRlIGZ1bmN0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWR9IGFyciBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgYXJyOiByZWFkb25seSBUW10pID0+IHVua25vd259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLCBlbHNlIGBmYWxzZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIHNvbWUoWzEsIDIsIDMsIDRdLCBuID0+IG4gJSAyID09PSAwKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8VD4oXG4gIGFycjogQXJyYXlMaWtlPFQ+IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcHJlZGljYXRlOiAoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgYXJyOiByZWFkb25seSBUW10pID0+IHVua25vd25cbik6IGJvb2xlYW47XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZXJlIGlzIGFuIGVsZW1lbnQgaW4gYW4gYXJyYXkgdGhhdCBtYXRjaGVzIHRoZSBnaXZlbiBrZXktdmFsdWUgcGFpci5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7W2tleW9mIFQsIHVua25vd25dfSBwcmVkaWNhdGUgVGhlIGtleS12YWx1ZSBwYWlyIHRvIG1hdGNoLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLCBlbHNlIGBmYWxzZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIHNvbWUoW3sgYTogMSB9LCB7IGE6IDIgfSwgeyBhOiAzIH1dLCBbJ2EnLCAyXSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lPFQ+KGFycjogQXJyYXlMaWtlPFQ+IHwgbnVsbCB8IHVuZGVmaW5lZCwgcHJlZGljYXRlOiBba2V5b2YgVCwgdW5rbm93bl0pOiBib29sZWFuO1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGVyZSBpcyBhbiBlbGVtZW50IGluIGFuIGFycmF5IHRoYXQgaGFzIGEgdHJ1dGh5IHZhbHVlIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkgbmFtZS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7UHJvcGVydHlLZXl9IHByb3BlcnR5VG9DaGVjayBUaGUgcHJvcGVydHkgbmFtZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBoYXMgYSB0cnV0aHkgdmFsdWUgZm9yIHRoZSBwcm9wZXJ0eSwgZWxzZSBgZmFsc2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBzb21lKFt7IGE6IDEgfSwgeyBhOiAyIH0sIHsgYTogMyB9XSwgJ2EnKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8VD4oYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLCBwcm9wZXJ0eVRvQ2hlY2s6IFByb3BlcnR5S2V5KTogYm9vbGVhbjtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlcmUgaXMgYW4gZWxlbWVudCBpbiBhbiBhcnJheSB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHBhcnRpYWwgb2JqZWN0LlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWR9IGFyciBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtQYXJ0aWFsPFQ+fSBkb2VzTWF0Y2ggVGhlIHBhcnRpYWwgb2JqZWN0IHRvIG1hdGNoLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IG1hdGNoZXMgdGhlIHBhcnRpYWwgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIHNvbWUoW3sgYTogMSB9LCB7IGE6IDIgfSwgeyBhOiAzIH1dLCB7IGE6IDIgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lPFQ+KGFycjogQXJyYXlMaWtlPFQ+IHwgbnVsbCB8IHVuZGVmaW5lZCwgZG9lc01hdGNoOiBQYXJ0aWFsPFQ+KTogYm9vbGVhbjtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlcmUgaXMgYW4gZWxlbWVudCBpbiBhbiBvYmplY3QgdGhhdCBtYXRjaGVzIHRoZSBnaXZlbiBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7VCB8IG51bGwgfCB1bmRlZmluZWR9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBpcyB0cnV0aHksIGVsc2UgYGZhbHNlYC5cbiAqXG4gKiBAZXhhbXBsZVxuICogc29tZSh7IGE6IDEsIGI6IDIsIGM6IDMgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ob2JqZWN0OiBUIHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW47XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZXJlIGlzIGFuIGVsZW1lbnQgaW4gYW4gb2JqZWN0IHRoYXQgbWF0Y2hlcyB0aGUgZ2l2ZW4gcHJlZGljYXRlIGZ1bmN0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1QgfCBudWxsIHwgdW5kZWZpbmVkfSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0geyh2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBrZXlvZiBULCBvYmplY3Q6IFQpID0+IHVua25vd259IGRvZXNNYXRjaCBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gdmFsdWUsIGl0cyBrZXksIGFuZCB0aGUgb2JqZWN0LCBhbmQgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSBpZiB0aGUgaXRlbSBtYXRjaGVzIHRoZSBjcml0ZXJpYS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjaywgZWxzZSBgZmFsc2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBzb21lKHsgYTogMSwgYjogMiwgYzogMyB9LCBuID0+IG4gJSAyID09PSAwKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb2JqZWN0OiBUIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgZG9lc01hdGNoOiAodmFsdWU6IFRba2V5b2YgVF0sIGtleToga2V5b2YgVCwgb2JqZWN0OiBUKSA9PiB1bmtub3duXG4pOiBib29sZWFuO1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGVyZSBpcyBhbiBlbGVtZW50IGluIGFuIG9iamVjdCB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHBhcnRpYWwgdmFsdWUuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7VCB8IG51bGwgfCB1bmRlZmluZWR9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7UGFydGlhbDxUW2tleW9mIFRdPn0gZG9lc01hdGNoIEEgcGFydGlhbCB2YWx1ZSB0byBtYXRjaCBhZ2FpbnN0IHRoZSB2YWx1ZXMgb2YgdGhlIG9iamVjdC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjaywgZWxzZSBgZmFsc2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBzb21lKHsgYTogeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCBiOiB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9IH0sIHsgbmFtZTogJ0JvYicgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIG9iamVjdDogVCB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGRvZXNNYXRjaDogUGFydGlhbDxUW2tleW9mIFRdPlxuKTogYm9vbGVhbjtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlcmUgaXMgYW4gZWxlbWVudCBpbiBhbiBvYmplY3QgdGhhdCBtYXRjaGVzIGEgcHJvcGVydHkgd2l0aCBhIHNwZWNpZmljIHZhbHVlLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1QgfCBudWxsIHwgdW5kZWZpbmVkfSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge1trZXlvZiBULCB1bmtub3duXX0gZG9lc01hdGNoUHJvcGVydHkgQW4gYXJyYXkgd2hlcmUgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdGhlIHByb3BlcnR5IGtleSBhbmQgdGhlIHNlY29uZCBlbGVtZW50IGlzIHRoZSB2YWx1ZSB0byBtYXRjaC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjaywgZWxzZSBgZmFsc2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBvYmogPSB7IGFsaWNlOiB7IGlkOiAxLCBuYW1lOiAnQWxpY2UnIH0sIGJvYjogeyBpZDogMiwgbmFtZTogJ0JvYicgfSB9O1xuICogY29uc3QgcmVzdWx0ID0gc29tZShvYmosIFsnbmFtZScsICdBbGljZSddKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb2JqZWN0OiBUIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgZG9lc01hdGNoUHJvcGVydHk6IFtrZXlvZiBUW2tleW9mIFRdLCB1bmtub3duXVxuKTogYm9vbGVhbjtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlcmUgaXMgYW4gZWxlbWVudCBpbiBhbiBvYmplY3QgdGhhdCBoYXMgYSBzcGVjaWZpYyBwcm9wZXJ0eSwgd2hlcmUgdGhlIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgYXMgYSBQcm9wZXJ0eUtleS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUIHwgbnVsbCB8IHVuZGVmaW5lZH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtQcm9wZXJ0eUtleX0gcHJvcGVydHlUb0NoZWNrIFRoZSBwcm9wZXJ0eSBuYW1lIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLCBlbHNlIGBmYWxzZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IG9iaiA9IHsgYWxpY2U6IHsgaWQ6IDEsIG5hbWU6ICdBbGljZScgfSwgYm9iOiB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9IH07XG4gKiBjb25zdCByZXN1bHQgPSBzb21lKG9iaiwgJ25hbWUnKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb2JqZWN0OiBUIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcHJvcGVydHlUb0NoZWNrOiBQcm9wZXJ0eUtleVxuKTogYm9vbGVhbjtcbi8qKlxuICogQ2hlY2tzIGlmIHRoZXJlIGlzIGFuIGVsZW1lbnQgaW4gYW4gYXJyYXkgdGhhdCBtYXRjaGVzIHRoZSBnaXZlbiBwcmVkaWNhdGUuXG4gKlxuICogSXRlcmF0aW9uIGlzIHN0b3BwZWQgb25jZSB0aGVyZSBpcyBhbiBlbGVtZW50IHRoYXQgbWF0Y2hlcyBgcHJlZGljYXRlYC5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCB8IHVuZGVmaW5lZH0gc291cmNlIFRoZSBzb3VyY2UgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoKGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycjogYW55KSA9PiB1bmtub3duKSB8IFBhcnRpYWw8VD4gfCBba2V5b2YgVCwgdW5rbm93bl0gfCBQcm9wZXJ0eUtleX0gW3ByZWRpY2F0ZT1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIElmIGEgcHJvcGVydHkgbmFtZSBvciBhbiBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjaywgZWxzZSBgZmFsc2VgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBzb21lKFsxLCAyLCAzLCA0XSwgbiA9PiBuICUgMiA9PT0gMCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogc29tZShbeyBhOiAxIH0sIHsgYTogMiB9LCB7IGE6IDMgfV0sIHsgYTogMiB9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBzb21lKFt7IGE6IDEgfSwgeyBhOiAyIH0sIHsgYTogMyB9XSwgWydhJywgMl0pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIHNvbWUoW3sgYTogMSB9LCB7IGE6IDIgfSwgeyBhOiAzIH1dLCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIHNvbWUoeyBhOiAxLCBiOiAyLCBjOiAzIH0sIG4gPT4gbiAlIDIgPT09IDApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIHNvbWUoeyBhOiB7IGlkOiAxLCBuYW1lOiAnQWxpY2UnIH0sIGI6IHsgaWQ6IDIsIG5hbWU6ICdCb2InIH0gfSwgeyBuYW1lOiAnQm9iJyB9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBzb21lKHsgYTogeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCBiOiB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9IH0sIFsnbmFtZScsICdBbGljZSddKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBzb21lKHsgYTogeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCBiOiB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9IH0sICduYW1lJyk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lPFQ+KFxuICBzb3VyY2U6IEFycmF5TGlrZTxUPiB8IFJlY29yZDxhbnksIGFueT4gfCBudWxsIHwgdW5kZWZpbmVkLFxuICBwcmVkaWNhdGU/OiAoKGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycjogYW55KSA9PiB1bmtub3duKSB8IFBhcnRpYWw8VD4gfCBba2V5b2YgVCwgdW5rbm93bl0gfCBQcm9wZXJ0eUtleSxcbiAgZ3VhcmQ/OiB1bmtub3duXG4pOiBib29sZWFuIHtcbiAgaWYgKCFzb3VyY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGd1YXJkICE9IG51bGwpIHtcbiAgICBwcmVkaWNhdGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoIXByZWRpY2F0ZSkge1xuICAgIHByZWRpY2F0ZSA9IGlkZW50aXR5O1xuICB9XG5cbiAgY29uc3QgdmFsdWVzID0gQXJyYXkuaXNBcnJheShzb3VyY2UpID8gc291cmNlIDogT2JqZWN0LnZhbHVlcyhzb3VyY2UpO1xuXG4gIHN3aXRjaCAodHlwZW9mIHByZWRpY2F0ZSkge1xuICAgIGNhc2UgJ2Z1bmN0aW9uJzoge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSkgYXMgQXJyYXk8a2V5b2YgVD47XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNvdXJjZVtrZXldO1xuXG4gICAgICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSBhcyBULCBrZXkgYXMgbnVtYmVyLCBzb3VyY2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWVzLnNvbWUocHJlZGljYXRlKTtcbiAgICB9XG4gICAgY2FzZSAnb2JqZWN0Jzoge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJlZGljYXRlKSAmJiBwcmVkaWNhdGUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHByZWRpY2F0ZVswXTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwcmVkaWNhdGVbMV07XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlcy5zb21lKG1hdGNoZXNQcm9wZXJ0eShrZXksIHZhbHVlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWVzLnNvbWUobWF0Y2hlcyhwcmVkaWNhdGUpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICBjYXNlICdzeW1ib2wnOlxuICAgIGNhc2UgJ3N0cmluZyc6IHtcbiAgICAgIHJldHVybiB2YWx1ZXMuc29tZShwcm9wZXJ0eShwcmVkaWNhdGUpKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxTQUFTLFFBQVEsUUFBUSw2QkFBNkI7QUFDdEQsU0FBUyxRQUFRLFFBQVEsd0JBQXdCO0FBQ2pELFNBQVMsT0FBTyxRQUFRLDBCQUEwQjtBQUNsRCxTQUFTLGVBQWUsUUFBUSxrQ0FBa0M7QUE0SmxFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW1DQyxHQUNELE9BQU8sU0FBUyxLQUNkLE1BQTBELEVBQzFELFNBQTJHLEVBQzNHLEtBQWU7RUFFZixJQUFJLENBQUMsUUFBUTtJQUNYLE9BQU87RUFDVDtFQUNBLElBQUksU0FBUyxNQUFNO0lBQ2pCLFlBQVk7RUFDZDtFQUVBLElBQUksQ0FBQyxXQUFXO0lBQ2QsWUFBWTtFQUNkO0VBRUEsTUFBTSxTQUFTLE1BQU0sT0FBTyxDQUFDLFVBQVUsU0FBUyxPQUFPLE1BQU0sQ0FBQztFQUU5RCxPQUFRLE9BQU87SUFDYixLQUFLO01BQVk7UUFDZixJQUFJLENBQUMsTUFBTSxPQUFPLENBQUMsU0FBUztVQUMxQixNQUFNLE9BQU8sT0FBTyxJQUFJLENBQUM7VUFFekIsSUFBSyxJQUFJLElBQUksR0FBRyxJQUFJLEtBQUssTUFBTSxFQUFFLElBQUs7WUFDcEMsTUFBTSxNQUFNLElBQUksQ0FBQyxFQUFFO1lBQ25CLE1BQU0sUUFBUSxNQUFNLENBQUMsSUFBSTtZQUV6QixJQUFJLFVBQVUsT0FBWSxLQUFlLFNBQVM7Y0FDaEQsT0FBTztZQUNUO1VBQ0Y7VUFFQSxPQUFPO1FBQ1Q7UUFDQSxPQUFPLE9BQU8sSUFBSSxDQUFDO01BQ3JCO0lBQ0EsS0FBSztNQUFVO1FBQ2IsSUFBSSxNQUFNLE9BQU8sQ0FBQyxjQUFjLFVBQVUsTUFBTSxLQUFLLEdBQUc7VUFDdEQsTUFBTSxNQUFNLFNBQVMsQ0FBQyxFQUFFO1VBQ3hCLE1BQU0sUUFBUSxTQUFTLENBQUMsRUFBRTtVQUUxQixPQUFPLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixLQUFLO1FBQzFDLE9BQU87VUFDTCxPQUFPLE9BQU8sSUFBSSxDQUFDLFFBQVE7UUFDN0I7TUFDRjtJQUNBLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztNQUFVO1FBQ2IsT0FBTyxPQUFPLElBQUksQ0FBQyxTQUFTO01BQzlCO0VBQ0Y7QUFDRiJ9
// denoCacheMetadata=15676174379432992117,13264583581547342169