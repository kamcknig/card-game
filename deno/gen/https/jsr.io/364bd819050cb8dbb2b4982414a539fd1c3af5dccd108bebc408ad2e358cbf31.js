import { iteratee } from '../util/iteratee.ts';
import { toInteger } from '../util/toInteger.ts';
/**
 * Finds the last item in an object that has a specific property, where the property name is provided as a PropertyKey.
 *
 * @template T
 * @param {ArrayLike<T> | Record<any, any> | null | undefined} source - The source array or object to search through.
 * @param {((item: T, index: number, arr: any) => unknown) | Partial<T> | [keyof T, unknown] | PropertyKey} doesMatch - The criteria to match. It can be a function, a partial object, a key-value pair, or a property name.
 * @param {number} [fromIndex] - The index to start the search from, defaults to source.length-1 for arrays or Object.keys(source).length-1 for objects.
 * @returns {T | undefined} - The last property value that has the specified property, or `undefined` if no match is found.
 *
 * @example
 * // Using a property name
 * const obj = { a: { id: 1, name: 'Alice' }, b: { id: 2 }, c: { id: 3, name: 'Bob' } };
 * const result = findLast(obj, 'name');
 * console.log(result); // { id: 3, name: 'Bob' }
 */ export function findLast(source, _doesMatch, fromIndex) {
  if (!source) {
    return undefined;
  }
  const length = Array.isArray(source) ? source.length : Object.keys(source).length;
  fromIndex = toInteger(fromIndex ?? length - 1);
  if (fromIndex < 0) {
    fromIndex = Math.max(length + fromIndex, 0);
  } else {
    fromIndex = Math.min(fromIndex, length - 1);
  }
  const doesMatch = iteratee(_doesMatch);
  const values = Array.isArray(source) ? source.slice(0, fromIndex + 1) : Object.values(source).slice(0, fromIndex + 1);
  if (typeof doesMatch === 'function' && !Array.isArray(source)) {
    const keys = Object.keys(source).slice(0, fromIndex + 1);
    for(let i = fromIndex; i >= 0; i--){
      const key = keys[i];
      const value = source[key];
      if (doesMatch(value, key, source)) {
        return value;
      }
    }
    return undefined;
  }
  return values.findLast(doesMatch);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0Blcy10b29sa2l0L2VzLXRvb2xraXQvMS4zMy4wL3NyYy9jb21wYXQvYXJyYXkvZmluZExhc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXRlcmF0ZWUgfSBmcm9tICcuLi91dGlsL2l0ZXJhdGVlLnRzJztcbmltcG9ydCB7IHRvSW50ZWdlciB9IGZyb20gJy4uL3V0aWwvdG9JbnRlZ2VyLnRzJztcblxuLyoqXG4gKiBGaW5kcyB0aGUgbGFzdCBpdGVtIGluIGFuIGFycmF5IHRoYXQgbWF0Y2hlcyB0aGUgZ2l2ZW4gcHJlZGljYXRlIGZ1bmN0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWR9IGFyciAtIFRoZSBhcnJheSB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7KGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycjogVFtdKSA9PiB1bmtub3dufSBkb2VzTWF0Y2ggLSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gaXRlbSwgaXRzIGluZGV4LCBhbmQgdGhlIGFycmF5LCBhbmQgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSBpZiB0aGUgaXRlbSBtYXRjaGVzIHRoZSBjcml0ZXJpYS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PWFyci5sZW5ndGgtMV0gLSBUaGUgaW5kZXggdG8gc3RhcnQgdGhlIHNlYXJjaCBmcm9tLCBkZWZhdWx0cyB0byBhcnIubGVuZ3RoLTEuXG4gKiBAcmV0dXJucyB7VCB8IHVuZGVmaW5lZH0gLSBUaGUgbGFzdCBpdGVtIHRoYXQgbWF0Y2hlcyB0aGUgcHJlZGljYXRlLCBvciBgdW5kZWZpbmVkYCBpZiBubyBtYXRjaCBpcyBmb3VuZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVXNpbmcgYSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqIGNvbnN0IGl0ZW1zID0gWzEsIDIsIDMsIDQsIDVdO1xuICogY29uc3QgcmVzdWx0ID0gZmluZExhc3QoaXRlbXMsIChpdGVtKSA9PiBpdGVtID4gMyk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQpOyAvLyA1XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGFzdDxUPihcbiAgYXJyOiBBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkLFxuICBkb2VzTWF0Y2g6IChpdGVtOiBULCBpbmRleDogbnVtYmVyLCBhcnI6IHJlYWRvbmx5IFRbXSkgPT4gdW5rbm93bixcbiAgZnJvbUluZGV4PzogbnVtYmVyXG4pOiBUIHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBsYXN0IGl0ZW0gaW4gYW4gYXJyYXkgdGhhdCBtYXRjaGVzIHRoZSBnaXZlbiBwYXJ0aWFsIG9iamVjdC5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtBcnJheUxpa2U8VD4gfCBudWxsIHwgdW5kZWZpbmVkfSBhcnIgLSBUaGUgYXJyYXkgdG8gc2VhcmNoIHRocm91Z2guXG4gKiBAcGFyYW0ge1BhcnRpYWw8VD59IGRvZXNNYXRjaCAtIEEgcGFydGlhbCBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIHByb3BlcnRpZXMgdG8gbWF0Y2guXG4gKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD1hcnIubGVuZ3RoLTFdIC0gVGhlIGluZGV4IHRvIHN0YXJ0IHRoZSBzZWFyY2ggZnJvbSwgZGVmYXVsdHMgdG8gYXJyLmxlbmd0aC0xLlxuICogQHJldHVybnMge1QgfCB1bmRlZmluZWR9IC0gVGhlIGxhc3QgaXRlbSB0aGF0IG1hdGNoZXMgdGhlIHBhcnRpYWwgb2JqZWN0LCBvciBgdW5kZWZpbmVkYCBpZiBubyBtYXRjaCBpcyBmb3VuZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVXNpbmcgYSBwYXJ0aWFsIG9iamVjdFxuICogY29uc3QgaXRlbXMgPSBbeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCB7IGlkOiAyLCBuYW1lOiAnQm9iJyB9LCB7IGlkOiAzLCBuYW1lOiAnQm9iJyB9XTtcbiAqIGNvbnN0IHJlc3VsdCA9IGZpbmRMYXN0KGl0ZW1zLCB7IG5hbWU6ICdCb2InIH0pO1xuICogY29uc29sZS5sb2cocmVzdWx0KTsgLy8geyBpZDogMywgbmFtZTogJ0JvYicgfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZExhc3Q8VD4oXG4gIGFycjogQXJyYXlMaWtlPFQ+IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgZG9lc01hdGNoOiBQYXJ0aWFsPFQ+LFxuICBmcm9tSW5kZXg/OiBudW1iZXJcbik6IFQgfCB1bmRlZmluZWQ7XG5cbi8qKlxuICogRmluZHMgdGhlIGxhc3QgaXRlbSBpbiBhbiBhcnJheSB0aGF0IG1hdGNoZXMgYSBwcm9wZXJ0eSB3aXRoIGEgc3BlY2lmaWMgdmFsdWUuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7QXJyYXlMaWtlPFQ+IHwgbnVsbCB8IHVuZGVmaW5lZH0gYXJyIC0gVGhlIGFycmF5IHRvIHNlYXJjaCB0aHJvdWdoLlxuICogQHBhcmFtIHtba2V5b2YgVCwgdW5rbm93bl19IGRvZXNNYXRjaFByb3BlcnR5IC0gQW4gYXJyYXkgd2hlcmUgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdGhlIHByb3BlcnR5IGtleSBhbmQgdGhlIHNlY29uZCBlbGVtZW50IGlzIHRoZSB2YWx1ZSB0byBtYXRjaC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PWFyci5sZW5ndGgtMV0gLSBUaGUgaW5kZXggdG8gc3RhcnQgdGhlIHNlYXJjaCBmcm9tLCBkZWZhdWx0cyB0byBhcnIubGVuZ3RoLTEuXG4gKiBAcmV0dXJucyB7VCB8IHVuZGVmaW5lZH0gLSBUaGUgbGFzdCBpdGVtIHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgdmFsdWUsIG9yIGB1bmRlZmluZWRgIGlmIG5vIG1hdGNoIGlzIGZvdW5kLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBVc2luZyBhIHByb3BlcnR5LXZhbHVlIHBhaXJcbiAqIGNvbnN0IGl0ZW1zID0gW3sgaWQ6IDEsIG5hbWU6ICdBbGljZScgfSwgeyBpZDogMiwgbmFtZTogJ0JvYicgfSwgeyBpZDogMywgbmFtZTogJ0FsaWNlJyB9XTtcbiAqIGNvbnN0IHJlc3VsdCA9IGZpbmRMYXN0KGl0ZW1zLCBbJ25hbWUnLCAnQWxpY2UnXSk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQpOyAvLyB7IGlkOiAzLCBuYW1lOiAnQWxpY2UnIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0PFQ+KFxuICBhcnI6IEFycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGRvZXNNYXRjaFByb3BlcnR5OiBba2V5b2YgVCwgdW5rbm93bl0sXG4gIGZyb21JbmRleD86IG51bWJlclxuKTogVCB8IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBGaW5kcyB0aGUgbGFzdCBpdGVtIGluIGFuIGFycmF5IHRoYXQgaGFzIGEgc3BlY2lmaWMgcHJvcGVydHksIHdoZXJlIHRoZSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGFzIGEgUHJvcGVydHlLZXkuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7QXJyYXlMaWtlPFQ+IHwgbnVsbCB8IHVuZGVmaW5lZH0gYXJyIC0gVGhlIGFycmF5IHRvIHNlYXJjaCB0aHJvdWdoLlxuICogQHBhcmFtIHtQcm9wZXJ0eUtleX0gcHJvcGVydHlUb0NoZWNrIC0gVGhlIHByb3BlcnR5IG5hbWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD1hcnIubGVuZ3RoLTFdIC0gVGhlIGluZGV4IHRvIHN0YXJ0IHRoZSBzZWFyY2ggZnJvbSwgZGVmYXVsdHMgdG8gYXJyLmxlbmd0aC0xLlxuICogQHJldHVybnMge1QgfCB1bmRlZmluZWR9IC0gVGhlIGxhc3QgaXRlbSB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIHByb3BlcnR5LCBvciBgdW5kZWZpbmVkYCBpZiBubyBtYXRjaCBpcyBmb3VuZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVXNpbmcgYSBwcm9wZXJ0eSBuYW1lXG4gKiBjb25zdCBpdGVtcyA9IFt7IGlkOiAxLCBuYW1lOiAnQWxpY2UnIH0sIHsgaWQ6IDIgfSwgeyBpZDogMywgbmFtZTogJ0JvYicgfV07XG4gKiBjb25zdCByZXN1bHQgPSBmaW5kTGFzdChpdGVtcywgJ25hbWUnKTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdCk7IC8vIHsgaWQ6IDMsIG5hbWU6ICdCb2InIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0PFQ+KFxuICBhcnI6IEFycmF5TGlrZTxUPiB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHByb3BlcnR5VG9DaGVjazogUHJvcGVydHlLZXksXG4gIGZyb21JbmRleD86IG51bWJlclxuKTogVCB8IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBGaW5kcyB0aGUgbGFzdCBpdGVtIGluIGFuIG9iamVjdCB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUIHwgbnVsbCB8IHVuZGVmaW5lZH0gb2JqZWN0IC0gVGhlIG9iamVjdCB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7KGl0ZW06IFRba2V5b2YgVF0sIGluZGV4OiBudW1iZXIsIGFycjogVCkgPT4gdW5rbm93bn0gZG9lc01hdGNoIC0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIGl0ZW0sIGl0cyBrZXksIGFuZCB0aGUgb2JqZWN0LCBhbmQgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSBpZiB0aGUgaXRlbSBtYXRjaGVzIHRoZSBjcml0ZXJpYS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PU9iamVjdC5rZXlzKG9iamVjdCkubGVuZ3RoLTFdIC0gVGhlIGluZGV4IHRvIHN0YXJ0IHRoZSBzZWFyY2ggZnJvbSwgZGVmYXVsdHMgdG8gT2JqZWN0LmtleXMob2JqZWN0KS5sZW5ndGgtMS5cbiAqIEByZXR1cm5zIHtUIHwgdW5kZWZpbmVkfSAtIFRoZSBsYXN0IHByb3BlcnR5IHZhbHVlIHRoYXQgbWF0Y2hlcyB0aGUgcHJlZGljYXRlLCBvciBgdW5kZWZpbmVkYCBpZiBubyBtYXRjaCBpcyBmb3VuZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVXNpbmcgYSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqIGNvbnN0IG9iaiA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xuICogY29uc3QgcmVzdWx0ID0gZmluZExhc3Qob2JqLCAoaXRlbSkgPT4gaXRlbSA+IDEpO1xuICogY29uc29sZS5sb2cocmVzdWx0KTsgLy8gM1xuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZExhc3Q8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb2JqZWN0OiBUIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgZG9lc01hdGNoOiAoaXRlbTogVFtrZXlvZiBUXSwgaW5kZXg6IGtleW9mIFQsIG9iamVjdDogVCkgPT4gdW5rbm93bixcbiAgZnJvbUluZGV4PzogbnVtYmVyXG4pOiBUIHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBsYXN0IGl0ZW0gaW4gYW4gb2JqZWN0IHRoYXQgbWF0Y2hlcyB0aGUgZ2l2ZW4gcGFydGlhbCB2YWx1ZS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUIHwgbnVsbCB8IHVuZGVmaW5lZH0gb2JqZWN0IC0gVGhlIG9iamVjdCB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7UGFydGlhbDxUW2tleW9mIFRdPn0gZG9lc01hdGNoIC0gQSBwYXJ0aWFsIHZhbHVlIHRvIG1hdGNoIGFnYWluc3QgdGhlIHZhbHVlcyBvZiB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9T2JqZWN0LmtleXMob2JqZWN0KS5sZW5ndGgtMV0gLSBUaGUgaW5kZXggdG8gc3RhcnQgdGhlIHNlYXJjaCBmcm9tLCBkZWZhdWx0cyB0byBPYmplY3Qua2V5cyhvYmplY3QpLmxlbmd0aC0xLlxuICogQHJldHVybnMge1QgfCB1bmRlZmluZWR9IC0gVGhlIGxhc3QgcHJvcGVydHkgdmFsdWUgdGhhdCBtYXRjaGVzIHRoZSBwYXJ0aWFsIHZhbHVlLCBvciBgdW5kZWZpbmVkYCBpZiBubyBtYXRjaCBpcyBmb3VuZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVXNpbmcgYSBwYXJ0aWFsIHZhbHVlXG4gKiBjb25zdCBvYmogPSB7IGE6IHsgaWQ6IDEsIG5hbWU6ICdCb2InIH0sIGI6IHsgaWQ6IDIsIG5hbWU6ICdBbGljZScgfSwgYzogeyBpZDogMywgbmFtZTogJ0JvYicgfSB9O1xuICogY29uc3QgcmVzdWx0ID0gZmluZExhc3Qob2JqLCB7IG5hbWU6ICdCb2InIH0pO1xuICogY29uc29sZS5sb2cocmVzdWx0KTsgLy8geyBpZDogMywgbmFtZTogJ0JvYicgfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZExhc3Q8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb2JqZWN0OiBUIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgZG9lc01hdGNoOiBQYXJ0aWFsPFRba2V5b2YgVF0+LFxuICBmcm9tSW5kZXg/OiBudW1iZXJcbik6IFQgfCB1bmRlZmluZWQ7XG5cbi8qKlxuICogRmluZHMgdGhlIGxhc3QgaXRlbSBpbiBhbiBvYmplY3QgdGhhdCBtYXRjaGVzIGEgcHJvcGVydHkgd2l0aCBhIHNwZWNpZmljIHZhbHVlLlxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1QgfCBudWxsIHwgdW5kZWZpbmVkfSBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIHNlYXJjaCB0aHJvdWdoLlxuICogQHBhcmFtIHtba2V5b2YgVFtrZXlvZiBUXSwgdW5rbm93bl19IGRvZXNNYXRjaFByb3BlcnR5IC0gQW4gYXJyYXkgd2hlcmUgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdGhlIHByb3BlcnR5IGtleSBhbmQgdGhlIHNlY29uZCBlbGVtZW50IGlzIHRoZSB2YWx1ZSB0byBtYXRjaC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PU9iamVjdC5rZXlzKG9iamVjdCkubGVuZ3RoLTFdIC0gVGhlIGluZGV4IHRvIHN0YXJ0IHRoZSBzZWFyY2ggZnJvbSwgZGVmYXVsdHMgdG8gT2JqZWN0LmtleXMob2JqZWN0KS5sZW5ndGgtMS5cbiAqIEByZXR1cm5zIHtUIHwgdW5kZWZpbmVkfSAtIFRoZSBsYXN0IGl0ZW0gdGhhdCBoYXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSB2YWx1ZSwgb3IgYHVuZGVmaW5lZGAgaWYgbm8gbWF0Y2ggaXMgZm91bmQuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFVzaW5nIGEgcHJvcGVydHktdmFsdWUgcGFpclxuICogY29uc3QgaXRlbXMgPSB7IGE6IHsgaWQ6IDEsIG5hbWU6ICdBbGljZScgfSwgYjogeyBpZDogMiwgbmFtZTogJ0JvYicgfSwgYzogeyBpZDogMywgbmFtZTogJ0FsaWNlJyB9IH07XG4gKiBjb25zdCByZXN1bHQgPSBmaW5kTGFzdChpdGVtcywgWyduYW1lJywgJ0FsaWNlJ10pO1xuICogY29uc29sZS5sb2cocmVzdWx0KTsgLy8geyBpZDogMywgbmFtZTogJ0FsaWNlJyB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGFzdDxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvYmplY3Q6IFQgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBkb2VzTWF0Y2hQcm9wZXJ0eTogW2tleW9mIFRba2V5b2YgVF0sIHVua25vd25dLFxuICBmcm9tSW5kZXg/OiBudW1iZXJcbik6IFQgfCB1bmRlZmluZWQ7XG5cbi8qKlxuICogRmluZHMgdGhlIGxhc3QgaXRlbSBpbiBhbiBvYmplY3QgdGhhdCBoYXMgYSBzcGVjaWZpYyBwcm9wZXJ0eSwgd2hlcmUgdGhlIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgYXMgYSBQcm9wZXJ0eUtleS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUIHwgbnVsbCB8IHVuZGVmaW5lZH0gb2JqZWN0IC0gVGhlIG9iamVjdCB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7UHJvcGVydHlLZXl9IHByb3BlcnR5VG9DaGVjayAtIFRoZSBwcm9wZXJ0eSBuYW1lIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9T2JqZWN0LmtleXMob2JqZWN0KS5sZW5ndGgtMV0gLSBUaGUgaW5kZXggdG8gc3RhcnQgdGhlIHNlYXJjaCBmcm9tLCBkZWZhdWx0cyB0byBPYmplY3Qua2V5cyhvYmplY3QpLmxlbmd0aC0xLlxuICogQHJldHVybnMge1QgfCB1bmRlZmluZWR9IC0gVGhlIGxhc3QgcHJvcGVydHkgdmFsdWUgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSwgb3IgYHVuZGVmaW5lZGAgaWYgbm8gbWF0Y2ggaXMgZm91bmQuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFVzaW5nIGEgcHJvcGVydHkgbmFtZVxuICogY29uc3Qgb2JqID0geyBhOiB7IGlkOiAxLCBuYW1lOiAnQWxpY2UnIH0sIGI6IHsgaWQ6IDIgfSwgYzogeyBpZDogMywgbmFtZTogJ0JvYicgfSB9O1xuICogY29uc3QgcmVzdWx0ID0gZmluZExhc3Qob2JqLCAnbmFtZScpO1xuICogY29uc29sZS5sb2cocmVzdWx0KTsgLy8geyBpZDogMywgbmFtZTogJ0JvYicgfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZExhc3Q8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb2JqZWN0OiBUIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgcHJvcGVydHlUb0NoZWNrOiBQcm9wZXJ0eUtleSxcbiAgZnJvbUluZGV4PzogbnVtYmVyXG4pOiBUIHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBsYXN0IGl0ZW0gaW4gYW4gb2JqZWN0IHRoYXQgaGFzIGEgc3BlY2lmaWMgcHJvcGVydHksIHdoZXJlIHRoZSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGFzIGEgUHJvcGVydHlLZXkuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7QXJyYXlMaWtlPFQ+IHwgUmVjb3JkPGFueSwgYW55PiB8IG51bGwgfCB1bmRlZmluZWR9IHNvdXJjZSAtIFRoZSBzb3VyY2UgYXJyYXkgb3Igb2JqZWN0IHRvIHNlYXJjaCB0aHJvdWdoLlxuICogQHBhcmFtIHsoKGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycjogYW55KSA9PiB1bmtub3duKSB8IFBhcnRpYWw8VD4gfCBba2V5b2YgVCwgdW5rbm93bl0gfCBQcm9wZXJ0eUtleX0gZG9lc01hdGNoIC0gVGhlIGNyaXRlcmlhIHRvIG1hdGNoLiBJdCBjYW4gYmUgYSBmdW5jdGlvbiwgYSBwYXJ0aWFsIG9iamVjdCwgYSBrZXktdmFsdWUgcGFpciwgb3IgYSBwcm9wZXJ0eSBuYW1lLlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXhdIC0gVGhlIGluZGV4IHRvIHN0YXJ0IHRoZSBzZWFyY2ggZnJvbSwgZGVmYXVsdHMgdG8gc291cmNlLmxlbmd0aC0xIGZvciBhcnJheXMgb3IgT2JqZWN0LmtleXMoc291cmNlKS5sZW5ndGgtMSBmb3Igb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtUIHwgdW5kZWZpbmVkfSAtIFRoZSBsYXN0IHByb3BlcnR5IHZhbHVlIHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHksIG9yIGB1bmRlZmluZWRgIGlmIG5vIG1hdGNoIGlzIGZvdW5kLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBVc2luZyBhIHByb3BlcnR5IG5hbWVcbiAqIGNvbnN0IG9iaiA9IHsgYTogeyBpZDogMSwgbmFtZTogJ0FsaWNlJyB9LCBiOiB7IGlkOiAyIH0sIGM6IHsgaWQ6IDMsIG5hbWU6ICdCb2InIH0gfTtcbiAqIGNvbnN0IHJlc3VsdCA9IGZpbmRMYXN0KG9iaiwgJ25hbWUnKTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdCk7IC8vIHsgaWQ6IDMsIG5hbWU6ICdCb2InIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0PFQ+KFxuICBzb3VyY2U6IEFycmF5TGlrZTxUPiB8IFJlY29yZDxhbnksIGFueT4gfCBudWxsIHwgdW5kZWZpbmVkLFxuICBfZG9lc01hdGNoOiAoKGl0ZW06IFQsIGluZGV4OiBudW1iZXIsIGFycjogYW55KSA9PiB1bmtub3duKSB8IFBhcnRpYWw8VD4gfCBba2V5b2YgVCwgdW5rbm93bl0gfCBQcm9wZXJ0eUtleSxcbiAgZnJvbUluZGV4PzogbnVtYmVyXG4pOiBUIHwgdW5kZWZpbmVkIHtcbiAgaWYgKCFzb3VyY2UpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgbGVuZ3RoID0gQXJyYXkuaXNBcnJheShzb3VyY2UpID8gc291cmNlLmxlbmd0aCA6IE9iamVjdC5rZXlzKHNvdXJjZSkubGVuZ3RoO1xuXG4gIGZyb21JbmRleCA9IHRvSW50ZWdlcihmcm9tSW5kZXggPz8gbGVuZ3RoIC0gMSk7XG5cbiAgaWYgKGZyb21JbmRleCA8IDApIHtcbiAgICBmcm9tSW5kZXggPSBNYXRoLm1heChsZW5ndGggKyBmcm9tSW5kZXgsIDApO1xuICB9IGVsc2Uge1xuICAgIGZyb21JbmRleCA9IE1hdGgubWluKGZyb21JbmRleCwgbGVuZ3RoIC0gMSk7XG4gIH1cblxuICBjb25zdCBkb2VzTWF0Y2ggPSBpdGVyYXRlZShfZG9lc01hdGNoKTtcblxuICBjb25zdCB2YWx1ZXMgPSBBcnJheS5pc0FycmF5KHNvdXJjZSkgPyBzb3VyY2Uuc2xpY2UoMCwgZnJvbUluZGV4ICsgMSkgOiBPYmplY3QudmFsdWVzKHNvdXJjZSkuc2xpY2UoMCwgZnJvbUluZGV4ICsgMSk7XG5cbiAgaWYgKHR5cGVvZiBkb2VzTWF0Y2ggPT09ICdmdW5jdGlvbicgJiYgIUFycmF5LmlzQXJyYXkoc291cmNlKSkge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpLnNsaWNlKDAsIGZyb21JbmRleCArIDEpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgZm9yIChsZXQgaSA9IGZyb21JbmRleDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICBjb25zdCB2YWx1ZSA9IHNvdXJjZVtrZXldIGFzIFQ7XG5cbiAgICAgIGlmIChkb2VzTWF0Y2godmFsdWUsIGtleSBhcyBudW1iZXIsIHNvdXJjZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gdmFsdWVzLmZpbmRMYXN0KGRvZXNNYXRjaCk7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxRQUFRLFFBQVEsc0JBQXNCO0FBQy9DLFNBQVMsU0FBUyxRQUFRLHVCQUF1QjtBQTBLakQ7Ozs7Ozs7Ozs7Ozs7O0NBY0MsR0FDRCxPQUFPLFNBQVMsU0FDZCxNQUEwRCxFQUMxRCxVQUEyRyxFQUMzRyxTQUFrQjtFQUVsQixJQUFJLENBQUMsUUFBUTtJQUNYLE9BQU87RUFDVDtFQUVBLE1BQU0sU0FBUyxNQUFNLE9BQU8sQ0FBQyxVQUFVLE9BQU8sTUFBTSxHQUFHLE9BQU8sSUFBSSxDQUFDLFFBQVEsTUFBTTtFQUVqRixZQUFZLFVBQVUsYUFBYSxTQUFTO0VBRTVDLElBQUksWUFBWSxHQUFHO0lBQ2pCLFlBQVksS0FBSyxHQUFHLENBQUMsU0FBUyxXQUFXO0VBQzNDLE9BQU87SUFDTCxZQUFZLEtBQUssR0FBRyxDQUFDLFdBQVcsU0FBUztFQUMzQztFQUVBLE1BQU0sWUFBWSxTQUFTO0VBRTNCLE1BQU0sU0FBUyxNQUFNLE9BQU8sQ0FBQyxVQUFVLE9BQU8sS0FBSyxDQUFDLEdBQUcsWUFBWSxLQUFLLE9BQU8sTUFBTSxDQUFDLFFBQVEsS0FBSyxDQUFDLEdBQUcsWUFBWTtFQUVuSCxJQUFJLE9BQU8sY0FBYyxjQUFjLENBQUMsTUFBTSxPQUFPLENBQUMsU0FBUztJQUM3RCxNQUFNLE9BQU8sT0FBTyxJQUFJLENBQUMsUUFBUSxLQUFLLENBQUMsR0FBRyxZQUFZO0lBRXRELElBQUssSUFBSSxJQUFJLFdBQVcsS0FBSyxHQUFHLElBQUs7TUFDbkMsTUFBTSxNQUFNLElBQUksQ0FBQyxFQUFFO01BQ25CLE1BQU0sUUFBUSxNQUFNLENBQUMsSUFBSTtNQUV6QixJQUFJLFVBQVUsT0FBTyxLQUFlLFNBQVM7UUFDM0MsT0FBTztNQUNUO0lBQ0Y7SUFFQSxPQUFPO0VBQ1Q7RUFFQSxPQUFPLE9BQU8sUUFBUSxDQUFDO0FBQ3pCIn0=
// denoCacheMetadata=1215696690517099816,5989525445208164106