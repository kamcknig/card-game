import { identity } from '../../function/identity.ts';
import { range } from '../../math/range.ts';
import { isArrayLike } from '../predicate/isArrayLike.ts';
/**
 * Reduces a collection to a single value using an iteratee function.
 *
 * @param {T[] | ArrayLike<T> | Record<string, T> | null | undefined} collection - The collection to iterate over.
 * @param {((accumulator: any, value: any, index: PropertyKey, collection: any) => any) | PropertyKey | object} iteratee - The function invoked per iteration or the key to reduce over.
 * @param {any} initialValue - The initial value.
 * @returns {any} - Returns the accumulated value.
 *
 * @example
 * // Using a reducer function
 * const array = [1, 2, 3];
 * reduce(array, (acc, value) => acc + value, 0); // => 6
 *
 * @example
 * // Using a reducer function with initialValue
 * const array = [1, 2, 3];
 * reduce(array, (acc, value) => acc + value % 2 === 0, true); // => false
 *
 * @example
 * // Using an object as the collection
 * const obj = { a: 1, b: 2, c: 3 };
 * reduce(obj, (acc, value) => acc + value, 0); // => 6
 */ export function reduce(collection, iteratee = identity, accumulator) {
  if (!collection) {
    return accumulator;
  }
  let keys;
  let startIndex = 0;
  if (isArrayLike(collection)) {
    keys = range(0, collection.length);
    if (accumulator == null && collection.length > 0) {
      accumulator = collection[0];
      startIndex += 1;
    }
  } else {
    keys = Object.keys(collection);
    if (accumulator == null) {
      accumulator = collection[keys[0]];
      startIndex += 1;
    }
  }
  for(let i = startIndex; i < keys.length; i++){
    const key = keys[i];
    const value = collection[key];
    accumulator = iteratee(accumulator, value, key, collection);
  }
  return accumulator;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0Blcy10b29sa2l0L2VzLXRvb2xraXQvMS4zMy4wL3NyYy9jb21wYXQvYXJyYXkvcmVkdWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi4vLi4vZnVuY3Rpb24vaWRlbnRpdHkudHMnO1xuaW1wb3J0IHsgcmFuZ2UgfSBmcm9tICcuLi8uLi9tYXRoL3JhbmdlLnRzJztcbmltcG9ydCB7IGlzQXJyYXlMaWtlIH0gZnJvbSAnLi4vcHJlZGljYXRlL2lzQXJyYXlMaWtlLnRzJztcblxuLyoqXG4gKiBSZWR1Y2VzIGFuIGFycmF5IHRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uLlxuICpcbiAqIFRoZSBgcmVkdWNlKClgIGZ1bmN0aW9uIGdvZXMgdGhyb3VnaCBlYWNoIGVsZW1lbnQgaW4gYW4gYXJyYXkgYW5kIGFwcGxpZXMgYSBzcGVjaWFsIGZ1bmN0aW9uIChjYWxsZWQgYSBcInJlZHVjZXJcIikgdG8gdGhlbSwgb25lIGJ5IG9uZS5cbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgdGhlIHJlc3VsdCBvZiB0aGUgcHJldmlvdXMgc3RlcCBhbmQgdGhlIGN1cnJlbnQgZWxlbWVudCB0byBwZXJmb3JtIGEgY2FsY3VsYXRpb24uXG4gKiBBZnRlciBnb2luZyB0aHJvdWdoIGFsbCB0aGUgZWxlbWVudHMsIHRoZSBmdW5jdGlvbiBnaXZlcyB5b3Ugb25lIGZpbmFsIHJlc3VsdC5cbiAqXG4gKiBXaGVuIHRoZSBgcmVkdWNlKClgIGZ1bmN0aW9uIHN0YXJ0cywgdGhlcmUncyBubyBwcmV2aW91cyByZXN1bHQgdG8gdXNlLlxuICogSWYgeW91IHByb3ZpZGUgYW4gaW5pdGlhbCB2YWx1ZSwgaXQgc3RhcnRzIHdpdGggdGhhdC5cbiAqIElmIG5vdCwgaXQgdXNlcyB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYXJyYXkgYW5kIGJlZ2lucyB3aXRoIHRoZSBzZWNvbmQgZWxlbWVudCBmb3IgdGhlIGNhbGN1bGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7cmVhZG9ubHkgVFtdfSBjb2xsZWN0aW9uIC0gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoYWNjdW11bGF0b3I6IFUsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiByZWFkb25seSBUW10pID0+IFV9IGl0ZXJhdGVlIC0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7VX0gaW5pdGlhbFZhbHVlIC0gVGhlIGluaXRpYWwgdmFsdWUuXG4gKiBAcmV0dXJucyB7VX0gLSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgYXJyYXlMaWtlID0gWzEsIDIsIDNdO1xuICogcmVkdWNlKGFycmF5TGlrZSwgKGFjYywgdmFsdWUpID0+IGFjYyAmJiB2YWx1ZSAlIDIgPT09IDAsIHRydWUpOyAvLyA9PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlPFQsIFU+KFxuICBjb2xsZWN0aW9uOiByZWFkb25seSBUW10sXG4gIGl0ZXJhdGVlOiAoYWNjdW11bGF0b3I6IFUsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiByZWFkb25seSBUW10pID0+IFUsXG4gIGluaXRpYWxWYWx1ZTogVVxuKTogVTtcblxuLyoqXG4gKiBSZWR1Y2VzIGFuIGFycmF5IHRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uLlxuICpcbiAqIFRoZSBgcmVkdWNlKClgIGZ1bmN0aW9uIGdvZXMgdGhyb3VnaCBlYWNoIGVsZW1lbnQgaW4gYW4gYXJyYXkgYW5kIGFwcGxpZXMgYSBzcGVjaWFsIGZ1bmN0aW9uIChjYWxsZWQgYSBcInJlZHVjZXJcIikgdG8gdGhlbSwgb25lIGJ5IG9uZS5cbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgdGhlIHJlc3VsdCBvZiB0aGUgcHJldmlvdXMgc3RlcCBhbmQgdGhlIGN1cnJlbnQgZWxlbWVudCB0byBwZXJmb3JtIGEgY2FsY3VsYXRpb24uXG4gKiBBZnRlciBnb2luZyB0aHJvdWdoIGFsbCB0aGUgZWxlbWVudHMsIHRoZSBmdW5jdGlvbiBnaXZlcyB5b3Ugb25lIGZpbmFsIHJlc3VsdC5cbiAqXG4gKiBXaGVuIHRoZSBgcmVkdWNlKClgIGZ1bmN0aW9uIHN0YXJ0cywgdGhlcmUncyBubyBwcmV2aW91cyByZXN1bHQgdG8gdXNlLlxuICogSWYgeW91IHByb3ZpZGUgYW4gaW5pdGlhbCB2YWx1ZSwgaXQgc3RhcnRzIHdpdGggdGhhdC5cbiAqIElmIG5vdCwgaXQgdXNlcyB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYXJyYXkgYW5kIGJlZ2lucyB3aXRoIHRoZSBzZWNvbmQgZWxlbWVudCBmb3IgdGhlIGNhbGN1bGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7cmVhZG9ubHkgVFtdfSBjb2xsZWN0aW9uIC0gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoYWNjdW11bGF0b3I6IFQsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiByZWFkb25seSBUW10pID0+IFR9IGl0ZXJhdGVlIC0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtUfSAtIFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBhcnJheUxpa2UgPSBbMSwgMiwgM107XG4gKiByZWR1Y2UoYXJyYXlMaWtlLCAoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUpOyAvLyA9PiA2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2U8VD4oXG4gIGNvbGxlY3Rpb246IHJlYWRvbmx5IFRbXSxcbiAgaXRlcmF0ZWU6IChhY2N1bXVsYXRvcjogVCwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIsIGNvbGxlY3Rpb246IHJlYWRvbmx5IFRbXSkgPT4gVFxuKTogVDtcblxuLyoqXG4gKiBSZWR1Y2VzIGFuIGFycmF5IHRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uLlxuICpcbiAqIFRoZSBgcmVkdWNlKClgIGZ1bmN0aW9uIGdvZXMgdGhyb3VnaCBlYWNoIGVsZW1lbnQgaW4gYW4gYXJyYXkgYW5kIGFwcGxpZXMgYSBzcGVjaWFsIGZ1bmN0aW9uIChjYWxsZWQgYSBcInJlZHVjZXJcIikgdG8gdGhlbSwgb25lIGJ5IG9uZS5cbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgdGhlIHJlc3VsdCBvZiB0aGUgcHJldmlvdXMgc3RlcCBhbmQgdGhlIGN1cnJlbnQgZWxlbWVudCB0byBwZXJmb3JtIGEgY2FsY3VsYXRpb24uXG4gKiBBZnRlciBnb2luZyB0aHJvdWdoIGFsbCB0aGUgZWxlbWVudHMsIHRoZSBmdW5jdGlvbiBnaXZlcyB5b3Ugb25lIGZpbmFsIHJlc3VsdC5cbiAqXG4gKiBXaGVuIHRoZSBgcmVkdWNlKClgIGZ1bmN0aW9uIHN0YXJ0cywgdGhlcmUncyBubyBwcmV2aW91cyByZXN1bHQgdG8gdXNlLlxuICogSWYgeW91IHByb3ZpZGUgYW4gaW5pdGlhbCB2YWx1ZSwgaXQgc3RhcnRzIHdpdGggdGhhdC5cbiAqIElmIG5vdCwgaXQgdXNlcyB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYXJyYXkgYW5kIGJlZ2lucyB3aXRoIHRoZSBzZWNvbmQgZWxlbWVudCBmb3IgdGhlIGNhbGN1bGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7QXJyYXlMaWtlPFQ+fSBjb2xsZWN0aW9uIC0gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoYWNjdW11bGF0b3I6IFUsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiBBcnJheUxpa2U8VD4pID0+IFV9IGl0ZXJhdGVlIC0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7VX0gaW5pdGlhbFZhbHVlIC0gVGhlIGluaXRpYWwgdmFsdWUuXG4gKiBAcmV0dXJucyB7VX0gLSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgYXJyYXlMaWtlID0gezA6IDEsIDE6IDIsIDI6IDMsIGxlbmd0aDogM307XG4gKiByZWR1Y2UoYXJyYXlMaWtlLCAoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUgJSAyID09PSAwLCB0cnVlKTsgLy8gPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxULCBVPihcbiAgY29sbGVjdGlvbjogQXJyYXlMaWtlPFQ+LFxuICBpdGVyYXRlZTogKGFjY3VtdWxhdG9yOiBVLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgY29sbGVjdGlvbjogQXJyYXlMaWtlPFQ+KSA9PiBVLFxuICBpbml0aWFsVmFsdWU6IFVcbik6IFU7XG5cbi8qKlxuICogUmVkdWNlcyBhbiBhcnJheSB0byBhIHNpbmdsZSB2YWx1ZSB1c2luZyBhbiBpdGVyYXRlZSBmdW5jdGlvbi5cbiAqXG4gKiBUaGUgYHJlZHVjZSgpYCBmdW5jdGlvbiBnb2VzIHRocm91Z2ggZWFjaCBlbGVtZW50IGluIGFuIGFycmF5IGFuZCBhcHBsaWVzIGEgc3BlY2lhbCBmdW5jdGlvbiAoY2FsbGVkIGEgXCJyZWR1Y2VyXCIpIHRvIHRoZW0sIG9uZSBieSBvbmUuXG4gKiBUaGlzIGZ1bmN0aW9uIHRha2VzIHRoZSByZXN1bHQgb2YgdGhlIHByZXZpb3VzIHN0ZXAgYW5kIHRoZSBjdXJyZW50IGVsZW1lbnQgdG8gcGVyZm9ybSBhIGNhbGN1bGF0aW9uLlxuICogQWZ0ZXIgZ29pbmcgdGhyb3VnaCBhbGwgdGhlIGVsZW1lbnRzLCB0aGUgZnVuY3Rpb24gZ2l2ZXMgeW91IG9uZSBmaW5hbCByZXN1bHQuXG4gKlxuICogV2hlbiB0aGUgYHJlZHVjZSgpYCBmdW5jdGlvbiBzdGFydHMsIHRoZXJlJ3Mgbm8gcHJldmlvdXMgcmVzdWx0IHRvIHVzZS5cbiAqIElmIHlvdSBwcm92aWRlIGFuIGluaXRpYWwgdmFsdWUsIGl0IHN0YXJ0cyB3aXRoIHRoYXQuXG4gKiBJZiBub3QsIGl0IHVzZXMgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGFycmF5IGFuZCBiZWdpbnMgd2l0aCB0aGUgc2Vjb25kIGVsZW1lbnQgZm9yIHRoZSBjYWxjdWxhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5TGlrZTxUPn0gY29sbGVjdGlvbiAtIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7KGFjY3VtdWxhdG9yOiBVLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgY29sbGVjdGlvbjogQXJyYXlMaWtlPFQ+KSA9PiBVfSBpdGVyYXRlZSAtIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7VH0gLSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgYXJyYXlMaWtlID0gezA6IDEsIDE6IDIsIDI6IDMsIGxlbmd0aDogM307XG4gKiByZWR1Y2UoYXJyYXlMaWtlLCAoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUpOyAvLyA9PiA2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2U8VD4oXG4gIGNvbGxlY3Rpb246IEFycmF5TGlrZTxUPixcbiAgaXRlcmF0ZWU6IChhY2N1bXVsYXRvcjogVCwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIsIGNvbGxlY3Rpb246IEFycmF5TGlrZTxUPikgPT4gVFxuKTogVDtcblxuLyoqXG4gKiBSZWR1Y2VzIGFuIG9iamVjdCB0byBhIHNpbmdsZSB2YWx1ZSB1c2luZyBhbiBpdGVyYXRlZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1R9IGNvbGxlY3Rpb24gLSBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7KGFjY3VtdWxhdG9yOiBVLCB2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBzdHJpbmcsIGNvbGxlY3Rpb246IFQpID0+IFV9IGl0ZXJhdGVlIC0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7VX0gaW5pdGlhbFZhbHVlIC0gVGhlIGluaXRpYWwgdmFsdWUuXG4gKiBAcmV0dXJucyB7VX0gLSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3Qgb2JqID0geyBhOiAxLCBiOiAyLCBjOiAzIH07XG4gKiByZWR1Y2Uob2JqLCAoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUgJSAyID09PSAwLCB0cnVlKTsgLy8gPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxUIGV4dGVuZHMgb2JqZWN0LCBVPihcbiAgY29sbGVjdGlvbjogVCxcbiAgaXRlcmF0ZWU6IChhY2N1bXVsYXRvcjogVSwgdmFsdWU6IFRba2V5b2YgVF0sIGtleToga2V5b2YgVCwgY29sbGVjdGlvbjogVCkgPT4gVSxcbiAgaW5pdGlhbFZhbHVlOiBVXG4pOiBVO1xuXG4vKipcbiAqIFJlZHVjZXMgYW4gb2JqZWN0IHRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7VH0gY29sbGVjdGlvbiAtIFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoYWNjdW11bGF0b3I6IFRba2V5b2YgVF0sIHZhbHVlOiBUW2tleW9mIFRdLCBrZXk6IGtleW9mIFQsIGNvbGxlY3Rpb246IFQpID0+IFV9IGl0ZXJhdGVlIC0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtUW2tleW9mIFRdfSAtIFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBvYmogPSB7IGE6IDEsIGI6IDIsIGM6IDMgfTtcbiAqIHJlZHVjZShvYmosIChhY2MsIHZhbHVlKSA9PiBhY2MgKyB2YWx1ZSk7IC8vID0+IDZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxUIGV4dGVuZHMgb2JqZWN0PihcbiAgY29sbGVjdGlvbjogVCxcbiAgaXRlcmF0ZWU6IChhY2N1bXVsYXRvcjogVFtrZXlvZiBUXSwgdmFsdWU6IFRba2V5b2YgVF0sIGtleToga2V5b2YgVCwgY29sbGVjdGlvbjogVCkgPT4gVFtrZXlvZiBUXVxuKTogVFtrZXlvZiBUXTtcblxuLyoqXG4gKiBSZWR1Y2VzIGEgY29sbGVjdGlvbiB0byBhIHNpbmdsZSB2YWx1ZSB1c2luZyBhbiBpdGVyYXRlZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1RbXSB8IEFycmF5TGlrZTxUPiB8IFJlY29yZDxzdHJpbmcsIFQ+IHwgbnVsbCB8IHVuZGVmaW5lZH0gY29sbGVjdGlvbiAtIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7KChhY2N1bXVsYXRvcjogYW55LCB2YWx1ZTogYW55LCBpbmRleDogUHJvcGVydHlLZXksIGNvbGxlY3Rpb246IGFueSkgPT4gYW55KSB8IFByb3BlcnR5S2V5IHwgb2JqZWN0fSBpdGVyYXRlZSAtIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24gb3IgdGhlIGtleSB0byByZWR1Y2Ugb3Zlci5cbiAqIEBwYXJhbSB7YW55fSBpbml0aWFsVmFsdWUgLSBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAqIEByZXR1cm5zIHthbnl9IC0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFVzaW5nIGEgcmVkdWNlciBmdW5jdGlvblxuICogY29uc3QgYXJyYXkgPSBbMSwgMiwgM107XG4gKiByZWR1Y2UoYXJyYXksIChhY2MsIHZhbHVlKSA9PiBhY2MgKyB2YWx1ZSwgMCk7IC8vID0+IDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVXNpbmcgYSByZWR1Y2VyIGZ1bmN0aW9uIHdpdGggaW5pdGlhbFZhbHVlXG4gKiBjb25zdCBhcnJheSA9IFsxLCAyLCAzXTtcbiAqIHJlZHVjZShhcnJheSwgKGFjYywgdmFsdWUpID0+IGFjYyArIHZhbHVlICUgMiA9PT0gMCwgdHJ1ZSk7IC8vID0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFVzaW5nIGFuIG9iamVjdCBhcyB0aGUgY29sbGVjdGlvblxuICogY29uc3Qgb2JqID0geyBhOiAxLCBiOiAyLCBjOiAzIH07XG4gKiByZWR1Y2Uob2JqLCAoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUsIDApOyAvLyA9PiA2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2UoXG4gIGNvbGxlY3Rpb246IEFycmF5TGlrZTxhbnk+IHwgUmVjb3JkPGFueSwgYW55PiB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGl0ZXJhdGVlOiAoYWNjdW11bGF0b3I6IGFueSwgdmFsdWU6IGFueSwgaW5kZXg6IGFueSwgY29sbGVjdGlvbjogYW55KSA9PiBhbnkgPSBpZGVudGl0eSxcbiAgYWNjdW11bGF0b3I/OiBhbnlcbik6IGFueSB7XG4gIGlmICghY29sbGVjdGlvbikge1xuICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgfVxuXG4gIGxldCBrZXlzOiBhbnlbXTtcbiAgbGV0IHN0YXJ0SW5kZXggPSAwO1xuXG4gIGlmIChpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkge1xuICAgIGtleXMgPSByYW5nZSgwLCBjb2xsZWN0aW9uLmxlbmd0aCk7XG5cbiAgICBpZiAoYWNjdW11bGF0b3IgPT0gbnVsbCAmJiBjb2xsZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgIGFjY3VtdWxhdG9yID0gY29sbGVjdGlvblswXTtcbiAgICAgIHN0YXJ0SW5kZXggKz0gMTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAga2V5cyA9IE9iamVjdC5rZXlzKGNvbGxlY3Rpb24pO1xuXG4gICAgaWYgKGFjY3VtdWxhdG9yID09IG51bGwpIHtcbiAgICAgIGFjY3VtdWxhdG9yID0gKGNvbGxlY3Rpb24gYXMgYW55KVtrZXlzWzBdXTtcbiAgICAgIHN0YXJ0SW5kZXggKz0gMTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgIGNvbnN0IHZhbHVlID0gKGNvbGxlY3Rpb24gYXMgYW55KVtrZXldO1xuXG4gICAgYWNjdW11bGF0b3IgPSBpdGVyYXRlZShhY2N1bXVsYXRvciwgdmFsdWUsIGtleSwgY29sbGVjdGlvbik7XG4gIH1cblxuICByZXR1cm4gYWNjdW11bGF0b3I7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxRQUFRLFFBQVEsNkJBQTZCO0FBQ3RELFNBQVMsS0FBSyxRQUFRLHNCQUFzQjtBQUM1QyxTQUFTLFdBQVcsUUFBUSw4QkFBOEI7QUF3STFEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBc0JDLEdBQ0QsT0FBTyxTQUFTLE9BQ2QsVUFBZ0UsRUFDaEUsV0FBK0UsUUFBUSxFQUN2RixXQUFpQjtFQUVqQixJQUFJLENBQUMsWUFBWTtJQUNmLE9BQU87RUFDVDtFQUVBLElBQUk7RUFDSixJQUFJLGFBQWE7RUFFakIsSUFBSSxZQUFZLGFBQWE7SUFDM0IsT0FBTyxNQUFNLEdBQUcsV0FBVyxNQUFNO0lBRWpDLElBQUksZUFBZSxRQUFRLFdBQVcsTUFBTSxHQUFHLEdBQUc7TUFDaEQsY0FBYyxVQUFVLENBQUMsRUFBRTtNQUMzQixjQUFjO0lBQ2hCO0VBQ0YsT0FBTztJQUNMLE9BQU8sT0FBTyxJQUFJLENBQUM7SUFFbkIsSUFBSSxlQUFlLE1BQU07TUFDdkIsY0FBYyxBQUFDLFVBQWtCLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztNQUMxQyxjQUFjO0lBQ2hCO0VBQ0Y7RUFFQSxJQUFLLElBQUksSUFBSSxZQUFZLElBQUksS0FBSyxNQUFNLEVBQUUsSUFBSztJQUM3QyxNQUFNLE1BQU0sSUFBSSxDQUFDLEVBQUU7SUFDbkIsTUFBTSxRQUFRLEFBQUMsVUFBa0IsQ0FBQyxJQUFJO0lBRXRDLGNBQWMsU0FBUyxhQUFhLE9BQU8sS0FBSztFQUNsRDtFQUVBLE9BQU87QUFDVCJ9
// denoCacheMetadata=5397612190611165385,16848547937854791281