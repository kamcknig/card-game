import { keysIn } from './keysIn.ts';

/**
 * Retrieves the values from an object, including those inherited from its prototype.
 *
 * - If the value is not an object, it is converted to an object.
 * - Array-like objects are treated like arrays.
 * - Sparse arrays with some missing indices are treated like dense arrays.
 * - If the value is `null` or `undefined`, an empty array is returned.
 * - When handling prototype objects, the `constructor` property is excluded from the results.
 *
 * @param {Record<PropertyKey, T> | null | undefined} object The object to query.
 * @returns {T[]} Returns an array of property values.
 * @example
 * const object = { a: 1, b: 2 };
 * valuesIn(object); // => [1, 2]
 *
 * const arr = [1, 2, 3];
 * valuesIn(arr); // => [1, 2, 3]
 *
 * function Foo() {
 *   this.a = 1;
 * }
 * Foo.prototype.b = 2;
 * const foo = new Foo();
 * valuesIn(foo); // => [1] (includes inherited properties)
 *
 * const objWithLength = { 0: 'a', 1: 'b', length: 2 };
 * valuesIn(objWithLength); // => ['a', 'b', 2]
 */
export function valuesIn<T>(object: Record<PropertyKey, T> | null | undefined): T[];

/**
 * Retrieves the values from an object, including those inherited from its prototype.
 *
 * - If the value is not an object, it is converted to an object.
 * - Array-like objects are treated like arrays.
 * - Sparse arrays with some missing indices are treated like dense arrays.
 * - If the value is `null` or `undefined`, an empty array is returned.
 * - When handling prototype objects, the `constructor` property is excluded from the results.
 *
 * @param {ArrayLike<T>} arr The array or array-like object to query.
 * @returns {T[]} Returns an array of values.
 * @example
 * const arrayLike = { 0: 'a', 1: 'b', length: 2 };
 * valuesIn(arrayLike); // => ['a', 'b']
 */
export function valuesIn<T>(arr: ArrayLike<T>): T[];

/**
 * Retrieves the values from an object, including those inherited from its prototype.
 *
 * - If the value is not an object, it is converted to an object.
 * - Array-like objects are treated like arrays.
 * - Sparse arrays with some missing indices are treated like dense arrays.
 * - If the value is `null` or `undefined`, an empty array is returned.
 * - When handling prototype objects, the `constructor` property is excluded from the results.
 *
 * @param {T | null | undefined} object The object to query.
 * @returns {Array<T[keyof T]>} Returns an array of property values.
 * @example
 * const obj = { x: 1, y: 2, z: 3 };
 * valuesIn(obj); // => [1, 2, 3]
 */
export function valuesIn<T extends object>(object: T | null | undefined): Array<T[keyof T]>;

/**
 * Retrieves the values from an object, including those inherited from its prototype.
 *
 * - If the value is not an object, it is converted to an object.
 * - Array-like objects are treated like arrays.
 * - Sparse arrays with some missing indices are treated like dense arrays.
 * - If the value is `null` or `undefined`, an empty array is returned.
 * - When handling prototype objects, the `constructor` property is excluded from the results.
 *
 * @param {any} object The object to query.
 * @returns {any[]} Returns an array of property values.
 * @example
 * const obj = { a: 1, b: 2, c: 3 };
 * valuesIn(obj); // => [1, 2, 3]
 */
export function valuesIn(object: any): any[] {
  const keys = keysIn(object);
  const result: any[] = new Array(keys.length);

  for (let i = 0; i < keys.length; i++) {
    const key = keys[i];
    result[i] = object[key];
  }

  return result;
}

// denoCacheMetadata={"headers":{"x-jsr-cache-status":"revalidated","access-control-allow-origin":"*","x-goog-stored-content-encoding":"identity","via":"1.1 google","x-robots-tag":"noindex","x-goog-generation":"1741509575101599","x-goog-stored-content-length":"3512","expires":"Fri, 26 Jun 2026 21:45:35 GMT","cache-control":"public, max-age=31536000, immutable","x-content-type-options":"nosniff","access-control-expose-headers":"*","date":"Thu, 26 Jun 2025 21:45:35 GMT","cross-origin-resource-policy":"cross-origin","x-jsr-cache-id":"ATL","etag":"\"9bd38d1ff527dae50898821c81471dad\"","accept-ranges":"bytes","alt-svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","last-modified":"Sun, 09 Mar 2025 08:39:35 GMT","x-goog-storage-class":"STANDARD","age":"0","x-goog-metageneration":"1","x-goog-hash":"crc32c=g7c7bg==,md5=m9ONH/Un2uUImIIcgUcdrQ==","content-type":"text/typescript","x-guploader-uploadid":"ABgVH8_BwkaEkQC0kKcyTxS1hdMyrU3xvYX1HSxqlsqkedcR19ts4R1Z5ALhNSGvp5q323jT1cddz1U","server":"UploadServer","content-length":"3512","content-security-policy":"default-src 'none'; script-src 'none'; style-src 'none'; img-src 'none'; font-src 'none'; connect-src 'none'; frame-src 'none'; object-src 'none'; frame-ancestors 'none'; sandbox; form-action 'none';"},"url":"https://jsr.io/@es-toolkit/es-toolkit/1.33.0/src/compat/object/valuesIn.ts","time":1750974334}