import { identity } from '../../function/identity.ts';
import { range } from '../../math/range.ts';
import { isArrayLike } from '../predicate/isArrayLike.ts';
/**
 * Reduces a collection to a single value using an iteratee function, starting from the right.
 *
 * @param {T[] | ArrayLike<T> | Record<string, T> | null | undefined} collection - The collection to iterate over.
 * @param {((accumulator: any, value: any, index: PropertyKey, collection: any) => any) | PropertyKey | object} iteratee - The function invoked per iteration or the key to reduce over.
 * @param {any} initialValue - The initial value.
 * @returns {any} - Returns the accumulated value.
 *
 * @example
 * // Using a reducer function
 * const array = [1, 2, 3];
 * reduceRight(array, (acc, value) => acc + value, 0); // => 6
 *
 * @example
 * // Using a reducer function with initialValue
 * const array = [1, 2, 3];
 * reduceRight(array, (acc, value) => acc + value % 2 === 0, true); // => false
 *
 * @example
 * // Using an object as the collection
 * const obj = { a: 1, b: 2, c: 3 };
 * reduceRight(obj, (acc, value) => acc + value, 0); // => 6
 */ export function reduceRight(collection, iteratee = identity, accumulator) {
  if (!collection) {
    return accumulator;
  }
  let keys;
  let startIndex;
  if (isArrayLike(collection)) {
    keys = range(0, collection.length).reverse();
    if (accumulator == null && collection.length > 0) {
      accumulator = collection[collection.length - 1];
      startIndex = 1;
    } else {
      startIndex = 0;
    }
  } else {
    keys = Object.keys(collection).reverse();
    if (accumulator == null) {
      accumulator = collection[keys[0]];
      startIndex = 1;
    } else {
      startIndex = 0;
    }
  }
  for(let i = startIndex; i < keys.length; i++){
    const key = keys[i];
    const value = collection[key];
    accumulator = iteratee(accumulator, value, key, collection);
  }
  return accumulator;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0Blcy10b29sa2l0L2VzLXRvb2xraXQvMS4zMy4wL3NyYy9jb21wYXQvYXJyYXkvcmVkdWNlUmlnaHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tICcuLi8uLi9mdW5jdGlvbi9pZGVudGl0eS50cyc7XG5pbXBvcnQgeyByYW5nZSB9IGZyb20gJy4uLy4uL21hdGgvcmFuZ2UudHMnO1xuaW1wb3J0IHsgaXNBcnJheUxpa2UgfSBmcm9tICcuLi9wcmVkaWNhdGUvaXNBcnJheUxpa2UudHMnO1xuXG4vKipcbiAqIFJlZHVjZXMgYW4gYXJyYXkgdG8gYSBzaW5nbGUgdmFsdWUgdXNpbmcgYW4gaXRlcmF0ZWUgZnVuY3Rpb24sIHN0YXJ0aW5nIGZyb20gdGhlIHJpZ2h0LlxuICpcbiAqIFRoZSBgcmVkdWNlUmlnaHQoKWAgZnVuY3Rpb24gZ29lcyB0aHJvdWdoIGVhY2ggZWxlbWVudCBpbiBhbiBhcnJheSBmcm9tIHJpZ2h0IHRvIGxlZnQgYW5kIGFwcGxpZXMgYSBzcGVjaWFsIGZ1bmN0aW9uIChjYWxsZWQgYSBcInJlZHVjZXJcIikgdG8gdGhlbSwgb25lIGJ5IG9uZS5cbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgdGhlIHJlc3VsdCBvZiB0aGUgcHJldmlvdXMgc3RlcCBhbmQgdGhlIGN1cnJlbnQgZWxlbWVudCB0byBwZXJmb3JtIGEgY2FsY3VsYXRpb24uXG4gKiBBZnRlciBnb2luZyB0aHJvdWdoIGFsbCB0aGUgZWxlbWVudHMsIHRoZSBmdW5jdGlvbiBnaXZlcyB5b3Ugb25lIGZpbmFsIHJlc3VsdC5cbiAqXG4gKiBXaGVuIHRoZSBgcmVkdWNlUmlnaHQoKWAgZnVuY3Rpb24gc3RhcnRzLCB0aGVyZSdzIG5vIHByZXZpb3VzIHJlc3VsdCB0byB1c2UuXG4gKiBJZiB5b3UgcHJvdmlkZSBhbiBpbml0aWFsIHZhbHVlLCBpdCBzdGFydHMgd2l0aCB0aGF0LlxuICogSWYgbm90LCBpdCB1c2VzIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGFycmF5IGFuZCBiZWdpbnMgd2l0aCB0aGUgc2Vjb25kIHRvIGxhc3QgZWxlbWVudCBmb3IgdGhlIGNhbGN1bGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7cmVhZG9ubHkgVFtdfSBjb2xsZWN0aW9uIC0gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoYWNjdW11bGF0b3I6IFUsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiByZWFkb25seSBUW10pID0+IFV9IGl0ZXJhdGVlIC0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7VX0gaW5pdGlhbFZhbHVlIC0gVGhlIGluaXRpYWwgdmFsdWUuXG4gKiBAcmV0dXJucyB7VX0gLSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgYXJyYXlMaWtlID0gWzEsIDIsIDNdO1xuICogcmVkdWNlUmlnaHQoYXJyYXlMaWtlLCAoYWNjLCB2YWx1ZSkgPT4gYWNjICYmIHZhbHVlICUgMiA9PT0gMCwgdHJ1ZSk7IC8vID0+IGZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodDxULCBVPihcbiAgY29sbGVjdGlvbjogcmVhZG9ubHkgVFtdLFxuICBpdGVyYXRlZTogKGFjY3VtdWxhdG9yOiBVLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgY29sbGVjdGlvbjogcmVhZG9ubHkgVFtdKSA9PiBVLFxuICBpbml0aWFsVmFsdWU6IFVcbik6IFU7XG5cbi8qKlxuICogUmVkdWNlcyBhbiBhcnJheSB0byBhIHNpbmdsZSB2YWx1ZSB1c2luZyBhbiBpdGVyYXRlZSBmdW5jdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgcmlnaHQuXG4gKlxuICogVGhlIGByZWR1Y2VSaWdodCgpYCBmdW5jdGlvbiBnb2VzIHRocm91Z2ggZWFjaCBlbGVtZW50IGluIGFuIGFycmF5IGZyb20gcmlnaHQgdG8gbGVmdCBhbmQgYXBwbGllcyBhIHNwZWNpYWwgZnVuY3Rpb24gKGNhbGxlZCBhIFwicmVkdWNlclwiKSB0byB0aGVtLCBvbmUgYnkgb25lLlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyB0aGUgcmVzdWx0IG9mIHRoZSBwcmV2aW91cyBzdGVwIGFuZCB0aGUgY3VycmVudCBlbGVtZW50IHRvIHBlcmZvcm0gYSBjYWxjdWxhdGlvbi5cbiAqIEFmdGVyIGdvaW5nIHRocm91Z2ggYWxsIHRoZSBlbGVtZW50cywgdGhlIGZ1bmN0aW9uIGdpdmVzIHlvdSBvbmUgZmluYWwgcmVzdWx0LlxuICpcbiAqIFdoZW4gdGhlIGByZWR1Y2VSaWdodCgpYCBmdW5jdGlvbiBzdGFydHMsIHRoZXJlJ3Mgbm8gcHJldmlvdXMgcmVzdWx0IHRvIHVzZS5cbiAqIElmIHlvdSBwcm92aWRlIGFuIGluaXRpYWwgdmFsdWUsIGl0IHN0YXJ0cyB3aXRoIHRoYXQuXG4gKiBJZiBub3QsIGl0IHVzZXMgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgYXJyYXkgYW5kIGJlZ2lucyB3aXRoIHRoZSBzZWNvbmQgdG8gbGFzdCBlbGVtZW50IGZvciB0aGUgY2FsY3VsYXRpb24uXG4gKlxuICogQHBhcmFtIHtyZWFkb25seSBUW119IGNvbGxlY3Rpb24gLSBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0geyhhY2N1bXVsYXRvcjogVCwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIsIGNvbGxlY3Rpb246IHJlYWRvbmx5IFRbXSkgPT4gVH0gaXRlcmF0ZWUgLSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge1R9IC0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IGFycmF5TGlrZSA9IFsxLCAyLCAzXTtcbiAqIHJlZHVjZVJpZ2h0KGFycmF5TGlrZSwgKGFjYywgdmFsdWUpID0+IGFjYyArIHZhbHVlKTsgLy8gPT4gNlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlUmlnaHQ8VD4oXG4gIGNvbGxlY3Rpb246IHJlYWRvbmx5IFRbXSxcbiAgaXRlcmF0ZWU6IChhY2N1bXVsYXRvcjogVCwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIsIGNvbGxlY3Rpb246IHJlYWRvbmx5IFRbXSkgPT4gVFxuKTogVDtcblxuLyoqXG4gKiBSZWR1Y2VzIGFuIGFycmF5IHRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uLCBzdGFydGluZyBmcm9tIHRoZSByaWdodC5cbiAqXG4gKiBUaGUgYHJlZHVjZVJpZ2h0KClgIGZ1bmN0aW9uIGdvZXMgdGhyb3VnaCBlYWNoIGVsZW1lbnQgaW4gYW4gYXJyYXkgZnJvbSByaWdodCB0byBsZWZ0IGFuZCBhcHBsaWVzIGEgc3BlY2lhbCBmdW5jdGlvbiAoY2FsbGVkIGEgXCJyZWR1Y2VyXCIpIHRvIHRoZW0sIG9uZSBieSBvbmUuXG4gKiBUaGlzIGZ1bmN0aW9uIHRha2VzIHRoZSByZXN1bHQgb2YgdGhlIHByZXZpb3VzIHN0ZXAgYW5kIHRoZSBjdXJyZW50IGVsZW1lbnQgdG8gcGVyZm9ybSBhIGNhbGN1bGF0aW9uLlxuICogQWZ0ZXIgZ29pbmcgdGhyb3VnaCBhbGwgdGhlIGVsZW1lbnRzLCB0aGUgZnVuY3Rpb24gZ2l2ZXMgeW91IG9uZSBmaW5hbCByZXN1bHQuXG4gKlxuICogV2hlbiB0aGUgYHJlZHVjZVJpZ2h0KClgIGZ1bmN0aW9uIHN0YXJ0cywgdGhlcmUncyBubyBwcmV2aW91cyByZXN1bHQgdG8gdXNlLlxuICogSWYgeW91IHByb3ZpZGUgYW4gaW5pdGlhbCB2YWx1ZSwgaXQgc3RhcnRzIHdpdGggdGhhdC5cbiAqIElmIG5vdCwgaXQgdXNlcyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBhcnJheSBhbmQgYmVnaW5zIHdpdGggdGhlIHNlY29uZCB0byBsYXN0IGVsZW1lbnQgZm9yIHRoZSBjYWxjdWxhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5TGlrZTxUPn0gY29sbGVjdGlvbiAtIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7KGFjY3VtdWxhdG9yOiBVLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgY29sbGVjdGlvbjogQXJyYXlMaWtlPFQ+KSA9PiBVfSBpdGVyYXRlZSAtIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcGFyYW0ge1V9IGluaXRpYWxWYWx1ZSAtIFRoZSBpbml0aWFsIHZhbHVlLlxuICogQHJldHVybnMge1V9IC0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IGFycmF5TGlrZSA9IHswOiAxLCAxOiAyLCAyOiAzLCBsZW5ndGg6IDN9O1xuICogcmVkdWNlUmlnaHQoYXJyYXlMaWtlLCAoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUgJSAyID09PSAwLCB0cnVlKTsgLy8gPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0PFQsIFU+KFxuICBjb2xsZWN0aW9uOiBBcnJheUxpa2U8VD4sXG4gIGl0ZXJhdGVlOiAoYWNjdW11bGF0b3I6IFUsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiBBcnJheUxpa2U8VD4pID0+IFUsXG4gIGluaXRpYWxWYWx1ZTogVVxuKTogVTtcblxuLyoqXG4gKiBSZWR1Y2VzIGFuIGFycmF5IHRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uLCBzdGFydGluZyBmcm9tIHRoZSByaWdodC5cbiAqXG4gKiBUaGUgYHJlZHVjZVJpZ2h0KClgIGZ1bmN0aW9uIGdvZXMgdGhyb3VnaCBlYWNoIGVsZW1lbnQgaW4gYW4gYXJyYXkgZnJvbSByaWdodCB0byBsZWZ0IGFuZCBhcHBsaWVzIGEgc3BlY2lhbCBmdW5jdGlvbiAoY2FsbGVkIGEgXCJyZWR1Y2VyXCIpIHRvIHRoZW0sIG9uZSBieSBvbmUuXG4gKiBUaGlzIGZ1bmN0aW9uIHRha2VzIHRoZSByZXN1bHQgb2YgdGhlIHByZXZpb3VzIHN0ZXAgYW5kIHRoZSBjdXJyZW50IGVsZW1lbnQgdG8gcGVyZm9ybSBhIGNhbGN1bGF0aW9uLlxuICogQWZ0ZXIgZ29pbmcgdGhyb3VnaCBhbGwgdGhlIGVsZW1lbnRzLCB0aGUgZnVuY3Rpb24gZ2l2ZXMgeW91IG9uZSBmaW5hbCByZXN1bHQuXG4gKlxuICogV2hlbiB0aGUgYHJlZHVjZVJpZ2h0KClgIGZ1bmN0aW9uIHN0YXJ0cywgdGhlcmUncyBubyBwcmV2aW91cyByZXN1bHQgdG8gdXNlLlxuICogSWYgeW91IHByb3ZpZGUgYW4gaW5pdGlhbCB2YWx1ZSwgaXQgc3RhcnRzIHdpdGggdGhhdC5cbiAqIElmIG5vdCwgaXQgdXNlcyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBhcnJheSBhbmQgYmVnaW5zIHdpdGggdGhlIHNlY29uZCB0byBsYXN0IGVsZW1lbnQgZm9yIHRoZSBjYWxjdWxhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5TGlrZTxUPn0gY29sbGVjdGlvbiAtIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7KGFjY3VtdWxhdG9yOiBVLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgY29sbGVjdGlvbjogQXJyYXlMaWtlPFQ+KSA9PiBVfSBpdGVyYXRlZSAtIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7VH0gLSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgYXJyYXlMaWtlID0gezA6IDEsIDE6IDIsIDI6IDMsIGxlbmd0aDogM307XG4gKiByZWR1Y2VSaWdodChhcnJheUxpa2UsIChhY2MsIHZhbHVlKSA9PiBhY2MgKyB2YWx1ZSk7IC8vID0+IDZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0PFQ+KFxuICBjb2xsZWN0aW9uOiBBcnJheUxpa2U8VD4sXG4gIGl0ZXJhdGVlOiAoYWNjdW11bGF0b3I6IFQsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBjb2xsZWN0aW9uOiBBcnJheUxpa2U8VD4pID0+IFRcbik6IFQ7XG5cbi8qKlxuICogUmVkdWNlcyBhbiBvYmplY3QgdG8gYSBzaW5nbGUgdmFsdWUgdXNpbmcgYW4gaXRlcmF0ZWUgZnVuY3Rpb24sIHN0YXJ0aW5nIGZyb20gdGhlIHJpZ2h0LlxuICpcbiAqIEBwYXJhbSB7VH0gY29sbGVjdGlvbiAtIFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHsoYWNjdW11bGF0b3I6IFUsIHZhbHVlOiBUW2tleW9mIFRdLCBrZXk6IHN0cmluZywgY29sbGVjdGlvbjogVCkgPT4gVX0gaXRlcmF0ZWUgLSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHtVfSBpbml0aWFsVmFsdWUgLSBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAqIEByZXR1cm5zIHtVfSAtIFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBvYmogPSB7IGE6IDEsIGI6IDIsIGM6IDMgfTtcbiAqIHJlZHVjZVJpZ2h0KG9iaiwgKGFjYywgdmFsdWUpID0+IGFjYyArIHZhbHVlICUgMiA9PT0gMCwgdHJ1ZSk7IC8vID0+IGZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodDxUIGV4dGVuZHMgb2JqZWN0LCBVPihcbiAgY29sbGVjdGlvbjogVCxcbiAgaXRlcmF0ZWU6IChhY2N1bXVsYXRvcjogVSwgdmFsdWU6IFRba2V5b2YgVF0sIGtleToga2V5b2YgVCwgY29sbGVjdGlvbjogVCkgPT4gVSxcbiAgaW5pdGlhbFZhbHVlOiBVXG4pOiBVO1xuXG4vKipcbiAqIFJlZHVjZXMgYW4gb2JqZWN0IHRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uLCBzdGFydGluZyBmcm9tIHRoZSByaWdodC5cbiAqXG4gKiBAcGFyYW0ge1R9IGNvbGxlY3Rpb24gLSBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7KGFjY3VtdWxhdG9yOiBUW2tleW9mIFRdLCB2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBrZXlvZiBULCBjb2xsZWN0aW9uOiBUKSA9PiBVfSBpdGVyYXRlZSAtIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7VFtrZXlvZiBUXX0gLSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3Qgb2JqID0geyBhOiAxLCBiOiAyLCBjOiAzIH07XG4gKiByZWR1Y2VSaWdodChvYmosIChhY2MsIHZhbHVlKSA9PiBhY2MgKyB2YWx1ZSk7IC8vID0+IDZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0PFQgZXh0ZW5kcyBvYmplY3Q+KFxuICBjb2xsZWN0aW9uOiBULFxuICBpdGVyYXRlZTogKGFjY3VtdWxhdG9yOiBUW2tleW9mIFRdLCB2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBrZXlvZiBULCBjb2xsZWN0aW9uOiBUKSA9PiBUW2tleW9mIFRdXG4pOiBUW2tleW9mIFRdO1xuXG4vKipcbiAqIFJlZHVjZXMgYSBjb2xsZWN0aW9uIHRvIGEgc2luZ2xlIHZhbHVlIHVzaW5nIGFuIGl0ZXJhdGVlIGZ1bmN0aW9uLCBzdGFydGluZyBmcm9tIHRoZSByaWdodC5cbiAqXG4gKiBAcGFyYW0ge1RbXSB8IEFycmF5TGlrZTxUPiB8IFJlY29yZDxzdHJpbmcsIFQ+IHwgbnVsbCB8IHVuZGVmaW5lZH0gY29sbGVjdGlvbiAtIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7KChhY2N1bXVsYXRvcjogYW55LCB2YWx1ZTogYW55LCBpbmRleDogUHJvcGVydHlLZXksIGNvbGxlY3Rpb246IGFueSkgPT4gYW55KSB8IFByb3BlcnR5S2V5IHwgb2JqZWN0fSBpdGVyYXRlZSAtIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24gb3IgdGhlIGtleSB0byByZWR1Y2Ugb3Zlci5cbiAqIEBwYXJhbSB7YW55fSBpbml0aWFsVmFsdWUgLSBUaGUgaW5pdGlhbCB2YWx1ZS5cbiAqIEByZXR1cm5zIHthbnl9IC0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFVzaW5nIGEgcmVkdWNlciBmdW5jdGlvblxuICogY29uc3QgYXJyYXkgPSBbMSwgMiwgM107XG4gKiByZWR1Y2VSaWdodChhcnJheSwgKGFjYywgdmFsdWUpID0+IGFjYyArIHZhbHVlLCAwKTsgLy8gPT4gNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBVc2luZyBhIHJlZHVjZXIgZnVuY3Rpb24gd2l0aCBpbml0aWFsVmFsdWVcbiAqIGNvbnN0IGFycmF5ID0gWzEsIDIsIDNdO1xuICogcmVkdWNlUmlnaHQoYXJyYXksIChhY2MsIHZhbHVlKSA9PiBhY2MgKyB2YWx1ZSAlIDIgPT09IDAsIHRydWUpOyAvLyA9PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBVc2luZyBhbiBvYmplY3QgYXMgdGhlIGNvbGxlY3Rpb25cbiAqIGNvbnN0IG9iaiA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xuICogcmVkdWNlUmlnaHQob2JqLCAoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUsIDApOyAvLyA9PiA2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VSaWdodChcbiAgY29sbGVjdGlvbjogQXJyYXlMaWtlPGFueT4gfCBSZWNvcmQ8YW55LCBhbnk+IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgaXRlcmF0ZWU6IChhY2N1bXVsYXRvcjogYW55LCB2YWx1ZTogYW55LCBpbmRleDogYW55LCBjb2xsZWN0aW9uOiBhbnkpID0+IGFueSA9IGlkZW50aXR5LFxuICBhY2N1bXVsYXRvcj86IGFueVxuKTogYW55IHtcbiAgaWYgKCFjb2xsZWN0aW9uKSB7XG4gICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICB9XG5cbiAgbGV0IGtleXM6IGFueVtdO1xuICBsZXQgc3RhcnRJbmRleDogbnVtYmVyO1xuXG4gIGlmIChpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkge1xuICAgIGtleXMgPSByYW5nZSgwLCBjb2xsZWN0aW9uLmxlbmd0aCkucmV2ZXJzZSgpO1xuXG4gICAgaWYgKGFjY3VtdWxhdG9yID09IG51bGwgJiYgY29sbGVjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICBhY2N1bXVsYXRvciA9IGNvbGxlY3Rpb25bY29sbGVjdGlvbi5sZW5ndGggLSAxXTtcbiAgICAgIHN0YXJ0SW5kZXggPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGFydEluZGV4ID0gMDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAga2V5cyA9IE9iamVjdC5rZXlzKGNvbGxlY3Rpb24pLnJldmVyc2UoKTtcblxuICAgIGlmIChhY2N1bXVsYXRvciA9PSBudWxsKSB7XG4gICAgICBhY2N1bXVsYXRvciA9IChjb2xsZWN0aW9uIGFzIGFueSlba2V5c1swXV07XG4gICAgICBzdGFydEluZGV4ID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRJbmRleCA9IDA7XG4gICAgfVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICBjb25zdCB2YWx1ZSA9IChjb2xsZWN0aW9uIGFzIGFueSlba2V5XTtcblxuICAgIGFjY3VtdWxhdG9yID0gaXRlcmF0ZWUoYWNjdW11bGF0b3IsIHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pO1xuICB9XG5cbiAgcmV0dXJuIGFjY3VtdWxhdG9yO1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQVMsUUFBUSxRQUFRLDZCQUE2QjtBQUN0RCxTQUFTLEtBQUssUUFBUSxzQkFBc0I7QUFDNUMsU0FBUyxXQUFXLFFBQVEsOEJBQThCO0FBd0kxRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXNCQyxHQUNELE9BQU8sU0FBUyxZQUNkLFVBQWdFLEVBQ2hFLFdBQStFLFFBQVEsRUFDdkYsV0FBaUI7RUFFakIsSUFBSSxDQUFDLFlBQVk7SUFDZixPQUFPO0VBQ1Q7RUFFQSxJQUFJO0VBQ0osSUFBSTtFQUVKLElBQUksWUFBWSxhQUFhO0lBQzNCLE9BQU8sTUFBTSxHQUFHLFdBQVcsTUFBTSxFQUFFLE9BQU87SUFFMUMsSUFBSSxlQUFlLFFBQVEsV0FBVyxNQUFNLEdBQUcsR0FBRztNQUNoRCxjQUFjLFVBQVUsQ0FBQyxXQUFXLE1BQU0sR0FBRyxFQUFFO01BQy9DLGFBQWE7SUFDZixPQUFPO01BQ0wsYUFBYTtJQUNmO0VBQ0YsT0FBTztJQUNMLE9BQU8sT0FBTyxJQUFJLENBQUMsWUFBWSxPQUFPO0lBRXRDLElBQUksZUFBZSxNQUFNO01BQ3ZCLGNBQWMsQUFBQyxVQUFrQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7TUFDMUMsYUFBYTtJQUNmLE9BQU87TUFDTCxhQUFhO0lBQ2Y7RUFDRjtFQUVBLElBQUssSUFBSSxJQUFJLFlBQVksSUFBSSxLQUFLLE1BQU0sRUFBRSxJQUFLO0lBQzdDLE1BQU0sTUFBTSxJQUFJLENBQUMsRUFBRTtJQUNuQixNQUFNLFFBQVEsQUFBQyxVQUFrQixDQUFDLElBQUk7SUFFdEMsY0FBYyxTQUFTLGFBQWEsT0FBTyxLQUFLO0VBQ2xEO0VBRUEsT0FBTztBQUNUIn0=
// denoCacheMetadata=14409607598713523073,2902569914801432568