var _computedKey, _computedKey1;
import { toNumber } from 'es-toolkit/compat';
/**
 * A base match configuration that can be used to spread default values.
 *
 * The `supply.baseCards` property contains all possible base supply card combinations for the number
 * of players in a given game.
 */ export const MatchBaseConfiguration = {
  numberOfKingdomPiles: 10,
  basicSupplyByPlayerCount: [
    {
      'province': 8,
      'duchy': 8,
      'estate': 8,
      'curse': 10,
      'gold': 30,
      'silver': 40,
      'copper': 60
    },
    {
      'province': 12,
      'duchy': 12,
      'estate': 12,
      'curse': 20,
      'gold': 30,
      'silver': 40,
      'copper': 60
    },
    {
      'province': 12,
      'duchy': 12,
      'estate': 12,
      'curse': 30,
      'gold': 30,
      'silver': 40,
      'copper': 60
    },
    {
      'province': 15,
      'duchy': 12,
      'estate': 12,
      'curse': 40,
      'gold': 60,
      'silver': 80,
      'copper': 120
    },
    {
      'province': 18,
      'duchy': 12,
      'estate': 12,
      'curse': 50,
      'gold': 60,
      'silver': 80,
      'copper': 120
    },
    {
      'province': 18,
      'duchy': 12,
      'estate': 12,
      'curse': 50,
      'gold': 60,
      'silver': 80,
      'copper': 120
    }
  ],
  playerStartingHand: {
    'copper': 7,
    'estate': 3
  },
  numberOfEventsAndOthers: 2
};
export function isSourceFindCardsFilter(filter) {
  return typeof filter === 'object' && filter !== null && 'location' in filter;
}
export function isCostFindCardsFilter(filter) {
  return typeof filter === 'object' && filter !== null && 'kind' in filter && 'playerId' in filter && 'amount' in filter;
}
export function isCardDataFindCardsFilter(filter) {
  return typeof filter === 'object' && filter !== null && ('tags' in filter || 'cardKeys' in filter || 'cardType' in filter || 'owner' in filter);
}
_computedKey = Symbol.for('Deno.customInspect');
export class ReactionTrigger {
  eventType;
  args;
  constructor(eventType, ...rest){
    this.eventType = eventType;
    this.args = rest[0] ?? undefined;
  }
  toString() {
    return `[TRIGGER ${this.eventType}]`;
  }
  // @ts-ignore
  [_computedKey]() {
    return this.toString();
  }
}
_computedKey1 = Symbol.for('Deno.customInspect');
export class Reaction {
  // a concatenation of the card key and card id with a '-'
  id;
  // the player's ID who owns this reaction - the one that can decide to do it.
  playerId;
  listeningFor;
  /**
   * Indicates the triggered effect only happens once for this particular instance of the reaction.
   *
   * @default false
   */ once = false;
  /**
   * Indicates that the triggered effect happens regardless of user choice.
   *
   * @default false
   */ compulsory = false;
  /**
   * Indicates that the triggered effect happens regardless of game state and user interaction.
   *
   * @default false
   */ system = false;
  /**
   * Indicates that the reaction can be used by multiple different instances of the same card.
   *
   * @default true
   */ allowMultipleInstances = true;
  extraData;
  // todo working on moat right now which has no condition other than it be an attack.
  // in the future we might need to define this condition method elsewhere such as
  // in the expansion's module? need to wait to see what kind of conditions there are i think
  condition;
  // todo defined in a map somewhere just like registered card effects. so maybe another export
  // from teh expansion module that defines what happens when you ccn react?
  triggeredEffectFn;
  constructor(arg){
    this.id = arg.id;
    this.playerId = arg.playerId;
    this.listeningFor = arg.listeningFor;
    this.condition = arg.condition ?? (()=>true);
    this.triggeredEffectFn = arg.triggeredEffectFn;
    this.once = arg.once ?? false;
    this.allowMultipleInstances = arg.allowMultipleInstances ?? true;
    this.compulsory = arg.compulsory ?? false;
    this.system = arg.system ?? false;
  }
  getBaseId() {
    return `${this.getSourceKey()}:${this.getSourceId()}`;
  }
  getSourceKey() {
    let out;
    try {
      out = this.id.split(':')?.[0];
      return out;
    } catch (e) {
      throw e;
    }
  }
  getSourceId() {
    let out;
    try {
      out = toNumber(this.id.split(':')?.[1]);
      return out;
    } catch (e) {
      throw e;
    }
  }
  toString() {
    return `[REACTION ${this.id} - owner {${this.playerId}}]`;
  }
  // @ts-ignore
  [_computedKey1]() {
    return this.toString();
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vYXBwL3NlcnZlci9zcmMvdHlwZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnc29ja2V0LmlvJztcclxuaW1wb3J0IHtcclxuICBDYXJkLFxyXG4gIENhcmRDb3N0LFxyXG4gIENhcmRJZCxcclxuICBDYXJkS2V5LCBDYXJkTGlrZUlkLFxyXG4gIENhcmRMb2NhdGlvbixcclxuICBDYXJkTG9jYXRpb25TcGVjLFxyXG4gIENhcmROb0lkLFxyXG4gIENhcmRUeXBlLFxyXG4gIENvbXB1dGVkTWF0Y2hDb25maWd1cmF0aW9uLFxyXG4gIENvc3RTcGVjLFxyXG4gIE1hdGNoLFxyXG4gIFBsYXllcklkLFxyXG4gIFNlbGVjdEFjdGlvbkNhcmRBcmdzLFxyXG4gIFNlcnZlckVtaXRFdmVudHMsXHJcbiAgU2VydmVyTGlzdGVuRXZlbnRzLFxyXG4gIFVzZXJQcm9tcHRBY3Rpb25BcmdzLFxyXG59IGZyb20gJ3NoYXJlZC9zaGFyZWQtdHlwZXMudHMnO1xyXG5pbXBvcnQgeyB0b051bWJlciB9IGZyb20gJ2VzLXRvb2xraXQvY29tcGF0JztcclxuXHJcbmltcG9ydCB7IE1hdGNoQ2FyZExpYnJhcnkgfSBmcm9tICcuL2NvcmUvbWF0Y2gtY2FyZC1saWJyYXJ5LnRzJztcclxuaW1wb3J0IHsgUmVhY3Rpb25NYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL3JlYWN0aW9ucy9yZWFjdGlvbi1tYW5hZ2VyLnRzJztcclxuaW1wb3J0IHsgRXhwYW5zaW9uRGF0YSB9IGZyb20gJ0BleHBhbnNpb25zL2V4cGFuc2lvbi1saWJyYXJ5LnRzJztcclxuaW1wb3J0IHsgQ2FyZFByaWNlUnVsZXNDb250cm9sbGVyIH0gZnJvbSAnLi9jb3JlL2NhcmQtcHJpY2UtcnVsZXMtY29udHJvbGxlci50cyc7XHJcbmltcG9ydCB7IENhcmRTb3VyY2VDb250cm9sbGVyIH0gZnJvbSAnLi9jb3JlL2NhcmQtc291cmNlLWNvbnRyb2xsZXIudHMnO1xyXG5cclxuZXhwb3J0IHR5cGUgQXBwU29ja2V0ID0gU29ja2V0PFNlcnZlckxpc3RlbkV2ZW50cywgU2VydmVyRW1pdEV2ZW50cz47XHJcblxyXG5leHBvcnQgdHlwZSBEaXN0cmlidXRpdmVPbWl0PFQsIEsgZXh0ZW5kcyBQcm9wZXJ0eUtleT4gPVxyXG4gIFQgZXh0ZW5kcyBhbnkgPyBPbWl0PFQsIEs+IDogbmV2ZXI7XHJcblxyXG5kZWNsYXJlIG1vZHVsZSAnc2hhcmVkL3NoYXJlZC10eXBlcy50cycge1xyXG4gIGludGVyZmFjZSBTZWxlY3RBY3Rpb25DYXJkQXJncyB7XHJcbiAgICByZXN0cmljdDogRmluZENhcmRzRm5JbnB1dCB8IENhcmRJZFtdO1xyXG4gICAgYXV0b1NlbGVjdD86IGJvb2xlYW47XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQSBiYXNlIG1hdGNoIGNvbmZpZ3VyYXRpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBzcHJlYWQgZGVmYXVsdCB2YWx1ZXMuXHJcbiAqXHJcbiAqIFRoZSBgc3VwcGx5LmJhc2VDYXJkc2AgcHJvcGVydHkgY29udGFpbnMgYWxsIHBvc3NpYmxlIGJhc2Ugc3VwcGx5IGNhcmQgY29tYmluYXRpb25zIGZvciB0aGUgbnVtYmVyXHJcbiAqIG9mIHBsYXllcnMgaW4gYSBnaXZlbiBnYW1lLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE1hdGNoQmFzZUNvbmZpZ3VyYXRpb24gPSB7XHJcbiAgbnVtYmVyT2ZLaW5nZG9tUGlsZXM6IDEwLFxyXG4gIGJhc2ljU3VwcGx5QnlQbGF5ZXJDb3VudDogW1xyXG4gICAge1xyXG4gICAgICAncHJvdmluY2UnOiA4LFxyXG4gICAgICAnZHVjaHknOiA4LFxyXG4gICAgICAnZXN0YXRlJzogOCxcclxuICAgICAgJ2N1cnNlJzogMTAsXHJcbiAgICAgICdnb2xkJzogMzAsXHJcbiAgICAgICdzaWx2ZXInOiA0MCxcclxuICAgICAgJ2NvcHBlcic6IDYwLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgJ3Byb3ZpbmNlJzogMTIsXHJcbiAgICAgICdkdWNoeSc6IDEyLFxyXG4gICAgICAnZXN0YXRlJzogMTIsXHJcbiAgICAgICdjdXJzZSc6IDIwLFxyXG4gICAgICAnZ29sZCc6IDMwLFxyXG4gICAgICAnc2lsdmVyJzogNDAsXHJcbiAgICAgICdjb3BwZXInOiA2MCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICdwcm92aW5jZSc6IDEyLFxyXG4gICAgICAnZHVjaHknOiAxMixcclxuICAgICAgJ2VzdGF0ZSc6IDEyLFxyXG4gICAgICAnY3Vyc2UnOiAzMCxcclxuICAgICAgJ2dvbGQnOiAzMCxcclxuICAgICAgJ3NpbHZlcic6IDQwLFxyXG4gICAgICAnY29wcGVyJzogNjAsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAncHJvdmluY2UnOiAxNSxcclxuICAgICAgJ2R1Y2h5JzogMTIsXHJcbiAgICAgICdlc3RhdGUnOiAxMixcclxuICAgICAgJ2N1cnNlJzogNDAsXHJcbiAgICAgICdnb2xkJzogNjAsXHJcbiAgICAgICdzaWx2ZXInOiA4MCxcclxuICAgICAgJ2NvcHBlcic6IDEyMCxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICdwcm92aW5jZSc6IDE4LFxyXG4gICAgICAnZHVjaHknOiAxMixcclxuICAgICAgJ2VzdGF0ZSc6IDEyLFxyXG4gICAgICAnY3Vyc2UnOiA1MCxcclxuICAgICAgJ2dvbGQnOiA2MCxcclxuICAgICAgJ3NpbHZlcic6IDgwLFxyXG4gICAgICAnY29wcGVyJzogMTIwLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgJ3Byb3ZpbmNlJzogMTgsXHJcbiAgICAgICdkdWNoeSc6IDEyLFxyXG4gICAgICAnZXN0YXRlJzogMTIsXHJcbiAgICAgICdjdXJzZSc6IDUwLFxyXG4gICAgICAnZ29sZCc6IDYwLFxyXG4gICAgICAnc2lsdmVyJzogODAsXHJcbiAgICAgICdjb3BwZXInOiAxMjAsXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgcGxheWVyU3RhcnRpbmdIYW5kOiB7XHJcbiAgICAnY29wcGVyJzogNyxcclxuICAgICdlc3RhdGUnOiAzLFxyXG4gIH0sXHJcbiAgbnVtYmVyT2ZFdmVudHNBbmRPdGhlcnM6IDIsXHJcbn0gYXMgY29uc3Q7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExpZmVjeWNsZVN1cHByZXNzaW9uIHtcclxuICBldmVudHM/OiBDYXJkTGlmZWN5Y2xlRXZlbnRbXTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgR2FtZUFjdGlvbkNvbnRleHQgPSB7XHJcbiAgbG9nZ2luZ0NvbnRleHQ/OiB7XHJcbiAgICBzdXBwcmVzcz86IGJvb2xlYW47XHJcbiAgICBzb3VyY2U/OiBDYXJkSWQ7XHJcbiAgfTtcclxuICBzdXBwcmVzc0xpZmVDeWNsZT86IExpZmVjeWNsZVN1cHByZXNzaW9uO1xyXG59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCYXNlR2FtZUFjdGlvbkRlZmluaXRpb25NYXAge1xyXG4gIGJ1eUNhcmQ6IChhcmdzOiB7XHJcbiAgICBjYXJkSWQ6IENhcmRJZCB8IENhcmQ7XHJcbiAgICBwbGF5ZXJJZDogUGxheWVySWQsXHJcbiAgICBjYXJkQ29zdDogQ2FyZENvc3QsXHJcbiAgICBvdmVycGF5PzogeyBpblRyZWFzdXJlOiBudW1iZXI7IGluQ29mZmVyOiBudW1iZXI7IH1cclxuICB9KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGJ1eUNhcmRMaWtlOiAoYXJnczoge1xyXG4gICAgY2FyZExpa2VJZDogQ2FyZExpa2VJZDtcclxuICAgIHBsYXllcklkOiBQbGF5ZXJJZDtcclxuICB9KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGNoZWNrRm9yUmVtYWluaW5nUGxheWVyQWN0aW9uczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBleGNoYW5nZUNvZmZlcjogKGFyZ3M6IHsgcGxheWVySWQ6IFBsYXllcklkOyBjb3VudDogbnVtYmVyOyB9KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGRpc2NhcmRDYXJkOiAoYXJnczogeyBjYXJkSWQ6IENhcmRJZCB8IENhcmQsIHBsYXllcklkOiBQbGF5ZXJJZCB9LCBjb250ZXh0PzogR2FtZUFjdGlvbkNvbnRleHQpID0+IFByb21pc2U8dm9pZD47XHJcbiAgZHJhd0NhcmQ6IChhcmdzOiB7IHBsYXllcklkOiBQbGF5ZXJJZCwgY291bnQ/OiBudW1iZXIgfSwgY29udGV4dD86IEdhbWVBY3Rpb25Db250ZXh0KSA9PiBQcm9taXNlPENhcmRJZFtdIHwgbnVsbD5cclxuICBlbmRUdXJuOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGdhaW5BY3Rpb246IChhcmdzOiB7IGNvdW50OiBudW1iZXIgfSwgY29udGV4dD86IEdhbWVBY3Rpb25Db250ZXh0KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGdhaW5CdXk6IChhcmdzOiB7IGNvdW50OiBudW1iZXIgfSwgY29udGV4dD86IEdhbWVBY3Rpb25Db250ZXh0KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGdhaW5Db2ZmZXI6IChhcmdzOiB7IHBsYXllcklkOiBQbGF5ZXJJZDsgY291bnQ6IG51bWJlcjsgfSwgY29udGV4dD86IEdhbWVBY3Rpb25Db250ZXh0KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGdhaW5DYXJkOiAoYXJnczoge1xyXG4gICAgcGxheWVySWQ6IFBsYXllcklkLFxyXG4gICAgY2FyZElkOiBDYXJkSWQgfCBDYXJkLFxyXG4gICAgdG86IENhcmRMb2NhdGlvblNwZWNcclxuICB9LCBjb250ZXh0PzogR2FtZUFjdGlvbkNvbnRleHQgJiB7IGJvdWdodD86IGJvb2xlYW4sIG92ZXJwYXk/OiBudW1iZXIgfSkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBnYWluUG90aW9uOiAoYXJnczogeyBjb3VudDogbnVtYmVyIH0pID0+IFByb21pc2U8dm9pZD47XHJcbiAgZ2FpblRyZWFzdXJlOiAoYXJnczogeyBjb3VudDogbnVtYmVyIH0sIGNvbnRleHQ/OiBHYW1lQWN0aW9uQ29udGV4dCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBnYWluVmljdG9yeVRva2VuOiAoYXJnczogeyBwbGF5ZXJJZDogUGxheWVySWQ7IGNvdW50OiBudW1iZXI7IH0sIGNvbnRleHQ/OiBHYW1lQWN0aW9uQ29udGV4dCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBtb3ZlQ2FyZDogKGFyZ3M6IHtcclxuICAgIHRvUGxheWVySWQ/OiBQbGF5ZXJJZCxcclxuICAgIGNhcmRJZDogQ2FyZElkIHwgQ2FyZCxcclxuICAgIHRvOiBDYXJkTG9jYXRpb25TcGVjXHJcbiAgfSkgPT4gUHJvbWlzZTx7IGxvY2F0aW9uOiBDYXJkTG9jYXRpb247IHBsYXllcklkPzogUGxheWVySWQ7IH0gfCB1bmRlZmluZWQ+O1xyXG4gIG5leHRQaGFzZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBwbGF5Q2FyZDogKGFyZ3M6IHtcclxuICAgIHBsYXllcklkOiBQbGF5ZXJJZCxcclxuICAgIGNhcmRJZDogQ2FyZElkIHwgQ2FyZCxcclxuICAgIG92ZXJyaWRlcz86IEdhbWVBY3Rpb25PdmVycmlkZXNcclxuICB9LCBjb250ZXh0PzogR2FtZUFjdGlvbkNvbnRleHQpID0+IFByb21pc2U8dm9pZD47XHJcbiAgcmV2ZWFsQ2FyZDogKGFyZ3M6IHtcclxuICAgIGNhcmRJZDogQ2FyZElkIHwgQ2FyZCxcclxuICAgIHBsYXllcklkOiBQbGF5ZXJJZCxcclxuICAgIG1vdmVUb1NldEFzaWRlPzogYm9vbGVhblxyXG4gIH0sIGNvbnRleHQ/OiBHYW1lQWN0aW9uQ29udGV4dCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBzZWxlY3RDYXJkOiAoYXJnczogU2VsZWN0QWN0aW9uQ2FyZEFyZ3MpID0+IFByb21pc2U8Q2FyZElkW10+O1xyXG4gIHNodWZmbGVEZWNrOiAoYXJnczogeyBwbGF5ZXJJZDogUGxheWVySWQgfSwgY29udGV4dD86IEdhbWVBY3Rpb25Db250ZXh0KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIHRyYXNoQ2FyZDogKGFyZ3M6IHsgY2FyZElkOiBDYXJkSWQgfCBDYXJkLCBwbGF5ZXJJZDogUGxheWVySWQgfSwgY29udGV4dD86IEdhbWVBY3Rpb25Db250ZXh0KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIHVzZXJQcm9tcHQ6IChhcmdzOiBVc2VyUHJvbXB0QWN0aW9uQXJncykgPT4gUHJvbWlzZTx1bmtub3duPjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHYW1lQWN0aW9uRGVmaW5pdGlvbk1hcCBleHRlbmRzIEJhc2VHYW1lQWN0aW9uRGVmaW5pdGlvbk1hcCB7XHJcbiAgW2tleTogc3RyaW5nXTogKC4uLmFyZ3M6IGFueVtdKSA9PiBQcm9taXNlPGFueT47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEdhbWVBY3Rpb25zID0ga2V5b2YgR2FtZUFjdGlvbkRlZmluaXRpb25NYXA7XHJcblxyXG5leHBvcnQgdHlwZSBHYW1lQWN0aW9uQXJnc01hcCA9IHtcclxuICBbSyBpbiBHYW1lQWN0aW9uc106IFBhcmFtZXRlcnM8R2FtZUFjdGlvbkRlZmluaXRpb25NYXBbS10+WzBdO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgR2FtZUFjdGlvbkNvbnRleHRNYXAgPSB7XHJcbiAgW0sgaW4gR2FtZUFjdGlvbnNdOiBQYXJhbWV0ZXJzPEdhbWVBY3Rpb25EZWZpbml0aW9uTWFwW0tdPlsxXTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEdhbWVBY3Rpb25SZXR1cm5UeXBlTWFwID0ge1xyXG4gIFtLIGluIEdhbWVBY3Rpb25zXTogQXdhaXRlZDxSZXR1cm5UeXBlPEdhbWVBY3Rpb25EZWZpbml0aW9uTWFwW0tdPj47XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBSdW5HYW1lQWN0aW9uRGVsZWdhdGUgPSA8SyBleHRlbmRzIEdhbWVBY3Rpb25zPihcclxuICBhY3Rpb246IEssXHJcbiAgLi4uYXJnczogUGFyYW1ldGVyczxHYW1lQWN0aW9uRGVmaW5pdGlvbk1hcFtLXT5cclxuKSA9PiBQcm9taXNlPEdhbWVBY3Rpb25SZXR1cm5UeXBlTWFwW0tdPjtcclxuXHJcbmV4cG9ydCB0eXBlIFJlYWN0aW9uQ29udGV4dCA9IGFueTtcclxuXHJcbmV4cG9ydCB0eXBlIENhcmRFZmZlY3RGbiA9IChjb250ZXh0OiBDYXJkRWZmZWN0RnVuY3Rpb25Db250ZXh0KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuZXhwb3J0IHR5cGUgQ2FyZEVmZmVjdEZhY3RvcnkgPSAoKSA9PiBDYXJkRWZmZWN0Rm47XHJcblxyXG5leHBvcnQgdHlwZSBDYXJkRWZmZWN0RmFjdG9yeU1hcCA9IFJlY29yZDxDYXJkS2V5LCBDYXJkRWZmZWN0RmFjdG9yeT47XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFwcENvbnRleHQge1xyXG4gIGNhcmRTb3VyY2VDb250cm9sbGVyOiBDYXJkU291cmNlQ29udHJvbGxlcjtcclxuICBjYXJkUHJpY2VDb250cm9sbGVyOiBDYXJkUHJpY2VSdWxlc0NvbnRyb2xsZXI7XHJcbiAgbWF0Y2g6IE1hdGNoO1xyXG4gIHJlYWN0aW9uTWFuYWdlcjogUmVhY3Rpb25NYW5hZ2VyO1xyXG4gIHJlYWN0aW9uQ29udGV4dD86IFJlYWN0aW9uQ29udGV4dDtcclxuICBjYXJkTGlicmFyeTogTWF0Y2hDYXJkTGlicmFyeTtcclxuICBmaW5kQ2FyZHM6IEZpbmRDYXJkc0ZuO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDb3N0RmluZENhcmRzRmlsdGVyID0gQ29zdFNwZWM7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhcmREYXRhRmluZENhcmRzRmlsdGVyIHtcclxuICB0YWdzPzogc3RyaW5nIHwgc3RyaW5nW107XHJcbiAgY2FyZEtleXM/OiBDYXJkS2V5IHwgQ2FyZEtleVtdO1xyXG4gIGNhcmRUeXBlPzogQ2FyZFR5cGUgfCBDYXJkVHlwZVtdO1xyXG4gIG93bmVyPzogUGxheWVySWQ7XHJcbiAga2luZ2RvbT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTb3VyY2VGaW5kQ2FyZHNGaWx0ZXIge1xyXG4gIGxvY2F0aW9uOiBDYXJkTG9jYXRpb24gfCBDYXJkTG9jYXRpb25bXTtcclxuICBwbGF5ZXJJZD86IFBsYXllcklkO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBOb25Mb2NhdGlvbkZpbHRlcnMgPSBDb3N0RmluZENhcmRzRmlsdGVyIHwgQ2FyZERhdGFGaW5kQ2FyZHNGaWx0ZXI7XHJcblxyXG5leHBvcnQgdHlwZSBGaW5kQ2FyZHNGbkZhY3RvcnkgPSAoY2FyZFNvdXJjZUNvbnRyb2xsZXI6IENhcmRTb3VyY2VDb250cm9sbGVyLCBjYXJkQ29zdENvbnRyb2xsZXI6IENhcmRQcmljZVJ1bGVzQ29udHJvbGxlciwgY2FyZExpYnJhcnk6IE1hdGNoQ2FyZExpYnJhcnkpID0+IEZpbmRDYXJkc0ZuO1xyXG5cclxuZXhwb3J0IHR5cGUgRmluZENhcmRzRm5JbnB1dCA9XHJcbiAgfCBOb25Mb2NhdGlvbkZpbHRlcnNbXVxyXG4gIHwgU291cmNlRmluZENhcmRzRmlsdGVyXHJcbiAgfCBOb25Mb2NhdGlvbkZpbHRlcnNcclxuICB8IFtTb3VyY2VGaW5kQ2FyZHNGaWx0ZXIsIC4uLk5vbkxvY2F0aW9uRmlsdGVyc1tdXTtcclxuXHJcblxyXG5leHBvcnQgdHlwZSBGaW5kQ2FyZHNGbiA9IChmaWx0ZXJzOiBGaW5kQ2FyZHNGbklucHV0KSA9PiBDYXJkW107XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNTb3VyY2VGaW5kQ2FyZHNGaWx0ZXIoZmlsdGVyOiB1bmtub3duKTogZmlsdGVyIGlzIFNvdXJjZUZpbmRDYXJkc0ZpbHRlciB7XHJcbiAgcmV0dXJuIChcclxuICAgIHR5cGVvZiBmaWx0ZXIgPT09ICdvYmplY3QnICYmXHJcbiAgICBmaWx0ZXIgIT09IG51bGwgJiZcclxuICAgICdsb2NhdGlvbicgaW4gZmlsdGVyXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29zdEZpbmRDYXJkc0ZpbHRlcihmaWx0ZXI6IHVua25vd24pOiBmaWx0ZXIgaXMgQ29zdEZpbmRDYXJkc0ZpbHRlciB7XHJcbiAgcmV0dXJuIChcclxuICAgIHR5cGVvZiBmaWx0ZXIgPT09ICdvYmplY3QnICYmXHJcbiAgICBmaWx0ZXIgIT09IG51bGwgJiZcclxuICAgICdraW5kJyBpbiBmaWx0ZXIgJiZcclxuICAgICdwbGF5ZXJJZCcgaW4gZmlsdGVyICYmXHJcbiAgICAnYW1vdW50JyBpbiBmaWx0ZXJcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNDYXJkRGF0YUZpbmRDYXJkc0ZpbHRlcihmaWx0ZXI6IHVua25vd24pOiBmaWx0ZXIgaXMgQ2FyZERhdGFGaW5kQ2FyZHNGaWx0ZXIge1xyXG4gIHJldHVybiAoXHJcbiAgICB0eXBlb2YgZmlsdGVyID09PSAnb2JqZWN0JyAmJlxyXG4gICAgZmlsdGVyICE9PSBudWxsICYmXHJcbiAgICAoXHJcbiAgICAgICd0YWdzJyBpbiBmaWx0ZXIgfHxcclxuICAgICAgJ2NhcmRLZXlzJyBpbiBmaWx0ZXIgfHxcclxuICAgICAgJ2NhcmRUeXBlJyBpbiBmaWx0ZXIgfHxcclxuICAgICAgJ293bmVyJyBpbiBmaWx0ZXJcclxuICAgIClcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhcmRFZmZlY3RGdW5jdGlvbkNvbnRleHQgZXh0ZW5kcyBBcHBDb250ZXh0IHtcclxuICBwbGF5ZXJJZDogUGxheWVySWQ7XHJcbiAgY2FyZElkOiBDYXJkSWQ7XHJcbiAgcnVuR2FtZUFjdGlvbkRlbGVnYXRlOiBSdW5HYW1lQWN0aW9uRGVsZWdhdGU7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENhcmRUcmlnZ2VyZWRFZmZlY3RGbjxUIGV4dGVuZHMgVHJpZ2dlckV2ZW50VHlwZT4gPSAoY29udGV4dDogVHJpZ2dlcmVkRWZmZWN0Q29udGV4dDxUPikgPT4gUHJvbWlzZTxhbnk+O1xyXG5cclxudHlwZSBDYXJkVHJpZ2dlckVmZmVjdENvbmRpdGlvbkZuPFQgZXh0ZW5kcyBUcmlnZ2VyRXZlbnRUeXBlPiA9IChjb250ZXh0OiBUcmlnZ2VyZWRFZmZlY3RDb25kaXRpb25Db250ZXh0PFQ+KSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPjtcclxuXHJcbmV4cG9ydCB0eXBlIENhcmRFZmZlY3RGdW5jdGlvbiA9IChjb250ZXh0OiBDYXJkRWZmZWN0RnVuY3Rpb25Db250ZXh0KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuZXhwb3J0IHR5cGUgQ2FyZEVmZmVjdEZ1bmN0aW9uTWFwID1cclxuICBSZWNvcmQ8Q2FyZEtleSwgQ2FyZEVmZmVjdEZ1bmN0aW9uPjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZFNjb3JpbmdGbkNvbnRleHQgZXh0ZW5kcyBBcHBDb250ZXh0IHtcclxuICBvd25lcklkOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEV4cGFuc2lvbkNvbmZpZ3VyYXRvckNvbnRleHQgPSBJbml0aWFsaXplRXhwYW5zaW9uQ29udGV4dCAmIHtcclxuICBjb25maWc6IENvbXB1dGVkTWF0Y2hDb25maWd1cmF0aW9uO1xyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgdGhlICplbnRpcmUqIGxpYnJhcnkgb2YgY2FyZHMuIFRoaXMgKnNob3VsZCogYmUgcHJpc3RpbmUgZGF0YSBsb2FkZWQgZnJvbSBleHBhbnNpb25zXHJcbiAgICovXHJcbiAgY2FyZExpYnJhcnk6IFJlY29yZDxDYXJkS2V5LCBDYXJkTm9JZD47XHJcbiAgZXhwYW5zaW9uRGF0YTogRXhwYW5zaW9uRGF0YTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEV4cGFuc2lvbkNvbmZpZ3VyYXRvciA9IChhcmdzOiBFeHBhbnNpb25Db25maWd1cmF0b3JDb250ZXh0KSA9PiBQcm9taXNlPENvbXB1dGVkTWF0Y2hDb25maWd1cmF0aW9uPjtcclxuZXhwb3J0IHR5cGUgRXhwYW5zaW9uQ29uZmlndXJhdG9yRmFjdG9yeSA9ICgpID0+IEV4cGFuc2lvbkNvbmZpZ3VyYXRvcjtcclxuXHJcbmV4cG9ydCB0eXBlIENhcmRTY29yaW5nRnVuY3Rpb24gPSAoYXJnczogQ2FyZFNjb3JpbmdGbkNvbnRleHQpID0+IG51bWJlcjtcclxuXHJcbmV4cG9ydCB0eXBlIENhcmRFeHBhbnNpb25BY3Rpb25Db25kaXRpb25NYXAgPSB7XHJcbiAgY2FuQnV5PzogKGFyZ3M6IHsgbWF0Y2g6IE1hdGNoLCBjYXJkTGlicmFyeTogTWF0Y2hDYXJkTGlicmFyeSwgcGxheWVySWQ6IFBsYXllcklkIH0pID0+IGJvb2xlYW5cclxufTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZEV4cGFuc2lvbk1vZHVsZSB7XHJcbiAgW3A6IENhcmRLZXldOiB7XHJcbiAgICByZWdpc3RlckFjdGlvbkNvbmRpdGlvbnM/OiAoKSA9PiBDYXJkRXhwYW5zaW9uQWN0aW9uQ29uZGl0aW9uTWFwO1xyXG4gICAgcmVnaXN0ZXJMaWZlQ3ljbGVNZXRob2RzPzogKCkgPT4gQ2FyZExpZmVjeWNsZUNhbGxiYWNrTWFwO1xyXG4gICAgcmVnaXN0ZXJTY29yaW5nRnVuY3Rpb24/OiAoKSA9PiBDYXJkU2NvcmluZ0Z1bmN0aW9uO1xyXG4gICAgcmVnaXN0ZXJFZmZlY3RzPzogQ2FyZEVmZmVjdEZhY3Rvcnk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBHYW1lQWN0aW9uT3ZlcnJpZGVzID0ge1xyXG4gIGFjdGlvbkNvc3Q/OiBudW1iZXIsXHJcbiAgbW92ZUNhcmQ/OiBib29sZWFuLFxyXG4gIHBsYXlDYXJkPzogYm9vbGVhbixcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZWFjdGlvblRyaWdnZXI8VCBleHRlbmRzIFRyaWdnZXJFdmVudFR5cGUgPSBUcmlnZ2VyRXZlbnRUeXBlPiB7XHJcbiAgZXZlbnRUeXBlOiBUO1xyXG4gIFxyXG4gIGFyZ3M6IFRyaWdnZXJFdmVudFR5cGVDb250ZXh0W1RdO1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKGV2ZW50VHlwZTogVCwgLi4ucmVzdDogVHJpZ2dlckV2ZW50VHlwZUNvbnRleHRbVF0gZXh0ZW5kcyB2b2lkID8gW10gOiBbVHJpZ2dlckV2ZW50VHlwZUNvbnRleHRbVF1dKSB7XHJcbiAgICB0aGlzLmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcclxuICAgIHRoaXMuYXJncyA9IChyZXN0WzBdID8/IHVuZGVmaW5lZCkgYXMgVHJpZ2dlckV2ZW50VHlwZUNvbnRleHRbVF07XHJcbiAgfVxyXG4gIFxyXG4gIHRvU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIGBbVFJJR0dFUiAke3RoaXMuZXZlbnRUeXBlfV1gO1xyXG4gIH1cclxuICBcclxuICAvLyBAdHMtaWdub3JlXHJcbiAgW1N5bWJvbC5mb3IoJ0Rlbm8uY3VzdG9tSW5zcGVjdCcpXSgpIHtcclxuICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRyaWdnZXJlZEVmZmVjdENvbnRleHQ8VCBleHRlbmRzIFRyaWdnZXJFdmVudFR5cGU+IGV4dGVuZHMgQXBwQ29udGV4dCB7XHJcbiAgdHJpZ2dlcjogUmVhY3Rpb25UcmlnZ2VyPFQ+O1xyXG4gIHJlYWN0aW9uOiBSZWFjdGlvbjtcclxuICBydW5HYW1lQWN0aW9uRGVsZWdhdGU6IFJ1bkdhbWVBY3Rpb25EZWxlZ2F0ZTtcclxuICBpc1Jvb3RMb2c/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRyaWdnZXJlZEVmZmVjdENvbmRpdGlvbkNvbnRleHQ8VCBleHRlbmRzIFRyaWdnZXJFdmVudFR5cGU+IGV4dGVuZHMgQXBwQ29udGV4dCB7XHJcbiAgdHJpZ2dlcjogUmVhY3Rpb25UcmlnZ2VyPFQ+O1xyXG4gIHJlYWN0aW9uOiBSZWFjdGlvbjtcclxuICBydW5HYW1lQWN0aW9uRGVsZWdhdGU6IFJ1bkdhbWVBY3Rpb25EZWxlZ2F0ZTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVHJpZ2dlckV2ZW50VHlwZUNvbnRleHQgPSB7XHJcbiAgYWZ0ZXJDYXJkUGxheWVkOiB7XHJcbiAgICBjYXJkSWQ6IENhcmRJZDtcclxuICAgIHBsYXllcklkOiBQbGF5ZXJJZDtcclxuICB9LFxyXG4gIGNhcmRUcmFzaGVkOiB7XHJcbiAgICBjYXJkSWQ6IENhcmRJZDtcclxuICAgIHBsYXllcklkOiBQbGF5ZXJJZDtcclxuICAgIHByZXZpb3VzTG9jYXRpb246IHsgbG9jYXRpb246IENhcmRMb2NhdGlvbjsgcGxheWVySWQ/OiBQbGF5ZXJJZDsgfTtcclxuICB9O1xyXG4gIGNhcmRQbGF5ZWQ6IHsgcGxheWVySWQ6IFBsYXllcklkOyBjYXJkSWQ6IENhcmRJZDsgfTtcclxuICBzdGFydFR1cm46IHsgcGxheWVySWQ6IFBsYXllcklkOyB0dXJuTnVtYmVyOiBudW1iZXI7IH07XHJcbiAgY2FyZEdhaW5lZDoge1xyXG4gICAgcGxheWVySWQ6IFBsYXllcklkO1xyXG4gICAgY2FyZElkOiBDYXJkSWQ7XHJcbiAgICBib3VnaHQ6IGJvb2xlYW47XHJcbiAgICBwcmV2aW91c0xvY2F0aW9uPzogeyBsb2NhdGlvbjogQ2FyZExvY2F0aW9uOyBwbGF5ZXJJZD86IFBsYXllcklkOyB9O1xyXG4gIH07XHJcbiAgZW5kVHVyblBoYXNlOiB7IHBoYXNlSW5kZXg6IG51bWJlcjsgcGxheWVySWQ6IFBsYXllcklkO307XHJcbiAgc3RhcnRUdXJuUGhhc2U6IHsgcGhhc2VJbmRleDogbnVtYmVyOyB9O1xyXG4gIGVuZFR1cm46IHZvaWQ7XHJcbiAgZGlzY2FyZENhcmQ6IHtcclxuICAgIHByZXZpb3VzTG9jYXRpb246IHsgbG9jYXRpb246IENhcmRMb2NhdGlvbjsgcGxheWVySWQ/OiBQbGF5ZXJJZDsgfTtcclxuICAgIHBsYXllcklkOiBQbGF5ZXJJZDtcclxuICAgIGNhcmRJZDogQ2FyZElkO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRyaWdnZXJFdmVudFR5cGUgPSBrZXlvZiBUcmlnZ2VyRXZlbnRUeXBlQ29udGV4dDtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZWFjdGlvbjxUIGV4dGVuZHMgVHJpZ2dlckV2ZW50VHlwZSA9IFRyaWdnZXJFdmVudFR5cGU+IHtcclxuICAvLyBhIGNvbmNhdGVuYXRpb24gb2YgdGhlIGNhcmQga2V5IGFuZCBjYXJkIGlkIHdpdGggYSAnLSdcclxuICBwdWJsaWMgaWQ6IHN0cmluZztcclxuICBcclxuICAvLyB0aGUgcGxheWVyJ3MgSUQgd2hvIG93bnMgdGhpcyByZWFjdGlvbiAtIHRoZSBvbmUgdGhhdCBjYW4gZGVjaWRlIHRvIGRvIGl0LlxyXG4gIHB1YmxpYyBwbGF5ZXJJZDogbnVtYmVyO1xyXG4gIFxyXG4gIHB1YmxpYyBsaXN0ZW5pbmdGb3I6IFQ7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHRoZSB0cmlnZ2VyZWQgZWZmZWN0IG9ubHkgaGFwcGVucyBvbmNlIGZvciB0aGlzIHBhcnRpY3VsYXIgaW5zdGFuY2Ugb2YgdGhlIHJlYWN0aW9uLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgZmFsc2VcclxuICAgKi9cclxuICBwdWJsaWMgb25jZT86IGJvb2xlYW4gPSBmYWxzZTtcclxuICBcclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgdHJpZ2dlcmVkIGVmZmVjdCBoYXBwZW5zIHJlZ2FyZGxlc3Mgb2YgdXNlciBjaG9pY2UuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBmYWxzZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb21wdWxzb3J5PzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGF0IHRoZSB0cmlnZ2VyZWQgZWZmZWN0IGhhcHBlbnMgcmVnYXJkbGVzcyBvZiBnYW1lIHN0YXRlIGFuZCB1c2VyIGludGVyYWN0aW9uLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgZmFsc2VcclxuICAgKi9cclxuICBwdWJsaWMgc3lzdGVtPzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB0aGF0IHRoZSByZWFjdGlvbiBjYW4gYmUgdXNlZCBieSBtdWx0aXBsZSBkaWZmZXJlbnQgaW5zdGFuY2VzIG9mIHRoZSBzYW1lIGNhcmQuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCB0cnVlXHJcbiAgICovXHJcbiAgcHVibGljIGFsbG93TXVsdGlwbGVJbnN0YW5jZXM/OiBib29sZWFuID0gdHJ1ZTtcclxuICBcclxuICBwdWJsaWMgZXh0cmFEYXRhPzogYW55O1xyXG4gIFxyXG4gIC8vIHRvZG8gd29ya2luZyBvbiBtb2F0IHJpZ2h0IG5vdyB3aGljaCBoYXMgbm8gY29uZGl0aW9uIG90aGVyIHRoYW4gaXQgYmUgYW4gYXR0YWNrLlxyXG4gIC8vIGluIHRoZSBmdXR1cmUgd2UgbWlnaHQgbmVlZCB0byBkZWZpbmUgdGhpcyBjb25kaXRpb24gbWV0aG9kIGVsc2V3aGVyZSBzdWNoIGFzXHJcbiAgLy8gaW4gdGhlIGV4cGFuc2lvbidzIG1vZHVsZT8gbmVlZCB0byB3YWl0IHRvIHNlZSB3aGF0IGtpbmQgb2YgY29uZGl0aW9ucyB0aGVyZSBhcmUgaSB0aGlua1xyXG4gIHB1YmxpYyBjb25kaXRpb24/OiBDYXJkVHJpZ2dlckVmZmVjdENvbmRpdGlvbkZuPFQ+XHJcbiAgXHJcbiAgLy8gdG9kbyBkZWZpbmVkIGluIGEgbWFwIHNvbWV3aGVyZSBqdXN0IGxpa2UgcmVnaXN0ZXJlZCBjYXJkIGVmZmVjdHMuIHNvIG1heWJlIGFub3RoZXIgZXhwb3J0XHJcbiAgLy8gZnJvbSB0ZWggZXhwYW5zaW9uIG1vZHVsZSB0aGF0IGRlZmluZXMgd2hhdCBoYXBwZW5zIHdoZW4geW91IGNjbiByZWFjdD9cclxuICBwdWJsaWMgdHJpZ2dlcmVkRWZmZWN0Rm46IENhcmRUcmlnZ2VyZWRFZmZlY3RGbjxUPjtcclxuICBcclxuICBjb25zdHJ1Y3Rvcihhcmc6IFJlYWN0aW9uVGVtcGxhdGU8VD4pIHtcclxuICAgIHRoaXMuaWQgPSBhcmcuaWQ7XHJcbiAgICB0aGlzLnBsYXllcklkID0gYXJnLnBsYXllcklkO1xyXG4gICAgdGhpcy5saXN0ZW5pbmdGb3IgPSBhcmcubGlzdGVuaW5nRm9yO1xyXG4gICAgdGhpcy5jb25kaXRpb24gPSBhcmcuY29uZGl0aW9uID8/ICgoKSA9PiB0cnVlKTtcclxuICAgIHRoaXMudHJpZ2dlcmVkRWZmZWN0Rm4gPSBhcmcudHJpZ2dlcmVkRWZmZWN0Rm47XHJcbiAgICB0aGlzLm9uY2UgPSBhcmcub25jZSA/PyBmYWxzZTtcclxuICAgIHRoaXMuYWxsb3dNdWx0aXBsZUluc3RhbmNlcyA9IGFyZy5hbGxvd011bHRpcGxlSW5zdGFuY2VzID8/IHRydWU7XHJcbiAgICB0aGlzLmNvbXB1bHNvcnkgPSBhcmcuY29tcHVsc29yeSA/PyBmYWxzZTtcclxuICAgIHRoaXMuc3lzdGVtID0gYXJnLnN5c3RlbSA/PyBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgcHVibGljIGdldEJhc2VJZCgpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmdldFNvdXJjZUtleSgpfToke3RoaXMuZ2V0U291cmNlSWQoKX1gO1xyXG4gIH1cclxuICBcclxuICBwdWJsaWMgZ2V0U291cmNlS2V5KCkge1xyXG4gICAgbGV0IG91dDtcclxuICAgIHRyeSB7XHJcbiAgICAgIG91dCA9IHRoaXMuaWQuc3BsaXQoJzonKT8uWzBdO1xyXG4gICAgICByZXR1cm4gb3V0O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBwdWJsaWMgZ2V0U291cmNlSWQoKSB7XHJcbiAgICBsZXQgb3V0O1xyXG4gICAgdHJ5IHtcclxuICAgICAgb3V0ID0gdG9OdW1iZXIodGhpcy5pZC5zcGxpdCgnOicpPy5bMV0pO1xyXG4gICAgICByZXR1cm4gb3V0O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiBgW1JFQUNUSU9OICR7dGhpcy5pZH0gLSBvd25lciB7JHt0aGlzLnBsYXllcklkfX1dYDtcclxuICB9XHJcbiAgXHJcbiAgLy8gQHRzLWlnbm9yZVxyXG4gIFtTeW1ib2wuZm9yKCdEZW5vLmN1c3RvbUluc3BlY3QnKV0oKSB7XHJcbiAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUmVhY3Rpb25UZW1wbGF0ZTxUIGV4dGVuZHMgVHJpZ2dlckV2ZW50VHlwZSA9IFRyaWdnZXJFdmVudFR5cGU+ID0gT21pdDxSZWFjdGlvbjxUPiwgJ2dldFNvdXJjZUlkJyB8ICdnZXRTb3VyY2VLZXknIHwgJ2dldEJhc2VJZCc+O1xyXG5cclxuZXhwb3J0IHR5cGUgR2FtZUxpZmVjeWNsZUNhbGxiYWNrQ29udGV4dCA9IEFwcENvbnRleHQgJiB7XHJcbiAgY2FyZElkOiBDYXJkSWQsXHJcbiAgcnVuR2FtZUFjdGlvbkRlbGVnYXRlOiBSdW5HYW1lQWN0aW9uRGVsZWdhdGU7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEdhbWVMaWZlY3ljbGVDYWxsYmFjayA9IChhcmdzOiBPbWl0PEdhbWVMaWZlY3ljbGVDYWxsYmFja0NvbnRleHQsICdjYXJkSWQnPiwgLi4ucmVzdDogYW55W10pID0+IFByb21pc2U8Q2FyZExpZmVjeWNsZUNhbGxiYWNrUmVzdWx0IHwgdm9pZD47XHJcbmV4cG9ydCB0eXBlIENhcmRHYW1lTGlmZUN5Y2xlQ2FsbGJhY2sgPSAoYXJnczogR2FtZUxpZmVjeWNsZUNhbGxiYWNrQ29udGV4dCwgLi4ucmVzdDogYW55W10pID0+IFByb21pc2U8dm9pZD47XHJcblxyXG5leHBvcnQgdHlwZSBHYW1lTGlmZWN5Y2xlRXZlbnQgPVxyXG4gIHwgJ29uR2FtZVN0YXJ0J1xyXG4gIHwgJ29uQ2FyZEdhaW5lZCc7XHJcblxyXG5leHBvcnQgdHlwZSBHYW1lTGlmZUN5Y2xlRXZlbnRBcmdzTWFwID0ge1xyXG4gIG9uR2FtZVN0YXJ0OiB7IG1hdGNoOiBNYXRjaCB9O1xyXG4gIG9uQ2FyZEdhaW5lZDogeyBjYXJkSWQ6IENhcmRJZCwgcGxheWVySWQ6IFBsYXllcklkLCBtYXRjaDogTWF0Y2ggfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDYXJkTGlmZWN5Y2xlQ2FsbGJhY2tDb250ZXh0ID0gQXBwQ29udGV4dCAmIHtcclxuICBydW5HYW1lQWN0aW9uRGVsZWdhdGU6IFJ1bkdhbWVBY3Rpb25EZWxlZ2F0ZTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ2FyZExpZmVjeWNsZUV2ZW50ID1cclxuICB8ICdvbkdhaW5lZCdcclxuICB8ICdvblRyYXNoZWQnXHJcbiAgfCAnb25EaXNjYXJkZWQnXHJcbiAgfCAnb25FbnRlckhhbmQnXHJcbiAgfCAnb25MZWF2ZUhhbmQnXHJcbiAgfCAnb25FbnRlclBsYXknXHJcbiAgfCAnb25MZWF2ZVBsYXknXHJcbiAgfCAnb25DYXJkUGxheWVkJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZExpZmVjeWNsZUNhbGxiYWNrTWFwIHtcclxuICBvblRyYXNoZWQ/OiBDYXJkTGlmZWN5Y2xlQ2FsbGJhY2s8J29uVHJhc2hlZCc+O1xyXG4gIG9uR2FpbmVkPzogQ2FyZExpZmVjeWNsZUNhbGxiYWNrPCdvbkdhaW5lZCc+O1xyXG4gIG9uRGlzY2FyZGVkPzogQ2FyZExpZmVjeWNsZUNhbGxiYWNrPCdvbkRpc2NhcmRlZCc+O1xyXG4gIG9uRW50ZXJIYW5kPzogQ2FyZExpZmVjeWNsZUNhbGxiYWNrPCdvbkVudGVySGFuZCc+O1xyXG4gIG9uTGVhdmVIYW5kPzogQ2FyZExpZmVjeWNsZUNhbGxiYWNrPCdvbkxlYXZlSGFuZCc+O1xyXG4gIG9uRW50ZXJQbGF5PzogQ2FyZExpZmVjeWNsZUNhbGxiYWNrPCdvbkVudGVyUGxheSc+O1xyXG4gIG9uTGVhdmVQbGF5PzogQ2FyZExpZmVjeWNsZUNhbGxiYWNrPCdvbkxlYXZlUGxheSc+O1xyXG4gIG9uQ2FyZFBsYXllZD86IENhcmRMaWZlY3ljbGVDYWxsYmFjazwnb25DYXJkUGxheWVkJz47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZExpZmVjeWNsZUV2ZW50QXJnTWFwIHtcclxuICBvbkdhaW5lZDogeyBwbGF5ZXJJZDogUGxheWVySWQsIGNhcmRJZDogQ2FyZElkLCBib3VnaHQ6IGJvb2xlYW47IH07XHJcbiAgb25UcmFzaGVkOiB7XHJcbiAgICBwbGF5ZXJJZDogUGxheWVySWQsXHJcbiAgICBjYXJkSWQ6IENhcmRJZCxcclxuICAgIHByZXZpb3VzTG9jYXRpb24/OiB7IGxvY2F0aW9uOiBDYXJkTG9jYXRpb247IHBsYXllcklkPzogUGxheWVySWQ7IH1cclxuICB9O1xyXG4gIG9uRGlzY2FyZGVkOiB7XHJcbiAgICBwbGF5ZXJJZDogUGxheWVySWQsXHJcbiAgICBjYXJkSWQ6IENhcmRJZCxcclxuICAgIHByZXZpb3VzTG9jYXRpb24/OiB7IGxvY2F0aW9uOiBDYXJkTG9jYXRpb247IHBsYXllcklkPzogUGxheWVySWQ7IH1cclxuICB9O1xyXG4gIG9uRW50ZXJIYW5kOiB7IHBsYXllcklkOiBQbGF5ZXJJZCwgY2FyZElkOiBDYXJkSWQgfTtcclxuICBvbkxlYXZlSGFuZDogeyBwbGF5ZXJJZDogUGxheWVySWQsIGNhcmRJZDogQ2FyZElkIH07XHJcbiAgb25FbnRlclBsYXk6IHsgcGxheWVySWQ6IFBsYXllcklkLCBjYXJkSWQ6IENhcmRJZCB9O1xyXG4gIG9uTGVhdmVQbGF5OiB7IGNhcmRJZDogQ2FyZElkIH07XHJcbiAgb25DYXJkUGxheWVkOiB7IHBsYXllcklkOiBQbGF5ZXJJZCwgY2FyZElkOiBDYXJkSWQgfTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ2FyZExpZmVjeWNsZUNhbGxiYWNrUmVzdWx0ID0ge1xyXG4gIHJlZ2lzdGVyVHJpZ2dlcmVkRXZlbnRzPzogUmVhY3Rpb25UZW1wbGF0ZVtdO1xyXG4gIHVucmVnaXN0ZXJUcmlnZ2VyZWRFdmVudHM/OiBzdHJpbmdbXTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENhcmRMaWZlY3ljbGVDYWxsYmFjazxUIGV4dGVuZHMgQ2FyZExpZmVjeWNsZUV2ZW50PiA9IChhcmdzOiBDYXJkTGlmZWN5Y2xlQ2FsbGJhY2tDb250ZXh0LCByZXN0OiBDYXJkTGlmZWN5Y2xlRXZlbnRBcmdNYXBbVF0pID0+IFByb21pc2U8Q2FyZExpZmVjeWNsZUNhbGxiYWNrUmVzdWx0IHwgdm9pZD47XHJcblxyXG5leHBvcnQgdHlwZSBDYXJkRWZmZWN0UmVnaXN0cmFyID0gKGNhcmRLZXk6IENhcmRLZXksIHRhZzogc3RyaW5nLCBmbjogQ2FyZEVmZmVjdEZuKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IHR5cGUgUGxheWVyU2NvcmVEZWNvcmF0b3JSZWdpc3RyYXIgPSAoZGVjb3JhdG9yOiBQbGF5ZXJTY29yZURlY29yYXRvcikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgUGxheWVyU2NvcmVEZWNvcmF0b3IgPSAocGxheWVySWQ6IFBsYXllcklkLCBtYXRjaDogTWF0Y2gpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgdHlwZSBFbmRHYW1lQ29uZGl0aW9uRm5Db250ZXh0ID0gQXBwQ29udGV4dDtcclxuZXhwb3J0IHR5cGUgRW5kR2FtZUNvbmRpdGlvbkZuID0gKGFyZ3M6IEVuZEdhbWVDb25kaXRpb25GbkNvbnRleHQpID0+IGJvb2xlYW47XHJcbmV4cG9ydCB0eXBlIEVuZEdhbWVDb25kaXRpb25SZWdpc3RyYXIgPSAoZW5kR2FtZUNvbmRpdGlvbkZuOiBFbmRHYW1lQ29uZGl0aW9uRm4pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgdHlwZSBDbGllbnRFdmVudFJlZ2lzdHJhciA9IDxUIGV4dGVuZHMga2V5b2YgU2VydmVyTGlzdGVuRXZlbnRzPihldmVudDogVCwgZXZlbnRIYW5kbGVyOiBTZXJ2ZXJMaXN0ZW5FdmVudHNbVF0pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgdHlwZSBHYW1lRXZlbnRSZWdpc3RyYXIgPSAoZXZlbnQ6IEdhbWVMaWZlY3ljbGVFdmVudCwgaGFuZGxlcjogR2FtZUxpZmVjeWNsZUNhbGxiYWNrKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IHR5cGUgSW5pdGlhbGl6ZUV4cGFuc2lvbkNvbnRleHQgPSB7XHJcbiAgY2FyZFNvdXJjZUNvbnRyb2xsZXI6IENhcmRTb3VyY2VDb250cm9sbGVyLFxyXG4gIGdhbWVFdmVudFJlZ2lzdHJhcjogR2FtZUV2ZW50UmVnaXN0cmFyLFxyXG4gIG1hdGNoOiBNYXRjaDtcclxuICBjbGllbnRFdmVudFJlZ2lzdHJhcjogQ2xpZW50RXZlbnRSZWdpc3RyYXI7XHJcbiAgZW5kR2FtZUNvbmRpdGlvblJlZ2lzdHJhcjogRW5kR2FtZUNvbmRpdGlvblJlZ2lzdHJhcjtcclxuICBwbGF5ZXJTY29yZURlY29yYXRvclJlZ2lzdHJhcjogUGxheWVyU2NvcmVEZWNvcmF0b3JSZWdpc3RyYXI7XHJcbiAgY2FyZEVmZmVjdFJlZ2lzdHJhcjogQ2FyZEVmZmVjdFJlZ2lzdHJhcjtcclxufSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBbUJBLFNBQVMsUUFBUSxRQUFRLG9CQUFvQjtBQW9CN0M7Ozs7O0NBS0MsR0FDRCxPQUFPLE1BQU0seUJBQXlCO0VBQ3BDLHNCQUFzQjtFQUN0QiwwQkFBMEI7SUFDeEI7TUFDRSxZQUFZO01BQ1osU0FBUztNQUNULFVBQVU7TUFDVixTQUFTO01BQ1QsUUFBUTtNQUNSLFVBQVU7TUFDVixVQUFVO0lBQ1o7SUFDQTtNQUNFLFlBQVk7TUFDWixTQUFTO01BQ1QsVUFBVTtNQUNWLFNBQVM7TUFDVCxRQUFRO01BQ1IsVUFBVTtNQUNWLFVBQVU7SUFDWjtJQUNBO01BQ0UsWUFBWTtNQUNaLFNBQVM7TUFDVCxVQUFVO01BQ1YsU0FBUztNQUNULFFBQVE7TUFDUixVQUFVO01BQ1YsVUFBVTtJQUNaO0lBQ0E7TUFDRSxZQUFZO01BQ1osU0FBUztNQUNULFVBQVU7TUFDVixTQUFTO01BQ1QsUUFBUTtNQUNSLFVBQVU7TUFDVixVQUFVO0lBQ1o7SUFDQTtNQUNFLFlBQVk7TUFDWixTQUFTO01BQ1QsVUFBVTtNQUNWLFNBQVM7TUFDVCxRQUFRO01BQ1IsVUFBVTtNQUNWLFVBQVU7SUFDWjtJQUNBO01BQ0UsWUFBWTtNQUNaLFNBQVM7TUFDVCxVQUFVO01BQ1YsU0FBUztNQUNULFFBQVE7TUFDUixVQUFVO01BQ1YsVUFBVTtJQUNaO0dBQ0Q7RUFDRCxvQkFBb0I7SUFDbEIsVUFBVTtJQUNW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
// denoCacheMetadata=5745329735771725815,13140415443954480723